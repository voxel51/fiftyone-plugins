{"version":3,"file":"index.umd.js","sources":["../src/index.tsx"],"sourcesContent":["import { Button, Stack, Typography } from \"@mui/material\";\nimport { PluginComponentType, registerComponent } from \"@fiftyone/plugins\";\nimport { useCallback, useState } from \"react\";\nimport { useTriggerPanelEvent } from \"@fiftyone/operators\";\nimport { usePanelState, usePanelStatePartial } from \"@fiftyone/spaces\";\n\nregisterComponent({\n  name: \"HybridCounterComponent\",\n  label: \"HybridCounterComponent\",\n  component: HybridCounter,\n  type: PluginComponentType.Component,\n  activator: () => true,\n});\n\nfunction HybridCounter(props) {\n  const { data, schema } = props;\n  const { save_count, calculate_fibonacci_event } = schema.view;\n  const { fibonacci } = data;\n  const showFibonacci = typeof fibonacci === \"number\";\n\n  const [count, setCount] = useCount();\n  const triggerPanelEvent = useTriggerPanelEvent();\n  const panelState = usePanelStatePartial(\"state\", {});\n  const panelData = usePanelStatePartial(\"data\", {}, true);\n\n  console.log(\">>>\", panelState, panelData);\n\n  return (\n    <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ p: 1, py: 3 }}>\n      <Typography color=\"secondary\">Count:</Typography>\n      <Typography>{count}</Typography>\n      {showFibonacci && (\n        <Stack direction=\"row\" spacing={1}>\n          <Typography color=\"secondary\">Fibonacci:</Typography>\n          <Typography>{fibonacci}</Typography>\n        </Stack>\n      )}\n      <Button onClick={() => setCount(count + 1)} variant=\"outlined\">\n        Increment\n      </Button>\n      <Button onClick={() => setCount(count - 1)} variant=\"outlined\">\n        Decrement\n      </Button>\n      <Button onClick={() => setCount(0)} variant=\"outlined\">\n        Reset\n      </Button>\n      <Button\n        variant=\"contained\"\n        onClick={() => {\n          triggerPanelEvent(calculate_fibonacci_event, { value: count });\n        }}\n      >\n        Re-calculate fibonacci\n      </Button>\n      <Button\n        variant=\"contained\"\n        onClick={() => {\n          triggerPanelEvent(save_count, { count });\n        }}\n      >\n        Save count\n      </Button>\n    </Stack>\n  );\n}\n\nfunction useCount() {\n  const [state, setState] = usePanelStatePartial(\"state\", {});\n\n  const setCount = useCallback(\n    (newCount: number) => {\n      setState((state) => ({ ...state, count: newCount }));\n    },\n    [setState]\n  );\n\n  return [state.count, setCount];\n}\n"],"names":["registerComponent","HybridCounter","PluginComponentType","props","data","schema","save_count","calculate_fibonacci_event","fibonacci","showFibonacci","count","setCount","useCount","triggerPanelEvent","useTriggerPanelEvent","panelState","usePanelStatePartial","panelData","Stack","Typography","Button","state","setState","useCallback","newCount"],"mappings":"gdAMAA,EAAAA,kBAAkB,CAChB,KAAM,yBACN,MAAO,yBACP,UAAWC,EACX,KAAMC,EAAoB,oBAAA,UAC1B,UAAW,IAAM,EACnB,CAAC,EAED,SAASD,EAAcE,EAAO,CACtB,KAAA,CAAE,KAAAC,EAAM,OAAAC,CAAW,EAAAF,EACnB,CAAE,WAAAG,EAAY,0BAAAC,GAA8BF,EAAO,KACnD,CAAE,UAAAG,CAAc,EAAAJ,EAChBK,EAAgB,OAAOD,GAAc,SAErC,CAACE,EAAOC,CAAQ,EAAIC,EAAS,EAC7BC,EAAoBC,EAAAA,uBACpBC,EAAaC,EAAAA,qBAAqB,QAAS,CAAE,CAAA,EAC7CC,EAAYD,EAAA,qBAAqB,OAAQ,GAAI,EAAI,EAE/C,eAAA,IAAI,MAAOD,EAAYE,CAAS,sBAGrCC,EAAAA,MAAM,CAAA,UAAU,MAAM,QAAS,EAAG,WAAW,SAAS,GAAI,CAAE,EAAG,EAAG,GAAI,CAAE,uBACtEC,aAAW,CAAA,MAAM,WAAY,EAAA,QAAM,EACnC,MAAA,cAAAA,EAAA,WAAA,KAAYT,CAAM,EAClBD,GACE,MAAA,cAAAS,EAAAA,MAAA,CAAM,UAAU,MAAM,QAAS,CAC9B,EAAA,MAAA,cAACC,EAAW,WAAA,CAAA,MAAM,aAAY,YAAU,EACvC,MAAA,cAAAA,EAAAA,WAAA,KAAYX,CAAU,CACzB,EAED,MAAA,cAAAY,EAAAA,OAAA,CAAO,QAAS,IAAMT,EAASD,EAAQ,CAAC,EAAG,QAAQ,UAAA,EAAW,WAE/D,sBACCU,EAAO,OAAA,CAAA,QAAS,IAAMT,EAASD,EAAQ,CAAC,EAAG,QAAQ,YAAW,WAE/D,EACA,MAAA,cAACU,EAAO,OAAA,CAAA,QAAS,IAAMT,EAAS,CAAC,EAAG,QAAQ,YAAW,OAEvD,EACA,MAAA,cAACS,EAAA,OAAA,CACC,QAAQ,YACR,QAAS,IAAM,CACbP,EAAkBN,EAA2B,CAAE,MAAOG,CAAO,CAAA,CAC/D,CAAA,EACD,wBAGD,EAAA,MAAA,cAACU,EAAA,OAAA,CACC,QAAQ,YACR,QAAS,IAAM,CACKP,EAAAP,EAAY,CAAE,MAAAI,CAAA,CAAO,CACzC,CAAA,EACD,YAAA,CAGH,CAEJ,CAEA,SAASE,GAAW,CAClB,KAAM,CAACS,EAAOC,CAAQ,EAAIN,EAAAA,qBAAqB,QAAS,CAAA,CAAE,EAEpDL,EAAWY,EAAA,YACdC,GAAqB,CACpBF,EAAUD,IAAW,CAAE,GAAGA,EAAO,MAAOG,CAAW,EAAA,CACrD,EACA,CAACF,CAAQ,CAAA,EAGJ,MAAA,CAACD,EAAM,MAAOV,CAAQ,CAC/B"}