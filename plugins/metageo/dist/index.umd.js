(function(De,Q){typeof exports=="object"&&typeof module<"u"?Q(require("@fiftyone/plugins"),require("@fiftyone/operators"),require("react"),require("@mui/material"),require("recoil")):typeof define=="function"&&define.amd?define(["@fiftyone/plugins","@fiftyone/operators","react","@mui/material","recoil"],Q):(De=typeof globalThis<"u"?globalThis:De||self,Q(De.__fop__,De.__foo__,De.React,De.__mui__,De.recoil))})(this,function(De,Q,n,a,pe){"use strict";function Ho(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const R=Ho(n);function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ee.apply(null,arguments)}function Ze(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function nr(e){if(R.isValidElement(e)||!Ze(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=nr(e[r])}),t}function Re(e,t,r={clone:!0}){const o=r.clone?ee({},e):e;return Ze(e)&&Ze(t)&&Object.keys(t).forEach(s=>{R.isValidElement(t[s])?o[s]=t[s]:Ze(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&Ze(e[s])?o[s]=Re(e[s],t[s],r):r.clone?o[s]=Ze(t[s])?nr(t[s]):t[s]:o[s]=t[s]}),o}function qo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ue(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}var rr={exports:{}},or={exports:{}},ne={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,v=e?Symbol.for("react.suspense_list"):60120,b=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,p=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,h=e?Symbol.for("react.scope"):60119;function M(T){return typeof T=="string"||typeof T=="function"||T===o||T===c||T===i||T===s||T===m||T===v||typeof T=="object"&&T!==null&&(T.$$typeof===x||T.$$typeof===b||T.$$typeof===l||T.$$typeof===d||T.$$typeof===f||T.$$typeof===y||T.$$typeof===_||T.$$typeof===h||T.$$typeof===p)}function E(T){if(typeof T=="object"&&T!==null){var We=T.$$typeof;switch(We){case t:var Fe=T.type;switch(Fe){case u:case c:case o:case i:case s:case m:return Fe;default:var ze=Fe&&Fe.$$typeof;switch(ze){case d:case f:case x:case b:case l:return ze;default:return We}}case r:return We}}}var P=u,$=c,C=d,F=l,k=t,D=f,A=o,O=x,S=b,w=r,N=i,j=s,z=m,Y=!1;function G(T){return Y||(Y=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),W(T)||E(T)===u}function W(T){return E(T)===c}function V(T){return E(T)===d}function K(T){return E(T)===l}function H(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function ve(T){return E(T)===f}function be(T){return E(T)===o}function _e(T){return E(T)===x}function Qe(T){return E(T)===b}function Ke(T){return E(T)===r}function Je(T){return E(T)===i}function Xe(T){return E(T)===s}function Dt(T){return E(T)===m}ne.AsyncMode=P,ne.ConcurrentMode=$,ne.ContextConsumer=C,ne.ContextProvider=F,ne.Element=k,ne.ForwardRef=D,ne.Fragment=A,ne.Lazy=O,ne.Memo=S,ne.Portal=w,ne.Profiler=N,ne.StrictMode=j,ne.Suspense=z,ne.isAsyncMode=G,ne.isConcurrentMode=W,ne.isContextConsumer=V,ne.isContextProvider=K,ne.isElement=H,ne.isForwardRef=ve,ne.isFragment=be,ne.isLazy=_e,ne.isMemo=Qe,ne.isPortal=Ke,ne.isProfiler=Je,ne.isStrictMode=Xe,ne.isSuspense=Dt,ne.isValidElementType=M,ne.typeOf=E})(),or.exports=ne;var ar=or.exports;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var sr=Object.getOwnPropertySymbols,Ko=Object.prototype.hasOwnProperty,Xo=Object.prototype.propertyIsEnumerable;function Qo(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Jo(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(o.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Zo=Jo()?Object.assign:function(e,t){for(var r,o=Qo(e),s,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var l in r)Ko.call(r,l)&&(o[l]=r[l]);if(sr){s=sr(r);for(var d=0;d<s.length;d++)Xo.call(r,s[d])&&(o[s[d]]=r[s[d]])}}return o},Ro="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ir=Ro,lr=Function.call.bind(Object.prototype.hasOwnProperty),yn=function(){};{var ea=ir,bn={},ta=lr;yn=function(e){var t="Warning: "+e;typeof console<"u"&&console.error(t);try{throw new Error(t)}catch{}}}function cr(e,t,r,o,s){for(var i in e)if(ta(e,i)){var l;try{if(typeof e[i]!="function"){var d=Error((o||"React class")+": "+r+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw d.name="Invariant Violation",d}l=e[i](t,i,o,r,null,ea)}catch(c){l=c}if(l&&!(l instanceof Error)&&yn((o||"React class")+": type specification of "+r+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in bn)){bn[l.message]=!0;var u=s?s():"";yn("Failed "+r+" type: "+l.message+(u??""))}}}cr.resetWarningCache=function(){bn={}};var na=cr,ra=ar,oa=Zo,et=ir,xn=lr,ur=na,tt=function(){};tt=function(e){var t="Warning: "+e;typeof console<"u"&&console.error(t);try{throw new Error(t)}catch{}};function Lt(){return null}var aa=function(e,t){var r=typeof Symbol=="function"&&Symbol.iterator,o="@@iterator";function s(S){var w=S&&(r&&S[r]||S[o]);if(typeof w=="function")return w}var i="<<anonymous>>",l={array:f("array"),bigint:f("bigint"),bool:f("boolean"),func:f("function"),number:f("number"),object:f("object"),string:f("string"),symbol:f("symbol"),any:m(),arrayOf:v,element:b(),elementType:x(),instanceOf:p,node:M(),objectOf:_,oneOf:y,oneOfType:h,shape:P,exact:$};function d(S,w){return S===w?S!==0||1/S===1/w:S!==S&&w!==w}function u(S,w){this.message=S,this.data=w&&typeof w=="object"?w:{},this.stack=""}u.prototype=Error.prototype;function c(S){var w={},N=0;function j(Y,G,W,V,K,H,ve){if(V=V||i,H=H||W,ve!==et){if(t){var be=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw be.name="Invariant Violation",be}else if(typeof console<"u"){var _e=V+":"+W;!w[_e]&&N<3&&(tt("You are manually calling a React.PropTypes validation function for the `"+H+"` prop on `"+V+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),w[_e]=!0,N++)}}return G[W]==null?Y?G[W]===null?new u("The "+K+" `"+H+"` is marked as required "+("in `"+V+"`, but its value is `null`.")):new u("The "+K+" `"+H+"` is marked as required in "+("`"+V+"`, but its value is `undefined`.")):null:S(G,W,V,K,H)}var z=j.bind(null,!1);return z.isRequired=j.bind(null,!0),z}function f(S){function w(N,j,z,Y,G,W){var V=N[j],K=k(V);if(K!==S){var H=D(V);return new u("Invalid "+Y+" `"+G+"` of type "+("`"+H+"` supplied to `"+z+"`, expected ")+("`"+S+"`."),{expectedType:S})}return null}return c(w)}function m(){return c(Lt)}function v(S){function w(N,j,z,Y,G){if(typeof S!="function")return new u("Property `"+G+"` of component `"+z+"` has invalid PropType notation inside arrayOf.");var W=N[j];if(!Array.isArray(W)){var V=k(W);return new u("Invalid "+Y+" `"+G+"` of type "+("`"+V+"` supplied to `"+z+"`, expected an array."))}for(var K=0;K<W.length;K++){var H=S(W,K,z,Y,G+"["+K+"]",et);if(H instanceof Error)return H}return null}return c(w)}function b(){function S(w,N,j,z,Y){var G=w[N];if(!e(G)){var W=k(G);return new u("Invalid "+z+" `"+Y+"` of type "+("`"+W+"` supplied to `"+j+"`, expected a single ReactElement."))}return null}return c(S)}function x(){function S(w,N,j,z,Y){var G=w[N];if(!ra.isValidElementType(G)){var W=k(G);return new u("Invalid "+z+" `"+Y+"` of type "+("`"+W+"` supplied to `"+j+"`, expected a single ReactElement type."))}return null}return c(S)}function p(S){function w(N,j,z,Y,G){if(!(N[j]instanceof S)){var W=S.name||i,V=O(N[j]);return new u("Invalid "+Y+" `"+G+"` of type "+("`"+V+"` supplied to `"+z+"`, expected ")+("instance of `"+W+"`."))}return null}return c(w)}function y(S){if(!Array.isArray(S))return arguments.length>1?tt("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):tt("Invalid argument supplied to oneOf, expected an array."),Lt;function w(N,j,z,Y,G){for(var W=N[j],V=0;V<S.length;V++)if(d(W,S[V]))return null;var K=JSON.stringify(S,function(ve,be){var _e=D(be);return _e==="symbol"?String(be):be});return new u("Invalid "+Y+" `"+G+"` of value `"+String(W)+"` "+("supplied to `"+z+"`, expected one of "+K+"."))}return c(w)}function _(S){function w(N,j,z,Y,G){if(typeof S!="function")return new u("Property `"+G+"` of component `"+z+"` has invalid PropType notation inside objectOf.");var W=N[j],V=k(W);if(V!=="object")return new u("Invalid "+Y+" `"+G+"` of type "+("`"+V+"` supplied to `"+z+"`, expected an object."));for(var K in W)if(xn(W,K)){var H=S(W,K,z,Y,G+"."+K,et);if(H instanceof Error)return H}return null}return c(w)}function h(S){if(!Array.isArray(S))return tt("Invalid argument supplied to oneOfType, expected an instance of array."),Lt;for(var w=0;w<S.length;w++){var N=S[w];if(typeof N!="function")return tt("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+A(N)+" at index "+w+"."),Lt}function j(z,Y,G,W,V){for(var K=[],H=0;H<S.length;H++){var ve=S[H],be=ve(z,Y,G,W,V,et);if(be==null)return null;be.data&&xn(be.data,"expectedType")&&K.push(be.data.expectedType)}var _e=K.length>0?", expected one of type ["+K.join(", ")+"]":"";return new u("Invalid "+W+" `"+V+"` supplied to "+("`"+G+"`"+_e+"."))}return c(j)}function M(){function S(w,N,j,z,Y){return C(w[N])?null:new u("Invalid "+z+" `"+Y+"` supplied to "+("`"+j+"`, expected a ReactNode."))}return c(S)}function E(S,w,N,j,z){return new u((S||"React class")+": "+w+" type `"+N+"."+j+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+z+"`.")}function P(S){function w(N,j,z,Y,G){var W=N[j],V=k(W);if(V!=="object")return new u("Invalid "+Y+" `"+G+"` of type `"+V+"` "+("supplied to `"+z+"`, expected `object`."));for(var K in S){var H=S[K];if(typeof H!="function")return E(z,Y,G,K,D(H));var ve=H(W,K,z,Y,G+"."+K,et);if(ve)return ve}return null}return c(w)}function $(S){function w(N,j,z,Y,G){var W=N[j],V=k(W);if(V!=="object")return new u("Invalid "+Y+" `"+G+"` of type `"+V+"` "+("supplied to `"+z+"`, expected `object`."));var K=oa({},N[j],S);for(var H in K){var ve=S[H];if(xn(S,H)&&typeof ve!="function")return E(z,Y,G,H,D(ve));if(!ve)return new u("Invalid "+Y+" `"+G+"` key `"+H+"` supplied to `"+z+"`.\nBad object: "+JSON.stringify(N[j],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(S),null,"  "));var be=ve(W,H,z,Y,G+"."+H,et);if(be)return be}return null}return c(w)}function C(S){switch(typeof S){case"number":case"string":case"undefined":return!0;case"boolean":return!S;case"object":if(Array.isArray(S))return S.every(C);if(S===null||e(S))return!0;var w=s(S);if(w){var N=w.call(S),j;if(w!==S.entries){for(;!(j=N.next()).done;)if(!C(j.value))return!1}else for(;!(j=N.next()).done;){var z=j.value;if(z&&!C(z[1]))return!1}}else return!1;return!0;default:return!1}}function F(S,w){return S==="symbol"?!0:w?w["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&w instanceof Symbol:!1}function k(S){var w=typeof S;return Array.isArray(S)?"array":S instanceof RegExp?"object":F(w,S)?"symbol":w}function D(S){if(typeof S>"u"||S===null)return""+S;var w=k(S);if(w==="object"){if(S instanceof Date)return"date";if(S instanceof RegExp)return"regexp"}return w}function A(S){var w=D(S);switch(w){case"array":case"object":return"an "+w;case"boolean":case"date":case"regexp":return"a "+w;default:return w}}function O(S){return!S.constructor||!S.constructor.name?i:S.constructor.name}return l.checkPropTypes=ur,l.resetWarningCache=ur.resetWarningCache,l.PropTypes=l,l};{var sa=ar,ia=!0;rr.exports=aa(sa.isElement,ia)}var la=rr.exports;const U=qo(la);function Nt(e){if(typeof e!="string")throw new Error("MUI: `capitalize(string)` expects a string argument.");return e.charAt(0).toUpperCase()+e.slice(1)}function ca(e,t,r=void 0){const o={};return Object.keys(e).forEach(s=>{o[s]=e[s].reduce((i,l)=>{if(l){const d=t(l);d!==""&&i.push(d),r&&r[l]&&i.push(r[l])}return i},[]).join(" ")}),o}const dr=e=>e,ua=(()=>{let e=dr;return{configure(t){e=t},generate(t){return e(t)},reset(){e=dr}}})(),da={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function vn(e,t,r="Mui"){const o=da[t];return o?`${r}-${o}`:`${ua.generate(e)}-${t}`}function pa(e,t,r="Mui"){const o={};return t.forEach(s=>{o[s]=vn(e,s,r)}),o}function Ye(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;r[o]=e[o]}return r}function pr(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=pr(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function fa(){for(var e,t,r=0,o="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=pr(e))&&(o&&(o+=" "),o+=t);return o}function En(e,t){const r=ee({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=ee({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},i=t[o];r[o]={},!i||!Object.keys(i)?r[o]=s:!s||!Object.keys(s)?r[o]=i:(r[o]=ee({},i),Object.keys(s).forEach(l=>{r[o][l]=En(s[l],i[l])}))}else r[o]===void 0&&(r[o]=e[o])}),r}var fr={exports:{}},jt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=n,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),x=Symbol.iterator,p="@@iterator";function y(g){if(g===null||typeof g!="object")return null;var I=x&&g[x]||g[p];return typeof I=="function"?I:null}var _=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function h(g){{for(var I=arguments.length,L=new Array(I>1?I-1:0),B=1;B<I;B++)L[B-1]=arguments[B];M("error",g,L)}}function M(g,I,L){{var B=_.ReactDebugCurrentFrame,te=B.getStackAddendum();te!==""&&(I+="%s",L=L.concat([te]));var se=L.map(function(X){return String(X)});se.unshift("Warning: "+I),Function.prototype.apply.call(console[g],console,se)}}var E=!1,P=!1,$=!1,C=!1,F=!1,k;k=Symbol.for("react.module.reference");function D(g){return!!(typeof g=="string"||typeof g=="function"||g===o||g===i||F||g===s||g===c||g===f||C||g===b||E||P||$||typeof g=="object"&&g!==null&&(g.$$typeof===v||g.$$typeof===m||g.$$typeof===l||g.$$typeof===d||g.$$typeof===u||g.$$typeof===k||g.getModuleId!==void 0))}function A(g,I,L){var B=g.displayName;if(B)return B;var te=I.displayName||I.name||"";return te!==""?L+"("+te+")":L}function O(g){return g.displayName||"Context"}function S(g){if(g==null)return null;if(typeof g.tag=="number"&&h("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case o:return"Fragment";case r:return"Portal";case i:return"Profiler";case s:return"StrictMode";case c:return"Suspense";case f:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case d:var I=g;return O(I)+".Consumer";case l:var L=g;return O(L._context)+".Provider";case u:return A(g,g.render,"ForwardRef");case m:var B=g.displayName||null;return B!==null?B:S(g.type)||"Memo";case v:{var te=g,se=te._payload,X=te._init;try{return S(X(se))}catch{return null}}}return null}var w=Object.assign,N=0,j,z,Y,G,W,V,K;function H(){}H.__reactDisabledLog=!0;function ve(){{if(N===0){j=console.log,z=console.info,Y=console.warn,G=console.error,W=console.group,V=console.groupCollapsed,K=console.groupEnd;var g={configurable:!0,enumerable:!0,value:H,writable:!0};Object.defineProperties(console,{info:g,log:g,warn:g,error:g,group:g,groupCollapsed:g,groupEnd:g})}N++}}function be(){{if(N--,N===0){var g={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:w({},g,{value:j}),info:w({},g,{value:z}),warn:w({},g,{value:Y}),error:w({},g,{value:G}),group:w({},g,{value:W}),groupCollapsed:w({},g,{value:V}),groupEnd:w({},g,{value:K})})}N<0&&h("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var _e=_.ReactCurrentDispatcher,Qe;function Ke(g,I,L){{if(Qe===void 0)try{throw Error()}catch(te){var B=te.stack.trim().match(/\n( *(at )?)/);Qe=B&&B[1]||""}return`
`+Qe+g}}var Je=!1,Xe;{var Dt=typeof WeakMap=="function"?WeakMap:Map;Xe=new Dt}function T(g,I){if(!g||Je)return"";{var L=Xe.get(g);if(L!==void 0)return L}var B;Je=!0;var te=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var se;se=_e.current,_e.current=null,ve();try{if(I){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(Ge){B=Ge}Reflect.construct(g,[],X)}else{try{X.call()}catch(Ge){B=Ge}g.call(X.prototype)}}else{try{throw Error()}catch(Ge){B=Ge}g()}}catch(Ge){if(Ge&&B&&typeof Ge.stack=="string"){for(var q=Ge.stack.split(`
`),Ce=B.stack.split(`
`),me=q.length-1,xe=Ce.length-1;me>=1&&xe>=0&&q[me]!==Ce[xe];)xe--;for(;me>=1&&xe>=0;me--,xe--)if(q[me]!==Ce[xe]){if(me!==1||xe!==1)do if(me--,xe--,xe<0||q[me]!==Ce[xe]){var $e=`
`+q[me].replace(" at new "," at ");return g.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",g.displayName)),typeof g=="function"&&Xe.set(g,$e),$e}while(me>=1&&xe>=0);break}}}finally{Je=!1,_e.current=se,be(),Error.prepareStackTrace=te}var bt=g?g.displayName||g.name:"",Vo=bt?Ke(bt):"";return typeof g=="function"&&Xe.set(g,Vo),Vo}function We(g,I,L){return T(g,!1)}function Fe(g){var I=g.prototype;return!!(I&&I.isReactComponent)}function ze(g,I,L){if(g==null)return"";if(typeof g=="function")return T(g,Fe(g));if(typeof g=="string")return Ke(g);switch(g){case c:return Ke("Suspense");case f:return Ke("SuspenseList")}if(typeof g=="object")switch(g.$$typeof){case u:return We(g.render);case m:return ze(g.type,I,L);case v:{var B=g,te=B._payload,se=B._init;try{return ze(se(te),I,L)}catch{}}}return""}var mn=Object.prototype.hasOwnProperty,Ao={},$o=_.ReactDebugCurrentFrame;function hn(g){if(g){var I=g._owner,L=ze(g.type,g._source,I?I.type:null);$o.setExtraStackFrame(L)}else $o.setExtraStackFrame(null)}function kc(g,I,L,B,te){{var se=Function.call.bind(mn);for(var X in g)if(se(g,X)){var q=void 0;try{if(typeof g[X]!="function"){var Ce=Error((B||"React class")+": "+L+" type `"+X+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof g[X]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ce.name="Invariant Violation",Ce}q=g[X](I,X,B,L,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(me){q=me}q&&!(q instanceof Error)&&(hn(te),h("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",B||"React class",L,X,typeof q),hn(null)),q instanceof Error&&!(q.message in Ao)&&(Ao[q.message]=!0,hn(te),h("Failed %s type: %s",L,q.message),hn(null))}}}var Pc=Array.isArray;function Zn(g){return Pc(g)}function Ac(g){{var I=typeof Symbol=="function"&&Symbol.toStringTag,L=I&&g[Symbol.toStringTag]||g.constructor.name||"Object";return L}}function $c(g){try{return Fo(g),!1}catch{return!0}}function Fo(g){return""+g}function Do(g){if($c(g))return h("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",Ac(g)),Fo(g)}var Lo=_.ReactCurrentOwner,Fc={key:!0,ref:!0,__self:!0,__source:!0},No,jo;function Dc(g){if(mn.call(g,"ref")){var I=Object.getOwnPropertyDescriptor(g,"ref").get;if(I&&I.isReactWarning)return!1}return g.ref!==void 0}function Lc(g){if(mn.call(g,"key")){var I=Object.getOwnPropertyDescriptor(g,"key").get;if(I&&I.isReactWarning)return!1}return g.key!==void 0}function Nc(g,I){typeof g.ref=="string"&&Lo.current}function jc(g,I){{var L=function(){No||(No=!0,h("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",I))};L.isReactWarning=!0,Object.defineProperty(g,"key",{get:L,configurable:!0})}}function zc(g,I){{var L=function(){jo||(jo=!0,h("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",I))};L.isReactWarning=!0,Object.defineProperty(g,"ref",{get:L,configurable:!0})}}var Bc=function(g,I,L,B,te,se,X){var q={$$typeof:t,type:g,key:I,ref:L,props:X,_owner:se};return q._store={},Object.defineProperty(q._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(q,"_self",{configurable:!1,enumerable:!1,writable:!1,value:B}),Object.defineProperty(q,"_source",{configurable:!1,enumerable:!1,writable:!1,value:te}),Object.freeze&&(Object.freeze(q.props),Object.freeze(q)),q};function Wc(g,I,L,B,te){{var se,X={},q=null,Ce=null;L!==void 0&&(Do(L),q=""+L),Lc(I)&&(Do(I.key),q=""+I.key),Dc(I)&&(Ce=I.ref,Nc(I,te));for(se in I)mn.call(I,se)&&!Fc.hasOwnProperty(se)&&(X[se]=I[se]);if(g&&g.defaultProps){var me=g.defaultProps;for(se in me)X[se]===void 0&&(X[se]=me[se])}if(q||Ce){var xe=typeof g=="function"?g.displayName||g.name||"Unknown":g;q&&jc(X,xe),Ce&&zc(X,xe)}return Bc(g,q,Ce,te,B,Lo.current,X)}}var Rn=_.ReactCurrentOwner,zo=_.ReactDebugCurrentFrame;function yt(g){if(g){var I=g._owner,L=ze(g.type,g._source,I?I.type:null);zo.setExtraStackFrame(L)}else zo.setExtraStackFrame(null)}var er;er=!1;function tr(g){return typeof g=="object"&&g!==null&&g.$$typeof===t}function Bo(){{if(Rn.current){var g=S(Rn.current.type);if(g)return`

Check the render method of \``+g+"`."}return""}}function Gc(g){return""}var Wo={};function Uc(g){{var I=Bo();if(!I){var L=typeof g=="string"?g:g.displayName||g.name;L&&(I=`

Check the top-level render call using <`+L+">.")}return I}}function Go(g,I){{if(!g._store||g._store.validated||g.key!=null)return;g._store.validated=!0;var L=Uc(I);if(Wo[L])return;Wo[L]=!0;var B="";g&&g._owner&&g._owner!==Rn.current&&(B=" It was passed a child from "+S(g._owner.type)+"."),yt(g),h('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',L,B),yt(null)}}function Uo(g,I){{if(typeof g!="object")return;if(Zn(g))for(var L=0;L<g.length;L++){var B=g[L];tr(B)&&Go(B,I)}else if(tr(g))g._store&&(g._store.validated=!0);else if(g){var te=y(g);if(typeof te=="function"&&te!==g.entries)for(var se=te.call(g),X;!(X=se.next()).done;)tr(X.value)&&Go(X.value,I)}}}function Yc(g){{var I=g.type;if(I==null||typeof I=="string")return;var L;if(typeof I=="function")L=I.propTypes;else if(typeof I=="object"&&(I.$$typeof===u||I.$$typeof===m))L=I.propTypes;else return;if(L){var B=S(I);kc(L,g.props,"prop",B,g)}else if(I.PropTypes!==void 0&&!er){er=!0;var te=S(I);h("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",te||"Unknown")}typeof I.getDefaultProps=="function"&&!I.getDefaultProps.isReactClassApproved&&h("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Vc(g){{for(var I=Object.keys(g.props),L=0;L<I.length;L++){var B=I[L];if(B!=="children"&&B!=="key"){yt(g),h("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",B),yt(null);break}}g.ref!==null&&(yt(g),h("Invalid attribute `ref` supplied to `React.Fragment`."),yt(null))}}function Yo(g,I,L,B,te,se){{var X=D(g);if(!X){var q="";(g===void 0||typeof g=="object"&&g!==null&&Object.keys(g).length===0)&&(q+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ce=Gc();Ce?q+=Ce:q+=Bo();var me;g===null?me="null":Zn(g)?me="array":g!==void 0&&g.$$typeof===t?(me="<"+(S(g.type)||"Unknown")+" />",q=" Did you accidentally export a JSX literal instead of a component?"):me=typeof g,h("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",me,q)}var xe=Wc(g,I,L,te,se);if(xe==null)return xe;if(X){var $e=I.children;if($e!==void 0)if(B)if(Zn($e)){for(var bt=0;bt<$e.length;bt++)Uo($e[bt],g);Object.freeze&&Object.freeze($e)}else h("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Uo($e,g)}return g===o?Vc(xe):Yc(xe),xe}}function Hc(g,I,L){return Yo(g,I,L,!0)}function qc(g,I,L){return Yo(g,I,L,!1)}var Kc=qc,Xc=Hc;jt.Fragment=o,jt.jsx=Kc,jt.jsxs=Xc})(),fr.exports=jt;var ie=fr.exports;const ga=R.createContext(void 0);U.node,U.object;function ma(e){const{theme:t,name:r,props:o}=e;if(!t||!t.components||!t.components[r])return o;const s=t.components[r];return s.defaultProps?En(s.defaultProps,o):!s.styleOverrides&&!s.variants?En(s,o):o}function ha({props:e,name:t}){const r=R.useContext(ga);return ma({props:e,name:t,theme:{components:r}})}U.node,U.object.isRequired;function ya(e){return ha(e)}var xt={},gr={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(gr);var mr=gr.exports,Sn={exports:{}},hr;function yr(){return hr||(hr=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var i in s)({}).hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Sn)),Sn.exports}var Cn={exports:{}},br;function ba(){return br||(br=1,function(e){function t(r,o){if(r==null)return{};var s={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(o.indexOf(i)!==-1)continue;s[i]=r[i]}return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Cn)),Cn.exports}function xa(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function va(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Ea=function(){function e(r){var o=this;this._insertTag=function(s){var i;o.tags.length===0?o.insertionPoint?i=o.insertionPoint.nextSibling:o.prepend?i=o.container.firstChild:i=o.before:i=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(s,i),o.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(va(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=xa(s);try{i.insertRule(o,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var s;return(s=o.parentNode)==null?void 0:s.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Se="-ms-",zt="-moz-",J="-webkit-",xr="comm",Tn="rule",_n="decl",Sa="@import",vr="@keyframes",Ca="@layer",Ta=Math.abs,Bt=String.fromCharCode,_a=Object.assign;function wa(e,t){return Ee(e,0)^45?(((t<<2^Ee(e,0))<<2^Ee(e,1))<<2^Ee(e,2))<<2^Ee(e,3):0}function Er(e){return e.trim()}function Ma(e,t){return(e=t.exec(e))?e[0]:e}function Z(e,t,r){return e.replace(t,r)}function wn(e,t){return e.indexOf(t)}function Ee(e,t){return e.charCodeAt(t)|0}function vt(e,t,r){return e.slice(t,r)}function Le(e){return e.length}function Mn(e){return e.length}function Wt(e,t){return t.push(e),e}function Oa(e,t){return e.map(t).join("")}var Gt=1,nt=1,Sr=0,Te=0,he=0,rt="";function Ut(e,t,r,o,s,i,l){return{value:e,root:t,parent:r,type:o,props:s,children:i,line:Gt,column:nt,length:l,return:""}}function Et(e,t){return _a(Ut("",null,null,"",null,null,0),e,{length:-e.length},t)}function Ia(){return he}function ka(){return he=Te>0?Ee(rt,--Te):0,nt--,he===10&&(nt=1,Gt--),he}function we(){return he=Te<Sr?Ee(rt,Te++):0,nt++,he===10&&(nt=1,Gt++),he}function Ne(){return Ee(rt,Te)}function Yt(){return Te}function St(e,t){return vt(rt,e,t)}function Ct(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Cr(e){return Gt=nt=1,Sr=Le(rt=e),Te=0,[]}function Tr(e){return rt="",e}function Vt(e){return Er(St(Te-1,On(e===91?e+2:e===40?e+1:e)))}function Pa(e){for(;(he=Ne())&&he<33;)we();return Ct(e)>2||Ct(he)>3?"":" "}function Aa(e,t){for(;--t&&we()&&!(he<48||he>102||he>57&&he<65||he>70&&he<97););return St(e,Yt()+(t<6&&Ne()==32&&we()==32))}function On(e){for(;we();)switch(he){case e:return Te;case 34:case 39:e!==34&&e!==39&&On(he);break;case 40:e===41&&On(e);break;case 92:we();break}return Te}function $a(e,t){for(;we()&&e+he!==57;)if(e+he===84&&Ne()===47)break;return"/*"+St(t,Te-1)+"*"+Bt(e===47?e:we())}function Fa(e){for(;!Ct(Ne());)we();return St(e,Te)}function Da(e){return Tr(Ht("",null,null,null,[""],e=Cr(e),0,[0],e))}function Ht(e,t,r,o,s,i,l,d,u){for(var c=0,f=0,m=l,v=0,b=0,x=0,p=1,y=1,_=1,h=0,M="",E=s,P=i,$=o,C=M;y;)switch(x=h,h=we()){case 40:if(x!=108&&Ee(C,m-1)==58){wn(C+=Z(Vt(h),"&","&\f"),"&\f")!=-1&&(_=-1);break}case 34:case 39:case 91:C+=Vt(h);break;case 9:case 10:case 13:case 32:C+=Pa(x);break;case 92:C+=Aa(Yt()-1,7);continue;case 47:switch(Ne()){case 42:case 47:Wt(La($a(we(),Yt()),t,r),u);break;default:C+="/"}break;case 123*p:d[c++]=Le(C)*_;case 125*p:case 59:case 0:switch(h){case 0:case 125:y=0;case 59+f:_==-1&&(C=Z(C,/\f/g,"")),b>0&&Le(C)-m&&Wt(b>32?wr(C+";",o,r,m-1):wr(Z(C," ","")+";",o,r,m-2),u);break;case 59:C+=";";default:if(Wt($=_r(C,t,r,c,f,s,d,M,E=[],P=[],m),i),h===123)if(f===0)Ht(C,t,$,$,E,i,m,d,P);else switch(v===99&&Ee(C,3)===110?100:v){case 100:case 108:case 109:case 115:Ht(e,$,$,o&&Wt(_r(e,$,$,0,0,s,d,M,s,E=[],m),P),s,P,m,d,o?E:P);break;default:Ht(C,$,$,$,[""],P,0,d,P)}}c=f=b=0,p=_=1,M=C="",m=l;break;case 58:m=1+Le(C),b=x;default:if(p<1){if(h==123)--p;else if(h==125&&p++==0&&ka()==125)continue}switch(C+=Bt(h),h*p){case 38:_=f>0?1:(C+="\f",-1);break;case 44:d[c++]=(Le(C)-1)*_,_=1;break;case 64:Ne()===45&&(C+=Vt(we())),v=Ne(),f=m=Le(M=C+=Fa(Yt())),h++;break;case 45:x===45&&Le(C)==2&&(p=0)}}return i}function _r(e,t,r,o,s,i,l,d,u,c,f){for(var m=s-1,v=s===0?i:[""],b=Mn(v),x=0,p=0,y=0;x<o;++x)for(var _=0,h=vt(e,m+1,m=Ta(p=l[x])),M=e;_<b;++_)(M=Er(p>0?v[_]+" "+h:Z(h,/&\f/g,v[_])))&&(u[y++]=M);return Ut(e,t,r,s===0?Tn:d,u,c,f)}function La(e,t,r){return Ut(e,t,r,xr,Bt(Ia()),vt(e,2,-2),0)}function wr(e,t,r,o){return Ut(e,t,r,_n,vt(e,0,o),vt(e,o+1,-1),o)}function ot(e,t){for(var r="",o=Mn(e),s=0;s<o;s++)r+=t(e[s],s,e,t)||"";return r}function Na(e,t,r,o){switch(e.type){case Ca:if(e.children.length)break;case Sa:case _n:return e.return=e.return||e.value;case xr:return"";case vr:return e.return=e.value+"{"+ot(e.children,o)+"}";case Tn:e.value=e.props.join(",")}return Le(r=ot(e.children,o))?e.return=e.value+"{"+r+"}":""}function ja(e){var t=Mn(e);return function(r,o,s,i){for(var l="",d=0;d<t;d++)l+=e[d](r,o,s,i)||"";return l}}function za(e){return function(t){t.root||(t=t.return)&&e(t)}}function Mr(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Ba=function(t,r,o){for(var s=0,i=0;s=i,i=Ne(),s===38&&i===12&&(r[o]=1),!Ct(i);)we();return St(t,Te)},Wa=function(t,r){var o=-1,s=44;do switch(Ct(s)){case 0:s===38&&Ne()===12&&(r[o]=1),t[o]+=Ba(Te-1,r,o);break;case 2:t[o]+=Vt(s);break;case 4:if(s===44){t[++o]=Ne()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=Bt(s)}while(s=we());return t},Ga=function(t,r){return Tr(Wa(Cr(t),r))},Or=new WeakMap,Ua=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,s=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!Or.get(o))&&!s){Or.set(t,!0);for(var i=[],l=Ga(r,i),d=o.props,u=0,c=0;u<l.length;u++)for(var f=0;f<d.length;f++,c++)t.props[c]=i[u]?l[u].replace(/&\f/g,d[f]):d[f]+" "+l[u]}}},Ya=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Ir(e,t){switch(wa(e,t)){case 5103:return J+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return J+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return J+e+zt+e+Se+e+e;case 6828:case 4268:return J+e+Se+e+e;case 6165:return J+e+Se+"flex-"+e+e;case 5187:return J+e+Z(e,/(\w+).+(:[^]+)/,J+"box-$1$2"+Se+"flex-$1$2")+e;case 5443:return J+e+Se+"flex-item-"+Z(e,/flex-|-self/,"")+e;case 4675:return J+e+Se+"flex-line-pack"+Z(e,/align-content|flex-|-self/,"")+e;case 5548:return J+e+Se+Z(e,"shrink","negative")+e;case 5292:return J+e+Se+Z(e,"basis","preferred-size")+e;case 6060:return J+"box-"+Z(e,"-grow","")+J+e+Se+Z(e,"grow","positive")+e;case 4554:return J+Z(e,/([^-])(transform)/g,"$1"+J+"$2")+e;case 6187:return Z(Z(Z(e,/(zoom-|grab)/,J+"$1"),/(image-set)/,J+"$1"),e,"")+e;case 5495:case 3959:return Z(e,/(image-set\([^]*)/,J+"$1$`$1");case 4968:return Z(Z(e,/(.+:)(flex-)?(.*)/,J+"box-pack:$3"+Se+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+J+e+e;case 4095:case 3583:case 4068:case 2532:return Z(e,/(.+)-inline(.+)/,J+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Le(e)-1-t>6)switch(Ee(e,t+1)){case 109:if(Ee(e,t+4)!==45)break;case 102:return Z(e,/(.+:)(.+)-([^]+)/,"$1"+J+"$2-$3$1"+zt+(Ee(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~wn(e,"stretch")?Ir(Z(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ee(e,t+1)!==115)break;case 6444:switch(Ee(e,Le(e)-3-(~wn(e,"!important")&&10))){case 107:return Z(e,":",":"+J)+e;case 101:return Z(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+J+(Ee(e,14)===45?"inline-":"")+"box$3$1"+J+"$2$3$1"+Se+"$2box$3")+e}break;case 5936:switch(Ee(e,t+11)){case 114:return J+e+Se+Z(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return J+e+Se+Z(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return J+e+Se+Z(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return J+e+Se+e+e}return e}var Va=function(t,r,o,s){if(t.length>-1&&!t.return)switch(t.type){case _n:t.return=Ir(t.value,t.length);break;case vr:return ot([Et(t,{value:Z(t.value,"@","@"+J)})],s);case Tn:if(t.length)return Oa(t.props,function(i){switch(Ma(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ot([Et(t,{props:[Z(i,/:(read-\w+)/,":"+zt+"$1")]})],s);case"::placeholder":return ot([Et(t,{props:[Z(i,/:(plac\w+)/,":"+J+"input-$1")]}),Et(t,{props:[Z(i,/:(plac\w+)/,":"+zt+"$1")]}),Et(t,{props:[Z(i,/:(plac\w+)/,Se+"input-$1")]})],s)}return""})}},Ha=[Va],kr=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(p){var y=p.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var s=t.stylisPlugins||Ha,i={},l,d=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(p){for(var y=p.getAttribute("data-emotion").split(" "),_=1;_<y.length;_++)i[y[_]]=!0;d.push(p)});var u,c=[Ua,Ya];{var f,m=[Na,za(function(p){f.insert(p)})],v=ja(c.concat(s,m)),b=function(y){return ot(Da(y),v)};u=function(y,_,h,M){f=h,b(y?y+"{"+_.styles+"}":_.styles),M&&(x.inserted[_.name]=!0)}}var x={key:r,sheet:new Ea({key:r,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:u};return x.sheet.hydrate(d),x},Pr={exports:{}},re={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,f=e?Symbol.for("react.forward_ref"):60112,m=e?Symbol.for("react.suspense"):60113,v=e?Symbol.for("react.suspense_list"):60120,b=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,p=e?Symbol.for("react.block"):60121,y=e?Symbol.for("react.fundamental"):60117,_=e?Symbol.for("react.responder"):60118,h=e?Symbol.for("react.scope"):60119;function M(T){return typeof T=="string"||typeof T=="function"||T===o||T===c||T===i||T===s||T===m||T===v||typeof T=="object"&&T!==null&&(T.$$typeof===x||T.$$typeof===b||T.$$typeof===l||T.$$typeof===d||T.$$typeof===f||T.$$typeof===y||T.$$typeof===_||T.$$typeof===h||T.$$typeof===p)}function E(T){if(typeof T=="object"&&T!==null){var We=T.$$typeof;switch(We){case t:var Fe=T.type;switch(Fe){case u:case c:case o:case i:case s:case m:return Fe;default:var ze=Fe&&Fe.$$typeof;switch(ze){case d:case f:case x:case b:case l:return ze;default:return We}}case r:return We}}}var P=u,$=c,C=d,F=l,k=t,D=f,A=o,O=x,S=b,w=r,N=i,j=s,z=m,Y=!1;function G(T){return Y||(Y=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),W(T)||E(T)===u}function W(T){return E(T)===c}function V(T){return E(T)===d}function K(T){return E(T)===l}function H(T){return typeof T=="object"&&T!==null&&T.$$typeof===t}function ve(T){return E(T)===f}function be(T){return E(T)===o}function _e(T){return E(T)===x}function Qe(T){return E(T)===b}function Ke(T){return E(T)===r}function Je(T){return E(T)===i}function Xe(T){return E(T)===s}function Dt(T){return E(T)===m}re.AsyncMode=P,re.ConcurrentMode=$,re.ContextConsumer=C,re.ContextProvider=F,re.Element=k,re.ForwardRef=D,re.Fragment=A,re.Lazy=O,re.Memo=S,re.Portal=w,re.Profiler=N,re.StrictMode=j,re.Suspense=z,re.isAsyncMode=G,re.isConcurrentMode=W,re.isContextConsumer=V,re.isContextProvider=K,re.isElement=H,re.isForwardRef=ve,re.isFragment=be,re.isLazy=_e,re.isMemo=Qe,re.isPortal=Ke,re.isProfiler=Je,re.isStrictMode=Xe,re.isSuspense=Dt,re.isValidElementType=M,re.typeOf=E})(),Pr.exports=re;var qa=Pr.exports,Ar=qa,Ka={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Xa={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},$r={};$r[Ar.ForwardRef]=Ka,$r[Ar.Memo]=Xa;var Qa=!0;function Fr(e,t,r){var o="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(o+=s+" ")}),o}var In=function(t,r,o){var s=t.key+"-"+r.name;(o===!1||Qa===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},kn=function(t,r,o){In(t,r,o);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+s:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function Ja(e){for(var t=0,r,o=0,s=e.length;s>=4;++o,s-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Za={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ra=/[A-Z]|^ms/g,es=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Dr=function(t){return t.charCodeAt(1)===45},Lr=function(t){return t!=null&&typeof t!="boolean"},Pn=Mr(function(e){return Dr(e)?e:e.replace(Ra,"-$&").toLowerCase()}),Nr=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(es,function(o,s,i){return je={name:s,styles:i,next:je},s})}return Za[t]!==1&&!Dr(t)&&typeof r=="number"&&r!==0?r+"px":r};function Tt(e,t,r){if(r==null)return"";var o=r;if(o.__emotion_styles!==void 0)return o;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return je={name:s.name,styles:s.styles,next:je},s.name;var i=r;if(i.styles!==void 0){var l=i.next;if(l!==void 0)for(;l!==void 0;)je={name:l.name,styles:l.styles,next:je},l=l.next;var d=i.styles+";";return d}return ts(e,t,r)}case"function":{if(e!==void 0){var u=je,c=r(e);return je=u,Tt(e,t,c)}break}}var f=r;if(t==null)return f;var m=t[f];return m!==void 0?m:f}function ts(e,t,r){var o="";if(Array.isArray(r))for(var s=0;s<r.length;s++)o+=Tt(e,t,r[s])+";";else for(var i in r){var l=r[i];if(typeof l!="object"){var d=l;t!=null&&t[d]!==void 0?o+=i+"{"+t[d]+"}":Lr(d)&&(o+=Pn(i)+":"+Nr(i,d)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var u=0;u<l.length;u++)Lr(l[u])&&(o+=Pn(i)+":"+Nr(i,l[u])+";");else{var c=Tt(e,t,l);switch(i){case"animation":case"animationName":{o+=Pn(i)+":"+c+";";break}default:o+=i+"{"+c+"}"}}}return o}var jr=/label:\s*([^\s;{]+)\s*(;|$)/g,je;function _t(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,s="";je=void 0;var i=e[0];if(i==null||i.raw===void 0)o=!1,s+=Tt(r,t,i);else{var l=i;s+=l[0]}for(var d=1;d<e.length;d++)if(s+=Tt(r,t,e[d]),o){var u=i;s+=u[d]}jr.lastIndex=0;for(var c="",f;(f=jr.exec(s))!==null;)c+="-"+f[1];var m=Ja(s)+c;return{name:m,styles:s,next:je}}var ns=function(t){return t()},zr=R.useInsertionEffect?R.useInsertionEffect:!1,Br=zr||ns,Wr=zr||R.useLayoutEffect,Gr=R.createContext(typeof HTMLElement<"u"?kr({key:"css"}):null),rs=Gr.Provider,An=function(t){return n.forwardRef(function(r,o){var s=n.useContext(Gr);return t(r,s,o)})},qt=R.createContext({}),$n={}.hasOwnProperty,Fn="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",os=function(t,r){var o={};for(var s in r)$n.call(r,s)&&(o[s]=r[s]);return o[Fn]=t,o},as=function(t){var r=t.cache,o=t.serialized,s=t.isStringTag;return In(r,o,s),Br(function(){return kn(r,o,s)}),null},ss=An(function(e,t,r){var o=e.css;typeof o=="string"&&t.registered[o]!==void 0&&(o=t.registered[o]);var s=e[Fn],i=[o],l="";typeof e.className=="string"?l=Fr(t.registered,i,e.className):e.className!=null&&(l=e.className+" ");var d=_t(i,void 0,R.useContext(qt));l+=t.key+"-"+d.name;var u={};for(var c in e)$n.call(e,c)&&c!=="css"&&c!==Fn&&(u[c]=e[c]);return u.className=l,r&&(u.ref=r),R.createElement(R.Fragment,null,R.createElement(as,{cache:t,serialized:d,isStringTag:typeof s=="string"}),R.createElement(s,u))}),is=ss;yr();var Ur=function(t,r){var o=arguments;if(r==null||!$n.call(r,"css"))return R.createElement.apply(void 0,o);var s=o.length,i=new Array(s);i[0]=is,i[1]=os(t,r);for(var l=2;l<s;l++)i[l]=o[l];return R.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Ur||(Ur={}));var ls=An(function(e,t){var r=e.styles,o=_t([r],void 0,R.useContext(qt)),s=R.useRef();return Wr(function(){var i=t.key+"-global",l=new t.sheet.constructor({key:i,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),d=!1,u=document.querySelector('style[data-emotion="'+i+" "+o.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),u!==null&&(d=!0,u.setAttribute("data-emotion",i),l.hydrate([u])),s.current=[l,d],function(){l.flush()}},[t]),Wr(function(){var i=s.current,l=i[0],d=i[1];if(d){i[1]=!1;return}if(o.next!==void 0&&kn(t,o.next,!0),l.tags.length){var u=l.tags[l.tags.length-1].nextElementSibling;l.before=u,l.flush()}t.insert("",o,l,!1)},[t,o.name]),null});function Yr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _t(t)}function cs(){var e=Yr.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var us=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ds=Mr(function(e){return us.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),ps=ds,fs=function(t){return t!=="theme"},Vr=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?ps:fs},Hr=function(t,r,o){var s;if(r){var i=r.shouldForwardProp;s=t.__emotion_forwardProp&&i?function(l){return t.__emotion_forwardProp(l)&&i(l)}:i}return typeof s!="function"&&o&&(s=t.__emotion_forwardProp),s},gs=function(t){var r=t.cache,o=t.serialized,s=t.isStringTag;return In(r,o,s),Br(function(){return kn(r,o,s)}),null},ms=function e(t,r){var o=t.__emotion_real===t,s=o&&t.__emotion_base||t,i,l;r!==void 0&&(i=r.label,l=r.target);var d=Hr(t,r,o),u=d||Vr(s),c=!u("as");return function(){var f=arguments,m=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&m.push("label:"+i+";"),f[0]==null||f[0].raw===void 0)m.push.apply(m,f);else{var v=f[0];m.push(v[0]);for(var b=f.length,x=1;x<b;x++)m.push(f[x],v[x])}var p=An(function(y,_,h){var M=c&&y.as||s,E="",P=[],$=y;if(y.theme==null){$={};for(var C in y)$[C]=y[C];$.theme=R.useContext(qt)}typeof y.className=="string"?E=Fr(_.registered,P,y.className):y.className!=null&&(E=y.className+" ");var F=_t(m.concat(P),_.registered,$);E+=_.key+"-"+F.name,l!==void 0&&(E+=" "+l);var k=c&&d===void 0?Vr(M):u,D={};for(var A in y)c&&A==="as"||k(A)&&(D[A]=y[A]);return D.className=E,h&&(D.ref=h),R.createElement(R.Fragment,null,R.createElement(gs,{cache:_,serialized:F,isStringTag:typeof M=="string"}),R.createElement(M,D))});return p.displayName=i!==void 0?i:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",p.defaultProps=t.defaultProps,p.__emotion_real=p,p.__emotion_base=s,p.__emotion_styles=m,p.__emotion_forwardProp=d,Object.defineProperty(p,"toString",{value:function(){return"."+l}}),p.withComponent=function(y,_){var h=e(y,ee({},r,_,{shouldForwardProp:Hr(p,_,!0)}));return h.apply(void 0,m)},p}},hs=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Dn=ms.bind(null);hs.forEach(function(e){Dn[e]=Dn(e)});function ys(e,t){const r=kr({key:"css",prepend:e});if(t){const o=r.insert;r.insert=(...s)=>(s[1].styles.match(/^@layer\s+[^{]*$/)||(s[1].styles=`@layer mui {${s[1].styles}}`),o(...s))}return r}const Ln=new Map;function qr(e){const{injectFirst:t,enableCssLayer:r,children:o}=e,s=R.useMemo(()=>{const i=`${t}-${r}`;if(typeof document=="object"&&Ln.has(i))return Ln.get(i);const l=ys(t,r);return Ln.set(i,l),l},[t,r]);return t||r?ie.jsx(rs,{value:s,children:o}):o}qr.propTypes={children:U.node,enableCssLayer:U.bool,injectFirst:U.bool};function bs(e){return e==null||Object.keys(e).length===0}function Kr(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?s=>t(bs(s)?r:s):t;return ie.jsx(ls,{styles:o})}Kr.propTypes={defaultTheme:U.object,styles:U.oneOfType([U.array,U.string,U.object,U.func])};function xs(e,t){const r=Dn(e,t);return(...o)=>{const s=typeof e=="string"?`"${e}"`:"component";return o.length===0?console.error([`MUI: Seems like you called \`styled(${s})()\` without a \`style\` argument.`,'You must provide a `styles` argument: `styled("div")(styleYouForgotToPass)`.'].join(`
`)):o.some(i=>i===void 0)&&console.error(`MUI: the styled(${s})(...args) API requires all its args to be defined.`),r(...o)}}const vs=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},Xr=[];function Es(e){return Xr[0]=e,_t(Xr)}const Ss=Ue(Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Kr,StyledEngineProvider:qr,ThemeContext:qt,css:Yr,default:xs,internal_processStyles:vs,internal_serializeStyles:Es,keyframes:cs},Symbol.toStringTag,{value:"Module"})));function Ve(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Qr(e){if(R.isValidElement(e)||!Ve(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Qr(e[r])}),t}function wt(e,t,r={clone:!0}){const o=r.clone?ee({},e):e;return Ve(e)&&Ve(t)&&Object.keys(t).forEach(s=>{R.isValidElement(t[s])?o[s]=t[s]:Ve(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&Ve(e[s])?o[s]=wt(e[s],t[s],r):r.clone?o[s]=Ve(t[s])?Qr(t[s]):t[s]:o[s]=t[s]}),o}const Cs=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:wt,isPlainObject:Ve},Symbol.toStringTag,{value:"Module"})));function Ts(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const _s=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"}));function Nn(e){if(typeof e!="string")throw new Error("MUI: `capitalize(string)` expects a string argument.");return e.charAt(0).toUpperCase()+e.slice(1)}const ws=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"})));var Jr={exports:{}},oe={};/**
 * @license React
 * react-is.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){function e(p){if(typeof p=="object"&&p!==null){var y=p.$$typeof;switch(y){case t:switch(p=p.type,p){case o:case i:case s:case c:case f:case b:return p;default:switch(p=p&&p.$$typeof,p){case d:case u:case v:case m:return p;case l:return p;default:return y}}case r:return y}}}var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");oe.ContextConsumer=l,oe.ContextProvider=d,oe.Element=t,oe.ForwardRef=u,oe.Fragment=o,oe.Lazy=v,oe.Memo=m,oe.Portal=r,oe.Profiler=i,oe.StrictMode=s,oe.Suspense=c,oe.SuspenseList=f,oe.isContextConsumer=function(p){return e(p)===l},oe.isContextProvider=function(p){return e(p)===d},oe.isElement=function(p){return typeof p=="object"&&p!==null&&p.$$typeof===t},oe.isForwardRef=function(p){return e(p)===u},oe.isFragment=function(p){return e(p)===o},oe.isLazy=function(p){return e(p)===v},oe.isMemo=function(p){return e(p)===m},oe.isPortal=function(p){return e(p)===r},oe.isProfiler=function(p){return e(p)===i},oe.isStrictMode=function(p){return e(p)===s},oe.isSuspense=function(p){return e(p)===c},oe.isSuspenseList=function(p){return e(p)===f},oe.isValidElementType=function(p){return typeof p=="string"||typeof p=="function"||p===o||p===i||p===s||p===c||p===f||typeof p=="object"&&p!==null&&(p.$$typeof===v||p.$$typeof===m||p.$$typeof===d||p.$$typeof===l||p.$$typeof===u||p.$$typeof===x||p.getModuleId!==void 0)},oe.typeOf=e})(),Jr.exports=oe;var Zr=Jr.exports;const Ms=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function Rr(e){const t=`${e}`.match(Ms);return t&&t[1]||""}function eo(e,t=""){return e.displayName||e.name||Rr(e)||t}function to(e,t,r){const o=eo(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function Os(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return eo(e,"Component");if(typeof e=="object")switch(e.$$typeof){case Zr.ForwardRef:return to(e,e.render,"ForwardRef");case Zr.Memo:return to(e,e.type,"memo");default:return}}}const Is=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:Os,getFunctionName:Rr},Symbol.toStringTag,{value:"Module"}))),ks=["values","unit","step"],Ps=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>ee({},r,{[o.key]:o.val}),{})};function no(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,s=Ye(e,ks),i=Ps(t),l=Object.keys(i);function d(v){return`@media (min-width:${typeof t[v]=="number"?t[v]:v}${r})`}function u(v){return`@media (max-width:${(typeof t[v]=="number"?t[v]:v)-o/100}${r})`}function c(v,b){const x=l.indexOf(b);return`@media (min-width:${typeof t[v]=="number"?t[v]:v}${r}) and (max-width:${(x!==-1&&typeof t[l[x]]=="number"?t[l[x]]:b)-o/100}${r})`}function f(v){return l.indexOf(v)+1<l.length?c(v,l[l.indexOf(v)+1]):d(v)}function m(v){const b=l.indexOf(v);return b===0?d(l[1]):b===l.length-1?u(l[b]):c(v,l[l.indexOf(v)+1]).replace("@media","@media not all and")}return ee({keys:l,values:i,up:d,down:u,between:c,only:f,not:m,unit:r},s)}const As={borderRadius:4},He=U.oneOfType([U.number,U.string,U.object,U.array]);function Mt(e,t){return t?wt(e,t,{clone:!1}):e}const jn={xs:0,sm:600,md:900,lg:1200,xl:1536},ro={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${jn[e]}px)`};function Be(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const i=o.breakpoints||ro;return t.reduce((l,d,u)=>(l[i.up(i.keys[u])]=r(t[u]),l),{})}if(typeof t=="object"){const i=o.breakpoints||ro;return Object.keys(t).reduce((l,d)=>{if(Object.keys(i.values||jn).indexOf(d)!==-1){const u=i.up(d);l[u]=r(t[d],d)}else{const u=d;l[u]=t[u]}return l},{})}return r(t)}function $s(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,s)=>{const i=e.up(s);return o[i]={},o},{}))||{}}function oo(e,t){return e.reduce((r,o)=>{const s=r[o];return(!s||Object.keys(s).length===0)&&delete r[o],r},t)}function Kt(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((s,i)=>s&&s[i]?s[i]:null,e);if(o!=null)return o}return t.split(".").reduce((o,s)=>o&&o[s]!=null?o[s]:null,e)}function Xt(e,t,r,o=r){let s;return typeof e=="function"?s=e(r):Array.isArray(e)?s=e[r]||o:s=Kt(e,r)||o,t&&(s=t(s,o,e)),s}function fe(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:s}=e,i=l=>{if(l[t]==null)return null;const d=l[t],u=l.theme,c=Kt(u,o)||{};return Be(l,d,m=>{let v=Xt(c,s,m);return m===v&&typeof m=="string"&&(v=Xt(c,s,`${t}${m==="default"?"":Nn(m)}`,m)),r===!1?v:{[r]:v}})};return i.propTypes={[t]:He},i.filterProps=[t],i}function Fs(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const Ds={m:"margin",p:"padding"},Ls={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},ao={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},Ns=Fs(e=>{if(e.length>2)if(ao[e])e=ao[e];else return[e];const[t,r]=e.split(""),o=Ds[t],s=Ls[r]||"";return Array.isArray(s)?s.map(i=>o+i):[o+s]}),Qt=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Jt=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],js=[...Qt,...Jt];function Ot(e,t,r,o){var s;const i=(s=Kt(e,t,!1))!=null?s:r;return typeof i=="number"?l=>typeof l=="string"?l:(typeof l!="number"&&console.error(`MUI: Expected ${o} argument to be a number or a string, got ${l}.`),i*l):Array.isArray(i)?l=>typeof l=="string"?l:(Number.isInteger(l)?l>i.length-1&&console.error([`MUI: The value provided (${l}) overflows.`,`The supported values are: ${JSON.stringify(i)}.`,`${l} > ${i.length-1}, you need to add the missing values.`].join(`
`)):console.error([`MUI: The \`theme.${t}\` array type cannot be combined with non integer values.You should either use an integer value that can be used as index, or define the \`theme.${t}\` as a number.`].join(`
`)),i[l]):typeof i=="function"?i:(console.error([`MUI: The \`theme.${t}\` value (${i}) is invalid.`,"It should be a number, an array or a function."].join(`
`)),()=>{})}function so(e){return Ot(e,"spacing",8,"spacing")}function It(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function zs(e,t){return r=>e.reduce((o,s)=>(o[s]=It(t,r),o),{})}function Bs(e,t,r,o){if(t.indexOf(r)===-1)return null;const s=Ns(r),i=zs(s,o),l=e[r];return Be(e,l,i)}function io(e,t){const r=so(e.theme);return Object.keys(e).map(o=>Bs(e,t,o,r)).reduce(Mt,{})}function ue(e){return io(e,Qt)}ue.propTypes=Qt.reduce((e,t)=>(e[t]=He,e),{}),ue.filterProps=Qt;function de(e){return io(e,Jt)}de.propTypes=Jt.reduce((e,t)=>(e[t]=He,e),{}),de.filterProps=Jt,js.reduce((e,t)=>(e[t]=He,e),{});function Ws(e=8){if(e.mui)return e;const t=so({spacing:e}),r=(...o)=>(o.length<=4||console.error(`MUI: Too many arguments provided, expected between 0 and 4, got ${o.length}`),(o.length===0?[1]:o).map(i=>{const l=t(i);return typeof l=="number"?`${l}px`:l}).join(" "));return r.mui=!0,r}function Zt(...e){const t=e.reduce((o,s)=>(s.filterProps.forEach(i=>{o[i]=s}),o),{}),r=o=>Object.keys(o).reduce((s,i)=>t[i]?Mt(s,t[i](o)):s,{});return r.propTypes=e.reduce((o,s)=>Object.assign(o,s.propTypes),{}),r.filterProps=e.reduce((o,s)=>o.concat(s.filterProps),[]),r}function Ie(e){return typeof e!="number"?e:`${e}px solid`}function ke(e,t){return fe({prop:e,themeKey:"borders",transform:t})}const Gs=ke("border",Ie),Us=ke("borderTop",Ie),Ys=ke("borderRight",Ie),Vs=ke("borderBottom",Ie),Hs=ke("borderLeft",Ie),qs=ke("borderColor"),Ks=ke("borderTopColor"),Xs=ke("borderRightColor"),Qs=ke("borderBottomColor"),Js=ke("borderLeftColor"),Zs=ke("outline",Ie),Rs=ke("outlineColor"),Rt=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Ot(e.theme,"shape.borderRadius",4,"borderRadius"),r=o=>({borderRadius:It(t,o)});return Be(e,e.borderRadius,r)}return null};Rt.propTypes={borderRadius:He},Rt.filterProps=["borderRadius"],Zt(Gs,Us,Ys,Vs,Hs,qs,Ks,Xs,Qs,Js,Rt,Zs,Rs);const en=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Ot(e.theme,"spacing",8,"gap"),r=o=>({gap:It(t,o)});return Be(e,e.gap,r)}return null};en.propTypes={gap:He},en.filterProps=["gap"];const tn=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Ot(e.theme,"spacing",8,"columnGap"),r=o=>({columnGap:It(t,o)});return Be(e,e.columnGap,r)}return null};tn.propTypes={columnGap:He},tn.filterProps=["columnGap"];const nn=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Ot(e.theme,"spacing",8,"rowGap"),r=o=>({rowGap:It(t,o)});return Be(e,e.rowGap,r)}return null};nn.propTypes={rowGap:He},nn.filterProps=["rowGap"];const ei=fe({prop:"gridColumn"}),ti=fe({prop:"gridRow"}),ni=fe({prop:"gridAutoFlow"}),ri=fe({prop:"gridAutoColumns"}),oi=fe({prop:"gridAutoRows"}),ai=fe({prop:"gridTemplateColumns"}),si=fe({prop:"gridTemplateRows"}),ii=fe({prop:"gridTemplateAreas"}),li=fe({prop:"gridArea"});Zt(en,tn,nn,ei,ti,ni,ri,oi,ai,si,ii,li);function at(e,t){return t==="grey"?t:e}const ci=fe({prop:"color",themeKey:"palette",transform:at}),ui=fe({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:at}),di=fe({prop:"backgroundColor",themeKey:"palette",transform:at});Zt(ci,ui,di);function Me(e){return e<=1&&e!==0?`${e*100}%`:e}const pi=fe({prop:"width",transform:Me}),zn=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,s;const i=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||jn[r];return i?((s=e.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Me(r)}};return Be(e,e.maxWidth,t)}return null};zn.filterProps=["maxWidth"];const fi=fe({prop:"minWidth",transform:Me}),gi=fe({prop:"height",transform:Me}),mi=fe({prop:"maxHeight",transform:Me}),hi=fe({prop:"minHeight",transform:Me});fe({prop:"size",cssProperty:"width",transform:Me}),fe({prop:"size",cssProperty:"height",transform:Me});const yi=fe({prop:"boxSizing"});Zt(pi,zn,fi,gi,mi,hi,yi);const kt={border:{themeKey:"borders",transform:Ie},borderTop:{themeKey:"borders",transform:Ie},borderRight:{themeKey:"borders",transform:Ie},borderBottom:{themeKey:"borders",transform:Ie},borderLeft:{themeKey:"borders",transform:Ie},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ie},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Rt},color:{themeKey:"palette",transform:at},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:at},backgroundColor:{themeKey:"palette",transform:at},p:{style:de},pt:{style:de},pr:{style:de},pb:{style:de},pl:{style:de},px:{style:de},py:{style:de},padding:{style:de},paddingTop:{style:de},paddingRight:{style:de},paddingBottom:{style:de},paddingLeft:{style:de},paddingX:{style:de},paddingY:{style:de},paddingInline:{style:de},paddingInlineStart:{style:de},paddingInlineEnd:{style:de},paddingBlock:{style:de},paddingBlockStart:{style:de},paddingBlockEnd:{style:de},m:{style:ue},mt:{style:ue},mr:{style:ue},mb:{style:ue},ml:{style:ue},mx:{style:ue},my:{style:ue},margin:{style:ue},marginTop:{style:ue},marginRight:{style:ue},marginBottom:{style:ue},marginLeft:{style:ue},marginX:{style:ue},marginY:{style:ue},marginInline:{style:ue},marginInlineStart:{style:ue},marginInlineEnd:{style:ue},marginBlock:{style:ue},marginBlockStart:{style:ue},marginBlockEnd:{style:ue},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:en},rowGap:{style:nn},columnGap:{style:tn},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Me},maxWidth:{style:zn},minWidth:{transform:Me},height:{transform:Me},maxHeight:{transform:Me},minHeight:{transform:Me},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function bi(...e){const t=e.reduce((o,s)=>o.concat(Object.keys(s)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function xi(e,t){return typeof e=="function"?e(t):e}function lo(){function e(r,o,s,i){const l={[r]:o,theme:s},d=i[r];if(!d)return{[r]:o};const{cssProperty:u=r,themeKey:c,transform:f,style:m}=d;if(o==null)return null;if(c==="typography"&&o==="inherit")return{[r]:o};const v=Kt(s,c)||{};return m?m(l):Be(l,o,x=>{let p=Xt(v,f,x);return x===p&&typeof x=="string"&&(p=Xt(v,f,`${r}${x==="default"?"":Nn(x)}`,x)),u===!1?p:{[u]:p}})}function t(r){var o;const{sx:s,theme:i={},nested:l}=r||{};if(!s)return null;const d=(o=i.unstable_sxConfig)!=null?o:kt;function u(c){let f=c;if(typeof c=="function")f=c(i);else if(typeof c!="object")return c;if(!f)return null;const m=$s(i.breakpoints),v=Object.keys(m);let b=m;return Object.keys(f).forEach(x=>{const p=xi(f[x],i);if(p!=null)if(typeof p=="object")if(d[x])b=Mt(b,e(x,p,i,d));else{const y=Be({theme:i},p,_=>({[x]:_}));bi(y,p)?b[x]=t({sx:p,theme:i,nested:!0}):b=Mt(b,y)}else b=Mt(b,e(x,p,i,d))}),!l&&i.modularCssLayers?{"@layer sx":oo(v,b)}:oo(v,b)}return Array.isArray(s)?s.map(u):u(s)}return t}const rn=lo();rn.filterProps=["sx"];function co(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const vi=["breakpoints","palette","spacing","shape"];function uo(e={},...t){const{breakpoints:r={},palette:o={},spacing:s,shape:i={}}=e,l=Ye(e,vi),d=no(r),u=Ws(s);let c=wt({breakpoints:d,direction:"ltr",components:{},palette:ee({mode:"light"},o),spacing:u,shape:ee({},As,i)},l);return c.applyStyles=co,c=t.reduce((f,m)=>wt(f,m),c),c.unstable_sxConfig=ee({},kt,l==null?void 0:l.unstable_sxConfig),c.unstable_sx=function(m){return rn({sx:m,theme:this})},c}const Ei=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:uo,private_createBreakpoints:no,unstable_applyStyles:co},Symbol.toStringTag,{value:"Module"}))),Si=["sx"],Ci=e=>{var t,r;const o={systemProps:{},otherProps:{}},s=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:kt;return Object.keys(e).forEach(i=>{s[i]?o.systemProps[i]=e[i]:o.otherProps[i]=e[i]}),o};function Ti(e){const{sx:t}=e,r=Ye(e,Si),{systemProps:o,otherProps:s}=Ci(r);let i;return Array.isArray(t)?i=[o,...t]:typeof t=="function"?i=(...l)=>{const d=t(...l);return Ve(d)?ee({},o,d):o}:i=ee({},o,t),ee({},s,{sx:i})}const _i=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:rn,extendSxProp:Ti,unstable_createStyleFunctionSx:lo,unstable_defaultSxConfig:kt},Symbol.toStringTag,{value:"Module"})));var st=mr;Object.defineProperty(xt,"__esModule",{value:!0});var wi=xt.default=Bi;xt.shouldForwardProp=an,xt.systemDefaultTheme=void 0;var Pe=st(yr()),Bn=st(ba()),on=Di(Ss),Mi=Cs,Oi=st(ws),Ii=st(Is),ki=st(Ei),Pi=st(_i);const Ai=["ownerState"],$i=["variants"],Fi=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function po(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(po=function(o){return o?r:t})(e)}function Di(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=po(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var l=s?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}function Li(e){return Object.keys(e).length===0}function Ni(e){return typeof e=="string"&&e.charCodeAt(0)>96}function an(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function fo(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}const ji=xt.systemDefaultTheme=(0,ki.default)(),go=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function sn({defaultTheme:e,theme:t,themeId:r}){return Li(t)?e:t[r]||t}function zi(e){return e?(t,r)=>r[e]:null}function ln(e,t,r){let{ownerState:o}=t,s=(0,Bn.default)(t,Ai);const i=typeof e=="function"?e((0,Pe.default)({ownerState:o},s)):e;if(Array.isArray(i))return i.flatMap(l=>ln(l,(0,Pe.default)({ownerState:o},s),r));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:l=[]}=i;let u=(0,Bn.default)(i,$i);return l.forEach(c=>{let f=!0;if(typeof c.props=="function"?f=c.props((0,Pe.default)({ownerState:o},s,o)):Object.keys(c.props).forEach(m=>{(o==null?void 0:o[m])!==c.props[m]&&s[m]!==c.props[m]&&(f=!1)}),f){Array.isArray(u)||(u=[u]);const m=typeof c.style=="function"?c.style((0,Pe.default)({ownerState:o},s,o)):c.style;u.push(r?fo((0,on.internal_serializeStyles)(m),r):m)}}),u}return r?fo((0,on.internal_serializeStyles)(i),r):i}function Bi(e={}){const{themeId:t,defaultTheme:r=ji,rootShouldForwardProp:o=an,slotShouldForwardProp:s=an}=e,i=l=>(0,Pi.default)((0,Pe.default)({},l,{theme:sn((0,Pe.default)({},l,{defaultTheme:r,themeId:t}))}));return i.__mui_systemSx=!0,(l,d={})=>{(0,on.internal_processStyles)(l,$=>$.filter(C=>!(C!=null&&C.__mui_systemSx)));const{name:u,slot:c,skipVariantsResolver:f,skipSx:m,overridesResolver:v=zi(go(c))}=d,b=(0,Bn.default)(d,Fi),x=u&&u.startsWith("Mui")||c?"components":"custom",p=f!==void 0?f:c&&c!=="Root"&&c!=="root"||!1,y=m||!1;let _;u&&(_=`${u}-${go(c||"Root")}`);let h=an;c==="Root"||c==="root"?h=o:c?h=s:Ni(l)&&(h=void 0);const M=(0,on.default)(l,(0,Pe.default)({shouldForwardProp:h,label:_},b)),E=$=>typeof $=="function"&&$.__emotion_real!==$||(0,Mi.isPlainObject)($)?C=>{const F=sn({theme:C.theme,defaultTheme:r,themeId:t});return ln($,(0,Pe.default)({},C,{theme:F}),F.modularCssLayers?x:void 0)}:$,P=($,...C)=>{let F=E($);const k=C?C.map(E):[];u&&v&&k.push(O=>{const S=sn((0,Pe.default)({},O,{defaultTheme:r,themeId:t}));if(!S.components||!S.components[u]||!S.components[u].styleOverrides)return null;const w=S.components[u].styleOverrides,N={};return Object.entries(w).forEach(([j,z])=>{N[j]=ln(z,(0,Pe.default)({},O,{theme:S}),S.modularCssLayers?"theme":void 0)}),v(O,N)}),u&&!p&&k.push(O=>{var S;const w=sn((0,Pe.default)({},O,{defaultTheme:r,themeId:t})),N=w==null||(S=w.components)==null||(S=S[u])==null?void 0:S.variants;return ln({variants:N},(0,Pe.default)({},O,{theme:w}),w.modularCssLayers?"theme":void 0)}),y||k.push(i);const D=k.length-C.length;if(Array.isArray($)&&D>0){const O=new Array(D).fill("");F=[...$,...O],F.raw=[...$.raw,...O]}const A=M(F,...k);{let O;u&&(O=`${u}${(0,Oi.default)(c||"")}`),O===void 0&&(O=`Styled(${(0,Ii.default)(l)})`),A.displayName=O}return l.muiName&&(A.muiName=l.muiName),A};return M.withConfig&&(P.withConfig=M.withConfig),P}}function Wi(e,t){return ee({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var ge={};const Gi=Ue(_s);function Ui(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const Yi=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:Ui},Symbol.toStringTag,{value:"Module"})));var mo=mr;Object.defineProperty(ge,"__esModule",{value:!0}),ge.alpha=vo,ge.blend=nl,ge.colorChannel=void 0;var Vi=ge.darken=Gn;ge.decomposeColor=Ae,ge.emphasize=Eo;var ho=ge.getContrastRatio=Ji;ge.getLuminance=cn,ge.hexToRgb=yo,ge.hslToRgb=xo;var Hi=ge.lighten=Un;ge.private_safeAlpha=Zi,ge.private_safeColorChannel=void 0,ge.private_safeDarken=Ri,ge.private_safeEmphasize=tl,ge.private_safeLighten=el,ge.recomposeColor=it,ge.rgbToHex=Qi,mo(Gi);var qi=mo(Yi);function Wn(e,t=0,r=1){return(e<t||e>r)&&console.error(`MUI: The value provided ${e} is out of range [${t}, ${r}].`),(0,qi.default)(e,t,r)}function yo(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,s)=>s<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function Ki(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Ae(e){if(e.type)return e;if(e.charAt(0)==="#")return Ae(yo(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(`MUI: Unsupported \`${e}\` color.
The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().`);let o=e.substring(t+1,e.length-1),s;if(r==="color"){if(o=o.split(" "),s=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error(`MUI: unsupported \`${s}\` color space.
The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else o=o.split(",");return o=o.map(i=>parseFloat(i)),{type:r,values:o,colorSpace:s}}const bo=e=>{const t=Ae(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};ge.colorChannel=bo;const Xi=(e,t)=>{try{return bo(e)}catch{return t&&console.warn(t),e}};ge.private_safeColorChannel=Xi;function it(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((s,i)=>i<3?parseInt(s,10):s):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function Qi(e){if(e.indexOf("#")===0)return e;const{values:t}=Ae(e);return`#${t.map((r,o)=>Ki(o===3?Math.round(255*r):r)).join("")}`}function xo(e){e=Ae(e);const{values:t}=e,r=t[0],o=t[1]/100,s=t[2]/100,i=o*Math.min(s,1-s),l=(c,f=(c+r/30)%12)=>s-i*Math.max(Math.min(f-3,9-f,1),-1);let d="rgb";const u=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(d+="a",u.push(t[3])),it({type:d,values:u})}function cn(e){e=Ae(e);let t=e.type==="hsl"||e.type==="hsla"?Ae(xo(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Ji(e,t){const r=cn(e),o=cn(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function vo(e,t){return e=Ae(e),t=Wn(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,it(e)}function Zi(e,t,r){try{return vo(e,t)}catch{return r&&console.warn(r),e}}function Gn(e,t){if(e=Ae(e),t=Wn(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return it(e)}function Ri(e,t,r){try{return Gn(e,t)}catch{return r&&console.warn(r),e}}function Un(e,t){if(e=Ae(e),t=Wn(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return it(e)}function el(e,t,r){try{return Un(e,t)}catch{return r&&console.warn(r),e}}function Eo(e,t=.15){return cn(e)>.5?Gn(e,t):Un(e,t)}function tl(e,t,r){try{return Eo(e,t)}catch{return r&&console.warn(r),e}}function nl(e,t,r,o=1){const s=(u,c)=>Math.round((u**(1/o)*(1-r)+c**(1/o)*r)**o),i=Ae(e),l=Ae(t),d=[s(i.values[0],l.values[0]),s(i.values[1],l.values[1]),s(i.values[2],l.values[2])];return it({type:"rgb",values:d})}const Pt={black:"#000",white:"#fff"},rl={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},lt={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},ct={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},At={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},ut={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},dt={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},pt={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},ol=["mode","contrastThreshold","tonalOffset"],So={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Pt.white,default:Pt.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Yn={text:{primary:Pt.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Pt.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Co(e,t,r,o){const s=o.light||o,i=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=Hi(e.main,s):t==="dark"&&(e.dark=Vi(e.main,i)))}function al(e="light"){return e==="dark"?{main:ut[200],light:ut[50],dark:ut[400]}:{main:ut[700],light:ut[400],dark:ut[800]}}function sl(e="light"){return e==="dark"?{main:lt[200],light:lt[50],dark:lt[400]}:{main:lt[500],light:lt[300],dark:lt[700]}}function il(e="light"){return e==="dark"?{main:ct[500],light:ct[300],dark:ct[700]}:{main:ct[700],light:ct[400],dark:ct[800]}}function ll(e="light"){return e==="dark"?{main:dt[400],light:dt[300],dark:dt[700]}:{main:dt[700],light:dt[500],dark:dt[900]}}function cl(e="light"){return e==="dark"?{main:pt[400],light:pt[300],dark:pt[700]}:{main:pt[800],light:pt[500],dark:pt[900]}}function ul(e="light"){return e==="dark"?{main:At[400],light:At[300],dark:At[700]}:{main:"#ed6c02",light:At[500],dark:At[900]}}function dl(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,s=Ye(e,ol),i=e.primary||al(t),l=e.secondary||sl(t),d=e.error||il(t),u=e.info||ll(t),c=e.success||cl(t),f=e.warning||ul(t);function m(p){const y=ho(p,Yn.text.primary)>=r?Yn.text.primary:So.text.primary;{const _=ho(p,y);_<3&&console.error([`MUI: The contrast ratio of ${_}:1 for ${y} on ${p}`,"falls below the WCAG recommended absolute minimum contrast ratio of 3:1.","https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast"].join(`
`))}return y}const v=({color:p,name:y,mainShade:_=500,lightShade:h=300,darkShade:M=700})=>{if(p=ee({},p),!p.main&&p[_]&&(p.main=p[_]),!p.hasOwnProperty("main"))throw new Error(`MUI: The color${y?` (${y})`:""} provided to augmentColor(color) is invalid.
The color object needs to have a \`main\` property or a \`${_}\` property.`);if(typeof p.main!="string")throw new Error(`MUI: The color${y?` (${y})`:""} provided to augmentColor(color) is invalid.
\`color.main\` should be a string, but \`${JSON.stringify(p.main)}\` was provided instead.

Did you intend to use one of the following approaches?

import { green } from "@mui/material/colors";

const theme1 = createTheme({ palette: {
  primary: green,
} });

const theme2 = createTheme({ palette: {
  primary: { main: green[500] },
} });`);return Co(p,"light",h,o),Co(p,"dark",M,o),p.contrastText||(p.contrastText=m(p.main)),p},b={dark:Yn,light:So};return b[t]||console.error(`MUI: The palette mode \`${t}\` is not supported.`),Re(ee({common:ee({},Pt),mode:t,primary:v({color:i,name:"primary"}),secondary:v({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:v({color:d,name:"error"}),warning:v({color:f,name:"warning"}),info:v({color:u,name:"info"}),success:v({color:c,name:"success"}),grey:rl,contrastThreshold:r,getContrastText:m,augmentColor:v,tonalOffset:o},b[t]),s)}const pl=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function fl(e){return Math.round(e*1e5)/1e5}const To={textTransform:"uppercase"},_o='"Roboto", "Helvetica", "Arial", sans-serif';function gl(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=_o,fontSize:s=14,fontWeightLight:i=300,fontWeightRegular:l=400,fontWeightMedium:d=500,fontWeightBold:u=700,htmlFontSize:c=16,allVariants:f,pxToRem:m}=r,v=Ye(r,pl);typeof s!="number"&&console.error("MUI: `fontSize` is required to be a number."),typeof c!="number"&&console.error("MUI: `htmlFontSize` is required to be a number.");const b=s/14,x=m||(_=>`${_/c*b}rem`),p=(_,h,M,E,P)=>ee({fontFamily:o,fontWeight:_,fontSize:x(h),lineHeight:M},o===_o?{letterSpacing:`${fl(E/h)}em`}:{},P,f),y={h1:p(i,96,1.167,-1.5),h2:p(i,60,1.2,-.5),h3:p(l,48,1.167,0),h4:p(l,34,1.235,.25),h5:p(l,24,1.334,0),h6:p(d,20,1.6,.15),subtitle1:p(l,16,1.75,.15),subtitle2:p(d,14,1.57,.1),body1:p(l,16,1.5,.15),body2:p(l,14,1.43,.15),button:p(d,14,1.75,.4,To),caption:p(l,12,1.66,.4),overline:p(l,12,2.66,1,To),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Re(ee({htmlFontSize:c,pxToRem:x,fontFamily:o,fontSize:s,fontWeightLight:i,fontWeightRegular:l,fontWeightMedium:d,fontWeightBold:u},y),v,{clone:!1})}const ml=.2,hl=.14,yl=.12;function le(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${ml})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${hl})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${yl})`].join(",")}const bl=["none",le(0,2,1,-1,0,1,1,0,0,1,3,0),le(0,3,1,-2,0,2,2,0,0,1,5,0),le(0,3,3,-2,0,3,4,0,0,1,8,0),le(0,2,4,-1,0,4,5,0,0,1,10,0),le(0,3,5,-1,0,5,8,0,0,1,14,0),le(0,3,5,-1,0,6,10,0,0,1,18,0),le(0,4,5,-2,0,7,10,1,0,2,16,1),le(0,5,5,-3,0,8,10,1,0,3,14,2),le(0,5,6,-3,0,9,12,1,0,3,16,2),le(0,6,6,-3,0,10,14,1,0,4,18,3),le(0,6,7,-4,0,11,15,1,0,4,20,3),le(0,7,8,-4,0,12,17,2,0,5,22,4),le(0,7,8,-4,0,13,19,2,0,5,24,4),le(0,7,9,-4,0,14,21,2,0,5,26,4),le(0,8,9,-5,0,15,22,2,0,6,28,5),le(0,8,10,-5,0,16,24,2,0,6,30,5),le(0,8,11,-5,0,17,26,2,0,6,32,5),le(0,9,11,-5,0,18,28,2,0,7,34,6),le(0,9,12,-6,0,19,29,2,0,7,36,6),le(0,10,13,-6,0,20,31,3,0,8,38,7),le(0,10,13,-6,0,21,33,3,0,8,40,7),le(0,10,14,-6,0,22,35,3,0,8,42,7),le(0,11,14,-7,0,23,36,3,0,9,44,8),le(0,11,15,-7,0,24,38,3,0,9,46,8)],xl=["duration","easing","delay"],vl={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},El={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function wo(e){return`${Math.round(e)}ms`}function Sl(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Cl(e){const t=ee({},vl,e.easing),r=ee({},El,e.duration);return ee({getAutoHeightDuration:Sl,create:(s=["all"],i={})=>{const{duration:l=r.standard,easing:d=t.easeInOut,delay:u=0}=i,c=Ye(i,xl);{const f=v=>typeof v=="string",m=v=>!isNaN(parseFloat(v));!f(s)&&!Array.isArray(s)&&console.error('MUI: Argument "props" must be a string or Array.'),!m(l)&&!f(l)&&console.error(`MUI: Argument "duration" must be a number or a string but found ${l}.`),f(d)||console.error('MUI: Argument "easing" must be a string.'),!m(u)&&!f(u)&&console.error('MUI: Argument "delay" must be a number or a string.'),typeof i!="object"&&console.error(["MUI: Secong argument of transition.create must be an object.","Arguments should be either `create('prop1', options)` or `create(['prop1', 'prop2'], options)`"].join(`
`)),Object.keys(c).length!==0&&console.error(`MUI: Unrecognized argument(s) [${Object.keys(c).join(",")}].`)}return(Array.isArray(s)?s:[s]).map(f=>`${f} ${typeof l=="string"?l:wo(l)} ${d} ${typeof u=="string"?u:wo(u)}`).join(",")}},e,{easing:t,duration:r})}const Tl={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},_l=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function wl(e={},...t){const{mixins:r={},palette:o={},transitions:s={},typography:i={}}=e,l=Ye(e,_l);if(e.vars&&e.generateCssVars===void 0)throw new Error("MUI: `vars` is a private field used for CSS variables support.\nPlease use another name.");const d=dl(o),u=uo(e);let c=Re(u,{mixins:Wi(u.breakpoints,r),palette:d,shadows:bl.slice(),typography:gl(d,i),transitions:Cl(s),zIndex:ee({},Tl)});c=Re(c,l),c=t.reduce((f,m)=>Re(f,m),c);{const f=["active","checked","completed","disabled","error","expanded","focused","focusVisible","required","selected"],m=(v,b)=>{let x;for(x in v){const p=v[x];if(f.indexOf(x)!==-1&&Object.keys(p).length>0){{const y=vn("",x);console.error([`MUI: The \`${b}\` component increases the CSS specificity of the \`${x}\` internal state.`,"You can not override it like this: ",JSON.stringify(v,null,2),"",`Instead, you need to use the '&.${y}' syntax:`,JSON.stringify({root:{[`&.${y}`]:p}},null,2),"","https://mui.com/r/state-classes-guide"].join(`
`))}v[x]={}}}};Object.keys(c.components).forEach(v=>{const b=c.components[v].styleOverrides;b&&v.indexOf("Mui")===0&&m(b,v)})}return c.unstable_sxConfig=ee({},kt,l==null?void 0:l.unstable_sxConfig),c.unstable_sx=function(m){return rn({sx:m,theme:this})},c}const Ml=wl(),Ol="$$material";function Il(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const kl=wi({themeId:Ol,defaultTheme:Ml,rootShouldForwardProp:e=>Il(e)&&e!=="classes"});function Pl(e){return vn("MuiSvgIcon",e)}pa("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Al=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],$l=e=>{const{color:t,fontSize:r,classes:o}=e,s={root:["root",t!=="inherit"&&`color${Nt(t)}`,`fontSize${Nt(r)}`]};return ca(s,Pl,o)},Fl=kl("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Nt(r.color)}`],t[`fontSize${Nt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,s,i,l,d,u,c,f,m,v,b,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(s=e.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((i=e.typography)==null||(l=i.pxToRem)==null?void 0:l.call(i,20))||"1.25rem",medium:((d=e.typography)==null||(u=d.pxToRem)==null?void 0:u.call(d,24))||"1.5rem",large:((c=e.typography)==null||(f=c.pxToRem)==null?void 0:f.call(c,35))||"2.1875rem"}[t.fontSize],color:(m=(v=(e.vars||e).palette)==null||(v=v[t.color])==null?void 0:v.main)!=null?m:{action:(b=(e.vars||e).palette)==null||(b=b.action)==null?void 0:b.active,disabled:(x=(e.vars||e).palette)==null||(x=x.action)==null?void 0:x.disabled,inherit:void 0}[t.color]}}),un=R.forwardRef(function(t,r){const o=ya({props:t,name:"MuiSvgIcon"}),{children:s,className:i,color:l="inherit",component:d="svg",fontSize:u="medium",htmlColor:c,inheritViewBox:f=!1,titleAccess:m,viewBox:v="0 0 24 24"}=o,b=Ye(o,Al),x=R.isValidElement(s)&&s.type==="svg",p=ee({},o,{color:l,component:d,fontSize:u,instanceFontSize:t.fontSize,inheritViewBox:f,viewBox:v,hasSvgAsChild:x}),y={};f||(y.viewBox=v);const _=$l(p);return ie.jsxs(Fl,ee({as:d,className:fa(_.root,i),focusable:"false",color:c,"aria-hidden":m?void 0:!0,role:m?"img":void 0,ref:r},y,b,x&&s.props,{ownerState:p,children:[x?s.props.children:s,m?ie.jsx("title",{children:m}):null]}))});un.propTypes={children:U.node,classes:U.object,className:U.string,color:U.oneOfType([U.oneOf(["inherit","action","disabled","primary","secondary","error","info","success","warning"]),U.string]),component:U.elementType,fontSize:U.oneOfType([U.oneOf(["inherit","large","medium","small"]),U.string]),htmlColor:U.string,inheritViewBox:U.bool,shapeRendering:U.string,sx:U.oneOfType([U.arrayOf(U.oneOfType([U.func,U.object,U.bool])),U.func,U.object]),titleAccess:U.string,viewBox:U.string},un.muiName="SvgIcon";function ye(e,t){function r(o,s){return ie.jsx(un,ee({"data-testid":`${t}Icon`,ref:s},o,{children:e}))}return r.displayName=`${t}Icon`,r.muiName=un.muiName,R.memo(R.forwardRef(r))}const Vn=ye(ie.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),dn=ye(ie.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics"),Dl=ye(ie.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),Ll=ye(ie.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),pn=ye(ie.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Mo=ye(ie.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),Nl=ye(ie.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),jl=ye(ie.jsx("path",{d:"M4 7v2c0 .55-.45 1-1 1H2v4h1c.55 0 1 .45 1 1v2c0 1.65 1.35 3 3 3h3v-2H7c-.55 0-1-.45-1-1v-2c0-1.3-.84-2.42-2-2.83v-.34C5.16 11.42 6 10.3 6 9V7c0-.55.45-1 1-1h3V4H7C5.35 4 4 5.35 4 7m17 3c-.55 0-1-.45-1-1V7c0-1.65-1.35-3-3-3h-3v2h3c.55 0 1 .45 1 1v2c0 1.3.84 2.42 2 2.83v.34c-1.16.41-2 1.52-2 2.83v2c0 .55-.45 1-1 1h-3v2h3c1.65 0 3-1.35 3-3v-2c0-.55.45-1 1-1h1v-4z"}),"DataObject"),qe=ye(ie.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),Oo=ye(ie.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Io=ye(ie.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),fn=ye(ie.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Hn=ye(ie.jsx("path",{d:"M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m2.19 12.19L6 18l3.81-8.19L18 6z"}),"Explore"),zl=ye(ie.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"}),"GridOn"),ko=ye(ie.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),gn=ye(ie.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),Bl=ye(ie.jsx("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),Wl=ye(ie.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),ft=ye(ie.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),Po=ye(ie.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),$t={INDEXING_STATE:"metageo/indexingState",FLOW_STATE:"metageo/flowState",MAPPING_CONFIG:"metageo/mappingConfig"};function qn(e,t){try{const r=localStorage.getItem(e);return r===null?t:JSON.parse(r)}catch(r){return console.warn(`Failed to parse stored data for key ${e}:`,r),t}}function Gl(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn(`Failed to store data for key ${e}:`,r)}}function Ul(e){try{localStorage.removeItem(e)}catch(t){console.warn(`Failed to remove data for key ${e}:`,t)}}function Yl(){return qn($t.INDEXING_STATE,null)}function Kn(){return qn($t.FLOW_STATE,null)}function Vl(e){Gl($t.FLOW_STATE,e)}function Xn(){Ul($t.FLOW_STATE)}function Hl(){return qn($t.MAPPING_CONFIG,null)}const gt=Kn(),ql=pe.atom({key:"metageo/activeStep",default:(gt==null?void 0:gt.activeStep)??0}),Kl=pe.atom({key:"metageo/hasStarted",default:(gt==null?void 0:gt.hasStarted)??!1});pe.atom({key:"metageo/geoFields",default:[]}),pe.atom({key:"metageo/osmTags",default:[]});const Xl={bbox:null,gridTiles:16,location:"",gridCells:[],executionMode:"immediate",indexingStatus:"idle",quadtreeCells:[],realSampleDistribution:{}},mt=pe.atom({key:"metageo/indexing",default:Yl()||Xl});function ce(e,t,r){return async(o={})=>new Promise((s,i)=>{e(t,{operator:r,params:o,callback:l=>{l!=null&&l.error?i(new Error(l.error)):s(l)}})})}function Oe(){console.log("🔍 useMetageoClient: Hook starting...");const e=Q.usePanelEvent();return console.log("🔍 useMetageoClient: handleEvent =",e),n.useMemo(()=>({define_area_auto:ce(e,"define_area_auto","@voxel51/metageo/metageo_panel#define_area_auto"),calculate_sample_distribution:ce(e,"calculate_sample_distribution","@voxel51/metageo/metageo_panel#get_sample_distribution"),index_grid:ce(e,"index_grid","@voxel51/metageo/index_grid"),start_indexing:ce(e,"start_indexing","@voxel51/metageo/metageo_panel#start_indexing"),watch_indexing:ce(e,"watch_indexing","@voxel51/metageo/watch_indexing"),get_current_indexing_state:ce(e,"get_current_indexing_state","@voxel51/metageo/metageo_panel#get_current_indexing_state"),drop_index:ce(e,"drop_index","@voxel51/metageo/metageo_panel#drop_index"),get_available_osm_tags:ce(e,"get_available_osm_tags","@voxel51/metageo/metageo_panel#get_available_osm_tags"),get_field_mappings:ce(e,"get_field_mappings","@voxel51/metageo/metageo_panel#get_field_mappings"),save_mapping_config:ce(e,"save_mapping_config","@voxel51/metageo/metageo_panel#save_mapping_config"),get_mapping_config:ce(e,"get_mapping_config","@voxel51/metageo/metageo_panel#get_mapping_config"),clear_mapping_config:ce(e,"clear_mapping_config","@voxel51/metageo/metageo_panel#clear_mapping_config"),clear_enrichment_data:ce(e,"clear_enrichment_data","@voxel51/metageo/metageo_panel#clear_enrichment_data"),enrich_dataset_async:ce(e,"enrich_dataset_async","@voxel51/metageo/metageo_panel#enrich_dataset_async"),get_enrichment_status:ce(e,"get_enrichment_status","@voxel51/metageo/metageo_panel#get_enrichment_status"),get_geo_fields:ce(e,"get_geo_fields","@voxel51/metageo/metageo_panel#get_geo_fields"),get_dataset_info:ce(e,"get_dataset_info","@voxel51/metageo/metageo_panel#get_dataset_info"),get_sample_geo_points:ce(e,"get_sample_geo_points","@voxel51/metageo/metageo_panel#get_sample_geo_points"),get_cell_data:ce(e,"get_cell_data","@voxel51/metageo/metageo_panel#get_cell_data"),cancel_indexing:ce(e,"cancel_indexing","@voxel51/metageo/metageo_panel#cancel_indexing"),reset_metageo:ce(e,"reset_metageo","@voxel51/metageo/metageo_panel#reset_metageo"),watch_enrichment:ce(e,"watch_enrichment","@voxel51/metageo/watch_enrichment_progress"),cancel_enrichment:ce(e,"cancel_enrichment","@voxel51/metageo/metageo_panel#cancel_enrichment")}),[e])}const Ql={geoField:"",useYamlConfig:!1,yamlConfig:"",globalDistanceThreshold:100,enable3DDetections:!1,threeDSlice:"",detectionFieldName:"",detectionLabelTag:"",detectionRadius:100,enableSampleTagging:!1,tagSlice:"",tagMappings:[],enableFieldMapping:!1,fieldMappings:[],includeAllTagsAsMetadata:!1,metadataFieldName:"osm_metadata",metadataDistanceThreshold:100},Jl=pe.atom({key:"metageo/mapping",default:Hl()||Ql});function ht(){console.log("🔍 useMappingConfig: Hook starting...");const e=Oe(),[t,r]=n.useState(!1);let o,s;try{[o,s]=pe.useRecoilState(Jl)}catch(c){return console.error("🔍 useMappingConfig: Error accessing atom:",c),{state:{geoField:"",useYamlConfig:!1,yamlConfig:"",globalDistanceThreshold:100,enable3DDetections:!1,threeDSlice:"",detectionFieldName:"",detectionLabelTag:"",detectionRadius:100,enableSampleTagging:!1,tagSlice:"",tagMappings:[],enableFieldMapping:!1,fieldMappings:[],includeAllTagsAsMetadata:!1,metadataFieldName:"osm_metadata",metadataDistanceThreshold:100},actions:{setDetectionRadius:()=>{},setGeoField:()=>{},setUseYamlConfig:()=>{},setYamlConfig:()=>{},setEnable3DDetections:()=>{},setThreeDSlice:()=>{},setDetectionFieldName:()=>{},setDetectionLabelTag:()=>{},setEnableSampleTagging:()=>{},setTagSlice:()=>{},setTagRadius:()=>{},setRenderOn3D:()=>{},setRenderOn2D:()=>{},setEnableFieldMapping:()=>{},addTagMapping:()=>{},removeTagMapping:()=>{},updateTagMapping:()=>{},addFieldMapping:()=>{},removeFieldMapping:()=>{},updateFieldMapping:()=>{},setIncludeAllTagsAsMetadata:()=>{},setMetadataFieldName:()=>{},setGlobalDistanceThreshold:()=>{},setMetadataDistanceThreshold:()=>{},clearMappingConfig:()=>Promise.resolve(),resetMapping:()=>{}}}}console.log("🔍 useMappingConfig: mappingConfig =",o),console.log("🔍 useMappingConfig: mappingConfig.tagMappings =",o==null?void 0:o.tagMappings),console.log("🔍 useMappingConfig: mappingConfig.fieldMappings =",o==null?void 0:o.fieldMappings);const i=n.useCallback(async c=>{if(!(!e||!t))try{console.log("🔍 useMappingConfig: Auto-saving mapping config:",c),await e.save_mapping_config({mapping_config:c})}catch(f){console.error("🔍 useMappingConfig: Error auto-saving mapping config:",f)}},[e,t]),l=n.useCallback(async()=>{var c;if(!(!e||t))try{console.log("🔍 useMappingConfig: Loading mapping config from backend");const f=await e.get_mapping_config();((c=f==null?void 0:f.result)==null?void 0:c.status)==="success"&&f.result.mapping_config&&(console.log("🔍 useMappingConfig: Loaded mapping config:",f.result.mapping_config),s(f.result.mapping_config))}catch(f){console.error("🔍 useMappingConfig: Error loading mapping config:",f)}finally{r(!0)}},[e,t,s]);n.useEffect(()=>{l()},[]),n.useEffect(()=>{t&&o&&i(o)},[o,t]);const d=n.useMemo(()=>({setDetectionRadius:c=>{s(f=>({...f,detectionRadius:c}))},setGeoField:c=>{s(f=>({...f,geoField:c}))},setUseYamlConfig:c=>{s(f=>({...f,useYamlConfig:c}))},setYamlConfig:c=>{s(f=>({...f,yamlConfig:c}))},setEnable3DDetections:c=>{s(f=>({...f,enable3DDetections:c}))},setThreeDSlice:c=>{s(f=>({...f,threeDSlice:c}))},setDetectionFieldName:c=>{s(f=>({...f,detectionFieldName:c}))},setDetectionLabelTag:c=>{s(f=>({...f,detectionLabelTag:c}))},setEnableSampleTagging:c=>{s(f=>({...f,enableSampleTagging:c}))},setTagSlice:c=>{s(f=>({...f,tagSlice:c}))},addTagMapping:c=>{s(f=>({...f,tagMappings:[...f.tagMappings,c]}))},updateTagMapping:(c,f)=>{s(m=>({...m,tagMappings:m.tagMappings.map((v,b)=>b===c?f:v)}))},removeTagMapping:c=>{s(f=>({...f,tagMappings:f.tagMappings.filter((m,v)=>v!==c)}))},addFieldMapping:c=>{s(f=>({...f,fieldMappings:[...f.fieldMappings,c]}))},updateFieldMapping:(c,f)=>{s(m=>({...m,fieldMappings:m.fieldMappings.map((v,b)=>b===c?f:v)}))},removeFieldMapping:c=>{s(f=>({...f,fieldMappings:f.fieldMappings.filter((m,v)=>v!==c)}))},setEnableFieldMapping:c=>{s(f=>({...f,enableFieldMapping:c}))},setIncludeAllTagsAsMetadata:c=>{s(f=>({...f,includeAllTagsAsMetadata:c}))},setMetadataFieldName:c=>{s(f=>({...f,metadataFieldName:c}))},setGlobalDistanceThreshold:c=>{s(f=>({...f,globalDistanceThreshold:c}))},setMetadataDistanceThreshold:c=>{s(f=>({...f,metadataDistanceThreshold:c}))},resetMapping:()=>{s(c=>({...c,geoField:"",useYamlConfig:!1,yamlConfig:"",globalDistanceThreshold:100,enable3DDetections:!1,threeDSlice:"",detectionFieldName:"",detectionLabelTag:"",detectionRadius:100,enableSampleTagging:!1,tagSlice:"",tagMappings:[],enableFieldMapping:!1,fieldMappings:[],includeAllTagsAsMetadata:!1,metadataFieldName:"osm_metadata",metadataDistanceThreshold:100}))},clearMappingConfig:async()=>{if(e)try{console.log("🔍 useMappingConfig: Clearing mapping config from backend"),await e.clear_mapping_config(),s(c=>({...c,geoField:"",useYamlConfig:!1,yamlConfig:"",enable3DDetections:!1,threeDSlice:"",detectionFieldName:"",detectionLabelTag:"",detectionRadius:100,enableSampleTagging:!1,tagSlice:"",tagMappings:[],enableFieldMapping:!1,fieldMappings:[],includeAllTagsAsMetadata:!1,metadataFieldName:"osm_metadata"}))}catch(c){console.error("🔍 useMappingConfig: Error clearing mapping config:",c)}}}),[s,e]),u=n.useMemo(()=>({hasValidConfig:!!(o.geoField&&o.radius>0),has3DDetections:o.enable3DDetections,hasSampleTagging:o.enableSampleTagging,hasFieldMapping:o.enableFieldMapping,tagMappingsCount:o.tagMappings?o.tagMappings.length:0,fieldMappingsCount:o.fieldMappings?o.fieldMappings.length:0}),[o]);return{state:o,actions:d,derived:u}}function Qn(){var l;console.log("🔍 useIndexingState: Hook starting...");let e,t;try{[e,t]=pe.useRecoilState(mt)}catch(d){return console.error("🔍 useIndexingState: Error accessing atom:",d),{state:{bbox:null,gridTiles:16,location:"",gridCells:[],executionMode:"immediate",indexingStatus:"idle",quadtreeCells:[],realSampleDistribution:{}},actions:{setBbox:()=>{},setLocation:()=>{},setGridTiles:()=>{},setGridCells:()=>{},setIndexingStatus:()=>{},setQuadtreeCells:()=>{},setRealSampleDistribution:()=>{},updateCellStatus:()=>{},resetIndexing:()=>{},clearDistribution:()=>{}},derived:{hasBbox:!1,hasGridCells:!1,hasQuadtreeCells:!1,isIndexing:!1,isCompleted:!1,isFailed:!1,canStartIndexing:!1,canCalculateDistribution:!1,progress:0,hasExistingIndex:!1}}}console.log("🔍 useIndexingState: indexingState =",e),console.log("🔍 useIndexingState: indexingState.gridCells =",e==null?void 0:e.gridCells),console.log("🔍 useIndexingState: indexingState.gridCells?.length =",(l=e==null?void 0:e.gridCells)==null?void 0:l.length);const r=Oe();console.log("🔍 useIndexingState: client =",r);const{state:o}=ht(),s=n.useMemo(()=>({setBbox:d=>{t(u=>({...u,bbox:d}))},setLocation:d=>{t(u=>({...u,location:d}))},setGridTiles:d=>{t(u=>({...u,gridTiles:d}))},setGridCells:d=>{t(u=>({...u,gridCells:d}))},setIndexingStatus:d=>{t(u=>({...u,indexingStatus:d}))},setQuadtreeCells:d=>{t(u=>({...u,quadtreeCells:d}))},setRealSampleDistribution:d=>{t(u=>({...u,realSampleDistribution:d}))},updateCellStatus:(d,u,c,f)=>{t(m=>({...m,gridCells:m.gridCells.map(v=>v.id===d?{...v,status:u,progress:c??v.progress,error:f}:v)}))},resetIndexing:(d="idle")=>{t(u=>({...u,gridCells:[],indexingStatus:d,quadtreeCells:[],realSampleDistribution:{}}))},clearDistribution:()=>{t(d=>({...d,gridCells:[],realSampleDistribution:{}}))}}),[t]),i=n.useMemo(()=>({hasBbox:!!e.bbox,hasGridCells:!!(e.gridCells&&e.gridCells.length>0),hasQuadtreeCells:!!(e.quadtreeCells&&e.quadtreeCells.length>0),isIndexing:e.indexingStatus==="running",isCompleted:e.indexingStatus==="completed",isFailed:e.indexingStatus==="failed",canStartIndexing:!!(e.bbox&&o.geoField&&e.gridTiles>0),canCalculateDistribution:!!(e.bbox&&o.geoField&&e.gridTiles>0),progress:e.gridCells&&e.gridCells.length>0?e.gridCells.filter(d=>d.status==="completed").length/e.gridCells.length:0,hasExistingIndex:e.gridCells&&e.gridCells.length>0||e.indexingStatus!=="idle"&&e.indexingStatus!=="cancelled"}),[e]);return{state:e,actions:s,derived:i}}const ae={INDEX_CONFIGURATION:0,INDEXING:1,MAPPING:2,ENRICH:3,SEARCH_CLEANUP:4};function Jn(){var F;console.log("🔍 useMetageoFlow: Hook starting...");let e,t,r,o;const[s,i]=n.useState(!0);n.useEffect(()=>{const k=setTimeout(()=>{console.log("🔍 useMetageoFlow: Loading timeout reached, setting isLoadingState to false"),i(!1)},5e3);return()=>clearTimeout(k)},[]),n.useEffect(()=>{r&&(console.log("🔍 useMetageoFlow: Saving flow state to localStorage:",{activeStep:e,hasStarted:r}),Vl({activeStep:e,hasStarted:r}))},[e,r]);try{[e,t]=pe.useRecoilState(ql),[r,o]=pe.useRecoilState(Kl)}catch(k){return console.error("🔍 useMetageoFlow: Error accessing atoms:",k),{state:{activeStep:0,hasStarted:!1,isLoadingState:!0},actions:{start:()=>{},next:()=>{},back:()=>{},goToStep:()=>{},autoDetectBbox:async()=>({success:!1,error:"Client not available"}),calculateSampleDistribution:async()=>({success:!1,error:"Client not available"}),startIndexing:async()=>({success:!1,error:"Client not available"}),dropIndex:async()=>({success:!1,error:"Client not available"}),cancelIndexing:async()=>({success:!1,error:"Client not available"}),loadCurrentIndexingState:async()=>({success:!1,error:"Client not available"}),resetMetageo:async()=>({success:!1,error:"Client not available"})},derived:{canGoNext:!1,canGoBack:!1,isFirstStep:!0,isLastStep:!1,stepName:"Unknown",hasExistingIndex:!1}}}console.log("🔍 useMetageoFlow: activeStep =",e),console.log("🔍 useMetageoFlow: hasStarted =",r);const{state:l,actions:d}=Qn();console.log("🔍 useMetageoFlow: indexingState =",l),console.log("🔍 useMetageoFlow: indexingState.gridCells =",l==null?void 0:l.gridCells),console.log("🔍 useMetageoFlow: indexingState.gridCells?.length =",(F=l==null?void 0:l.gridCells)==null?void 0:F.length);const{state:u}=ht();console.log("🔍 useMetageoFlow: mappingConfig =",u);const c=Oe();console.log("🔍 useMetageoFlow: client =",c);const f=n.useMemo(()=>()=>{o(!0),t(ae.INDEX_CONFIGURATION)},[o,t]),m=n.useMemo(()=>()=>{if(console.log("🔍 next() called: activeStep =",e,"STEPS.SEARCH_CLEANUP =",ae.SEARCH_CLEANUP),e<ae.SEARCH_CLEANUP){const k=e+1;console.log("🔍 next() setting activeStep from",e,"to",k),t(k)}else console.log("🔍 next() blocked: already at last step")},[e,t]),v=n.useMemo(()=>()=>{e>ae.INDEX_CONFIGURATION&&t(e-1)},[e,t]),b=n.useMemo(()=>k=>{t(k)},[t]),x=n.useMemo(()=>async k=>{var D;if(!c)return{success:!1,error:"Client not available"};try{const A=await c.define_area_auto({geo_field:k});if((D=A==null?void 0:A.result)!=null&&D.bbox){const O={minLon:A.result.bbox[0],minLat:A.result.bbox[1],maxLon:A.result.bbox[2],maxLat:A.result.bbox[3]};return d.setBbox(O),d.setLocation(k),{success:!0,bbox:O}}return{success:!1,error:"No bounding box data received"}}catch(A){return{success:!1,error:A instanceof Error?A.message:"Unknown error"}}},[c,d]),p=n.useMemo(()=>async()=>{var k;if(!c)return{success:!1,error:"Client not available"};if(!l.bbox||!u.geoField||!l.gridTiles)return{success:!1,error:"Missing required configuration"};try{const D=[l.bbox.minLon,l.bbox.minLat,l.bbox.maxLon,l.bbox.maxLat],A=await c.calculate_sample_distribution({bbox:D,grid_tiles:l.gridTiles,geo_field:u.geoField});return(k=A==null?void 0:A.result)!=null&&k.grid_cells?(d.setGridCells(A.result.grid_cells),d.setRealSampleDistribution(A.result.sample_distribution||{}),{success:!0,data:A.result}):{success:!1,error:"No grid cells data received"}}catch(D){return{success:!1,error:D instanceof Error?D.message:"Unknown error"}}},[l.bbox,u.geoField,l.gridTiles,c,d]),y=n.useMemo(()=>async(k="immediate")=>{var D,A;if(!c)return{success:!1,error:"Client not available"};if(!l.bbox||!u.geoField||!l.gridTiles)return{success:!1,error:"Missing required configuration"};try{const O=[l.bbox.minLon,l.bbox.minLat,l.bbox.maxLon,l.bbox.maxLat];d.setIndexingStatus("running");const S=await c.start_indexing({bbox:O,grid_tiles:l.gridTiles,geo_field:u.geoField,execution_mode:k});return((D=S==null?void 0:S.result)==null?void 0:D.status)==="error"?{success:!1,error:S.result.message}:(A=S==null?void 0:S.result)!=null&&A.indexing_id?(c.watch_indexing({indexing_id:S.result.indexing_id}),{success:!0,indexingId:S.result.indexing_id}):{success:!1,error:"No indexing ID received"}}catch(O){return d.setIndexingStatus("failed"),{success:!1,error:O instanceof Error?O.message:"Unknown error"}}},[l.bbox,u.geoField,l.gridTiles,c,d]),_=n.useMemo(()=>async()=>{if(!c)return{success:!1,error:"Client not available"};try{return await c.drop_index(),d.resetIndexing(),t(ae.INDEX_CONFIGURATION),o(!1),Xn(),{success:!0}}catch(k){return{success:!1,error:k instanceof Error?k.message:"Unknown error"}}},[c,d,t,o]),h=n.useCallback(async()=>{var k,D;if(!c)return{success:!1,error:"Client not available"};try{console.log("🔍 cancelIndexing: Starting cancellation...");const A=await c.cancel_indexing({});if(console.log("🔍 cancelIndexing: Backend result:",A),((k=A==null?void 0:A.result)==null?void 0:k.status)==="cancelled"){console.log("🔍 cancelIndexing: Cancellation successful, resetting local state..."),d.resetIndexing("cancelled"),t(ae.INDEX_CONFIGURATION),o(!1),Xn(),console.log("🔍 cancelIndexing: Reloading indexing state from backend...");try{const O=await c.get_current_indexing_state();if(console.log("🔍 cancelIndexing: Load result:",O),O!=null&&O.result){const S=O.result;if(S.indexing_state){const w=S.indexing_state;w.bbox&&d.setBbox({minLon:w.bbox[0],minLat:w.bbox[1],maxLon:w.bbox[2],maxLat:w.bbox[3]}),w.grid_cells&&d.setGridCells(w.grid_cells),w.quadtree_cells&&d.setQuadtreeCells(w.quadtree_cells),w.real_sample_distribution&&d.setRealSampleDistribution(w.real_sample_distribution),w.indexing_status&&d.setIndexingStatus(w.indexing_status),w.location&&d.setLocation(w.location),w.grid_tiles&&d.setGridTiles(w.grid_tiles),console.log("🔍 cancelIndexing: Indexing state reloaded after cancellation")}}}catch(O){console.warn("🔍 cancelIndexing: Failed to reload indexing state:",O)}return{success:!0,message:A.result.message}}return console.error("🔍 cancelIndexing: Backend did not return cancelled status:",A),{success:!1,error:((D=A==null?void 0:A.result)==null?void 0:D.message)||"Failed to cancel indexing"}}catch(A){return console.error("🔍 cancelIndexing: Exception occurred:",A),{success:!1,error:A instanceof Error?A.message:"Unknown error"}}},[c,d,t,o]),M=n.useMemo(()=>async()=>{var k,D;if(console.log("🔍 loadCurrentIndexingState: Function called"),console.log("🔍 loadCurrentIndexingState: Client available:",!!c),i(!0),!c)return console.warn("🔍 loadCurrentIndexingState: Client not available"),i(!1),{success:!1,error:"Client not available"};try{console.log("🔍 loadCurrentIndexingState: Calling client.get_current_indexing_state()");const A=await c.get_current_indexing_state();if(console.log("🔍 loadCurrentIndexingState: Result received:",A),A!=null&&A.result){const O=A.result;if(console.log("🔍 loadCurrentIndexingState: Data extracted:",O),console.log("🔍 loadCurrentIndexingState: Data keys:",Object.keys(O)),O.bbox||O.grid_cells||O.indexing_status){console.log("🔍 loadCurrentIndexingState: Found data directly in result"),O.bbox&&d.setBbox({minLon:O.bbox[0],minLat:O.bbox[1],maxLon:O.bbox[2],maxLat:O.bbox[3]}),O.grid_cells&&d.setGridCells(O.grid_cells),O.quadtree_cells&&d.setQuadtreeCells(O.quadtree_cells),O.real_sample_distribution&&d.setRealSampleDistribution(O.real_sample_distribution),O.indexing_status&&d.setIndexingStatus(O.indexing_status),O.geo_field&&d.setLocation(O.geo_field),O.grid_tiles&&d.setGridTiles(O.grid_tiles),o(!0);const S=Kn();console.log("🔍 loadCurrentIndexingState: Saved flow state:",S);let w=!1;try{const j=await c.get_mapping_config();w=((k=j==null?void 0:j.result)==null?void 0:k.status)==="success"&&j.result.mapping_config,console.log("🔍 loadCurrentIndexingState: Has mapping config:",w)}catch(j){console.log("🔍 loadCurrentIndexingState: Error checking mapping config:",j)}let N=ae.INDEXING;return S&&S.hasStarted?(N=S.activeStep,console.log("🔍 loadCurrentIndexingState: Using saved step:",N)):O.indexing_status==="completed"&&w?(N=ae.MAPPING,console.log("🔍 loadCurrentIndexingState: Indexing completed with mapping config, going to mapping step")):O.indexing_status==="completed"&&(N=ae.MAPPING,console.log("🔍 loadCurrentIndexingState: Indexing completed, going to mapping step")),t(N),console.log("🔍 loadCurrentIndexingState: Set hasStarted=true and activeStep=",N),i(!1),{success:!0,hasExistingIndex:!0}}else if(O.bbox||O.grid_cells){O.bbox&&d.setBbox({minLon:O.bbox[0],minLat:O.bbox[1],maxLon:O.bbox[2],maxLat:O.bbox[3]}),O.grid_cells&&d.setGridCells(O.grid_cells),O.geo_field&&d.setLocation(O.geo_field),o(!0);const S=Kn();console.log("🔍 loadCurrentIndexingState: Saved flow state (old format):",S);let w=!1;try{const j=await c.get_mapping_config();w=((D=j==null?void 0:j.result)==null?void 0:D.status)==="success"&&j.result.mapping_config,console.log("🔍 loadCurrentIndexingState: Has mapping config (old format):",w)}catch(j){console.log("🔍 loadCurrentIndexingState: Error checking mapping config (old format):",j)}let N=ae.INDEXING;return S&&S.hasStarted?(N=S.activeStep,console.log("🔍 loadCurrentIndexingState: Using saved step (old format):",N)):w&&(N=ae.MAPPING,console.log("🔍 loadCurrentIndexingState: Has mapping config, going to mapping step (old format)")),t(N),console.log("🔍 loadCurrentIndexingState: Set hasStarted=true and activeStep=",N,"(old format)"),i(!1),{success:!0,hasExistingIndex:!0}}}return i(!1),{success:!0,hasExistingIndex:!1}}catch(A){return i(!1),{success:!1,error:A instanceof Error?A.message:"Unknown error"}}},[c,d,o,t]),E=n.useMemo(()=>async()=>{var k,D,A;if(!c)return console.error("🔍 resetMetageo: Client not available"),{success:!1,error:"Client not available"};try{console.log("🔍 resetMetageo: Starting complete reset..."),console.log("🔍 resetMetageo: Client available:",!!c),console.log("🔍 resetMetageo: reset_metageo method available:",!!c.reset_metageo);const O=await c.reset_metageo();return console.log("🔍 resetMetageo: Result from client.reset_metageo():",O),console.log("🔍 resetMetageo: Result.result:",O==null?void 0:O.result),console.log("🔍 resetMetageo: Result.result.status:",(k=O==null?void 0:O.result)==null?void 0:k.status),((D=O==null?void 0:O.result)==null?void 0:D.status)==="success"?(d.resetIndexing(),t(ae.INDEX_CONFIGURATION),o(!1),Xn(),console.log("🔍 resetMetageo: Successfully reset all metageo state"),{success:!0,message:O.result.message}):(console.error("🔍 resetMetageo: Reset failed:",O),{success:!1,error:((A=O==null?void 0:O.result)==null?void 0:A.message)||"Reset failed"})}catch(O){return console.error("🔍 resetMetageo: Error during reset:",O),{success:!1,error:O instanceof Error?O.message:"Unknown error during reset"}}},[c,d,t,o]),P=n.useMemo(()=>async()=>(console.log("🔍 startOver: Calling resetMetageo..."),await E()),[E]),$=n.useMemo(()=>({start:f,next:m,back:v,goToStep:b,autoDetectBbox:x,calculateSampleDistribution:p,startIndexing:y,dropIndex:_,cancelIndexing:h,loadCurrentIndexingState:M,resetMetageo:E,startOver:P}),[f,m,v,b,x,p,y,_,h,M,E,P]),C=n.useMemo(()=>{const k=l.gridCells&&l.gridCells.length>0||l.indexingStatus!=="idle"&&l.indexingStatus!=="cancelled";console.log("🔍 useMetageoFlow derived: hasExistingIndex =",k),console.log("🔍 useMetageoFlow derived: indexingState.gridCells =",l.gridCells),console.log("🔍 useMetageoFlow derived: indexingState.indexingStatus =",l.indexingStatus),console.log("🔍 useMetageoFlow derived: indexingState.bbox =",l.bbox),console.log("🔍 useMetageoFlow derived: activeStep =",e),console.log("🔍 useMetageoFlow derived: hasStarted =",r);let D=e;k&&e===ae.INDEX_CONFIGURATION?D=ae.INDEXING:l.indexingStatus==="completed"&&e>=ae.INDEXING&&(D=e);const A=D<ae.SEARCH_CLEANUP;return console.log("🔍 useMetageoFlow derived: canGoNext =",A,"(effectiveStep =",D,"<",ae.SEARCH_CLEANUP,")"),{canGoNext:A,canGoBack:D>ae.INDEX_CONFIGURATION,isFirstStep:D===ae.INDEX_CONFIGURATION,isLastStep:D===ae.SEARCH_CLEANUP,stepName:Object.keys(ae).find(O=>ae[O]===D)||"Unknown",hasExistingIndex:k,effectiveStep:D}},[e,l]);return{state:{activeStep:e,hasStarted:r,isLoadingState:s},actions:$,derived:C}}const Zl=(e,t,r)=>{const s=(()=>{if(Object.keys(e).length===0)return t;const[u,c,f,m]=t,v=Math.sqrt(Object.keys(e).length),b=(f-u)/v,x=(m-c)/v;let p=f,y=u,_=m,h=c;Object.entries(e).forEach(([E,P])=>{if(P>0){const[$,C]=E.split("_").map(Number),F=u+C*b,k=F+b,D=c+$*x,A=D+x;p=Math.min(p,F),y=Math.max(y,k),_=Math.min(_,D),h=Math.max(h,A)}});const M=.001;return[Math.max(u,p-M),Math.max(c,_-M),Math.min(f,y+M),Math.min(m,h+M)]})(),i=Object.values(e).reduce((u,c)=>u+c,0),l={id:"root",bbox:s,sampleCount:i,depth:0,maxDepth:r.maxDepth,minSize:r.minSize},d=u=>{const[c,f,m,v]=u.bbox,b=m-c,x=v-f;if(u.depth<r.maxDepth&&u.sampleCount>r.threshold&&b>r.minSize&&x>r.minSize){const y=(c+m)/2,_=(f+v)/2,h=[{id:`${u.id}_NW`,bbox:[c,_,y,v]},{id:`${u.id}_NE`,bbox:[y,_,m,v]},{id:`${u.id}_SW`,bbox:[c,f,y,_]},{id:`${u.id}_SE`,bbox:[y,f,m,_]}];u.children=h.map(M=>{let E=0;return Object.entries(e).forEach(([P,$])=>{if($>0){const[C,F]=P.split("_").map(Number),k=Math.sqrt(Object.keys(e).length),D=(m-c)/k,A=(v-f)/k,O=c+F*D,S=O+D,w=f+C*A,N=w+A;O<M.bbox[2]&&S>M.bbox[0]&&w<M.bbox[3]&&N>M.bbox[1]&&(E+=$)}}),d({...M,sampleCount:E,depth:u.depth+1,maxDepth:r.maxDepth,minSize:r.minSize})})}return u};return[d(l)]};function Rl({sampleDistribution:e,bbox:t,onQuadtreeCellsChange:r}){const o=a.useTheme(),[s,i]=n.useState({maxDepth:4,minSize:.001,threshold:100,maxSamplesPerCell:1e3}),[l,d]=n.useState(!1),[u,c]=n.useState([]),[f,m]=n.useState(!1),v=n.useCallback(async()=>{if(t){m(!0);try{await new Promise(y=>setTimeout(y,100));const p=Zl(e,t,s);c(p),r(p),d(!0)}catch(p){console.error("Error building quadtree:",p)}finally{m(!1)}}},[t,e,s,r]),b=n.useMemo(()=>{const p=y=>y.reduce((_,h)=>_+1+(h.children?p(h.children):0),0);return p(u)},[u]),x=n.useMemo(()=>Object.values(e).reduce((p,y)=>p+y,0),[e]);return!t||Object.keys(e).length===0?null:n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(o.palette.secondary.main,.02),border:`1px solid ${a.alpha(o.palette.secondary.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:o.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(dn,{sx:{mr:1,color:o.palette.info.main}}),"Adaptive Quadtree Grid"),n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:o.palette.text.secondary}},"Generate an adaptive grid that automatically subdivides regions with high sample density for more efficient indexing."),n.createElement(a.Grid,{container:!0,spacing:2,sx:{mb:3}},n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Max Depth",type:"number",value:s.maxDepth,onChange:p=>{const y=parseInt(p.target.value);isNaN(y)||i(_=>({..._,maxDepth:y}))},size:"small",inputProps:{min:1,max:10}})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Min Size (deg)",type:"number",value:s.minSize,onChange:p=>{const y=parseFloat(p.target.value);isNaN(y)||i(_=>({..._,minSize:y}))},size:"small",inputProps:{min:1e-4,max:1,step:1e-4}})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Threshold",type:"number",value:s.threshold,onChange:p=>{const y=parseInt(p.target.value);isNaN(y)||i(_=>({..._,threshold:y}))},size:"small",inputProps:{min:1,max:1e4}})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Max Samples/Cell",type:"number",value:s.maxSamplesPerCell,onChange:p=>{const y=parseInt(p.target.value);isNaN(y)||i(_=>({..._,maxSamplesPerCell:y}))},size:"small",inputProps:{min:1,max:1e5}}))),n.createElement(a.Stack,{direction:"row",spacing:2,sx:{mb:3}},n.createElement(a.Button,{onClick:v,disabled:!t||Object.keys(e).length===0,variant:"contained",startIcon:n.createElement(zl,null),sx:{height:40}},"Generate Quadtree")),l&&u.length>0&&n.createElement(a.Box,{sx:{mt:3,p:2,bgcolor:a.alpha(o.palette.success.main,.05),borderRadius:1,border:`1px solid ${a.alpha(o.palette.success.main,.2)}`}},n.createElement(a.Typography,{variant:"body2",sx:{mb:1}},n.createElement("strong",null,"Quadtree generated successfully!")),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"Total cells: ",b," | Total samples: ",x," | Max depth: ",s.maxDepth," | Min cell size: ",s.minSize,"°")),f&&n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1,mt:2}},n.createElement(a.CircularProgress,{size:16}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Generating adaptive grid...")))}function ec(){const[e,t]=n.useState([]),[r,o]=n.useState(!0),[s,i]=n.useState(null),l=Oe(),d=n.useCallback(async()=>{if(!l){i("Client not available"),o(!1);return}try{o(!0),i(null),console.log("🔍 useGeoFields: Calling client.get_geo_fields()");const u=await l.get_geo_fields();if(console.log("🔍 useGeoFields: Raw result =",u),console.log("🔍 useGeoFields: result type =",typeof u),console.log("🔍 useGeoFields: result keys =",u?Object.keys(u):"null/undefined"),u!=null&&u.result){const c=u.result;console.log("🔍 useGeoFields: Extracted data =",c),t(c.geo_fields||[])}else u!=null&&u.geo_fields?(console.log("🔍 useGeoFields: Direct geo_fields access =",u.geo_fields),t(u.geo_fields||[])):(console.log("🔍 useGeoFields: No geo_fields found, setting empty array"),t([]))}catch(u){console.error("🔍 useGeoFields: Error fetching geo fields:",u),i(u instanceof Error?u.message:"Failed to fetch geographic fields"),t([])}finally{o(!1)}},[l]);return n.useEffect(()=>{l&&d()},[l]),{geoFields:e,loading:r,error:s,refetch:d}}function tc(e){const[t,r]=n.useState([]),[o,s]=n.useState(!1),[i,l]=n.useState(null),d=Oe(),u=async()=>{if(!d||!e){r([]),l(null);return}try{s(!0),l(null);const c=await d.get_sample_geo_points({geo_field:e});(c==null?void 0:c.status)==="success"&&c.geo_points?r(c.geo_points):(l((c==null?void 0:c.message)||"Failed to load geographic points"),r([]))}catch(c){l(c instanceof Error?c.message:"Unknown error"),r([])}finally{s(!1)}};return n.useEffect(()=>{u()},[e]),{geoPoints:t,loading:o,error:i,refetch:u}}const nc=e=>{const t=(e.minLat+e.maxLat)/2,r=111,o=111*Math.cos(t*Math.PI/180),s=(e.maxLon-e.minLon)*o,i=(e.maxLat-e.minLat)*r;return s*i},rc=e=>{const t=(e.minLat+e.maxLat)/2,r=111,o=111*Math.cos(t*Math.PI/180),s=(e.maxLon-e.minLon)*o,i=(e.maxLat-e.minLat)*r;return`${s.toFixed(1)} km × ${i.toFixed(1)} km`},oc=e=>{const t=(e.minLon+e.maxLon)/2;return`${((e.minLat+e.maxLat)/2).toFixed(4)}°, ${t.toFixed(4)}°`};function ac(){var m,v,b,x;const e=a.useTheme(),{state:t,actions:r}=Qn(),{state:o,actions:s}=ht(),{actions:i}=Jn(),{geoFields:l,loading:d}=ec();tc(o.geoField);const u=async()=>{if(!o.geoField)return;(await i.autoDetectBbox(o.geoField)).success},c=async()=>{(await i.calculateSampleDistribution()).success},f=async()=>{(await i.startIndexing()).success&&i.next()};return n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"h6",sx:{mb:3,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(ft,{color:"primary"}),"Step 1: Index Configuration"),n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:e.palette.text.secondary,lineHeight:1.6}},"Configure the prerequisites for indexing: select the geographic field, set bounding box boundaries, and calculate sample distribution. This step is required before you can start indexing."),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.primary.main,.02),border:`1px solid ${a.alpha(e.palette.primary.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(gn,{color:"primary"}),"Geographic Field Selection"),n.createElement(a.Typography,{variant:"body2",sx:{mb:2,color:e.palette.text.secondary}},"Select the geographic field that contains location data for your samples."),n.createElement(a.FormControl,{fullWidth:!0,sx:{mb:2}},n.createElement(a.InputLabel,null,"Geographic Field"),n.createElement(a.Select,{value:o.geoField,onChange:p=>s.setGeoField(p.target.value),disabled:d,label:"Geographic Field"},n.createElement(a.MenuItem,{value:""},n.createElement("em",null,"Choose a field containing geographic data...")),l.map(p=>n.createElement(a.MenuItem,{key:p,value:p},p)))),d&&n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(a.CircularProgress,{size:16}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Loading geographic fields...")),!d&&l.length===0&&n.createElement(a.Typography,{variant:"body2",color:"warning.main",sx:{mb:2}},"No geographic fields found in the dataset. Please ensure your dataset contains fields with geographic data."),!d&&l.length>0&&n.createElement(a.Typography,{variant:"body2",color:"success.main",sx:{mb:2}},"Found ",l.length," geographic field",l.length!==1?"s":"",": ",l.join(", "))),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.secondary.main,.02),border:`1px solid ${a.alpha(e.palette.secondary.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(Hn,{color:"secondary"}),"Geographic Boundaries"),n.createElement(a.Typography,{variant:"body2",sx:{mb:2,color:e.palette.text.secondary}},"Define the geographic area to index. You can auto-detect boundaries or set them manually."),n.createElement(a.Stack,{direction:"row",spacing:2,sx:{mb:3}},n.createElement(a.Button,{onClick:u,disabled:d||!o.geoField,startIcon:n.createElement(Hn,null),variant:"contained",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Auto-detect BBox")),o.geoField&&t.bbox&&n.createElement(a.Box,{sx:{p:2,mb:2,backgroundColor:a.alpha(e.palette.info.main,.05),border:`1px solid ${a.alpha(e.palette.info.main,.2)}`,borderRadius:1}},n.createElement(a.Typography,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"info.main"}},"📏 Geographic Coverage Area"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},n.createElement("strong",null,"Area Size:")," ",nc(t.bbox).toFixed(2)," km²",n.createElement("br",null),n.createElement("strong",null,"Dimensions:")," ",rc(t.bbox),n.createElement("br",null),n.createElement("strong",null,"Center Point:")," ",oc(t.bbox)),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},"💡 This area will be divided into ",t.gridTiles," grid tiles for OSM data indexing. Larger areas may take longer to process and require more API requests.")),n.createElement(a.Grid,{container:!0,spacing:2,sx:{mb:3}},n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Min Longitude",type:"number",value:((m=t.bbox)==null?void 0:m.minLon)||"",onChange:p=>{const y=parseFloat(p.target.value);isNaN(y)||r.setBbox({...t.bbox,minLon:y})},disabled:!t.bbox,size:"small"})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Min Latitude",type:"number",value:((v=t.bbox)==null?void 0:v.minLat)||"",onChange:p=>{const y=parseFloat(p.target.value);isNaN(y)||r.setBbox({...t.bbox,minLat:y})},disabled:!t.bbox,size:"small"})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Max Longitude",type:"number",value:((b=t.bbox)==null?void 0:b.maxLon)||"",onChange:p=>{const y=parseFloat(p.target.value);isNaN(y)||r.setBbox({...t.bbox,maxLon:y})},disabled:!t.bbox,size:"small"})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Max Latitude",type:"number",value:((x=t.bbox)==null?void 0:x.maxLat)||"",onChange:p=>{const y=parseFloat(p.target.value);isNaN(y)||r.setBbox({...t.bbox,maxLat:y})},disabled:!t.bbox,size:"small"}))),t.bbox&&n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:a.alpha(e.palette.success.main,.05),borderRadius:1,border:`1px solid ${a.alpha(e.palette.success.main,.2)}`}},n.createElement(a.Typography,{variant:"body2",sx:{display:"flex",alignItems:"center"}},n.createElement("strong",null,"Bounding box configured:"),t.bbox.minLon.toFixed(6),","," ",t.bbox.minLat.toFixed(6)," to"," ",t.bbox.maxLon.toFixed(6),","," ",t.bbox.maxLat.toFixed(6),n.createElement(pn,{sx:{ml:1,color:e.palette.success.main,fontSize:20}})))),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.info.main,.02),border:`1px solid ${a.alpha(e.palette.info.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(dn,{color:"info"}),"Grid Configuration"),n.createElement(a.Typography,{variant:"body2",sx:{mb:2,color:e.palette.text.secondary}},"Set the grid resolution for geographic indexing. Higher values create more granular regions."),n.createElement(a.FormControl,{sx:{mb:3,minWidth:200}},n.createElement(a.InputLabel,null,"Grid Resolution"),n.createElement(a.Select,{value:t.gridTiles,onChange:p=>r.setGridTiles(p.target.value),label:"Grid Resolution"},n.createElement(a.MenuItem,{value:3},"3x3 (9 cells)"),n.createElement(a.MenuItem,{value:9},"9x9 (81 cells)"),n.createElement(a.MenuItem,{value:10},"10x10 (100 cells)"),n.createElement(a.MenuItem,{value:16},"16x16 (256 cells)"),n.createElement(a.MenuItem,{value:25},"25x25 (625 cells)"),n.createElement(a.MenuItem,{value:50},"50x50 (2,500 cells)"),n.createElement(a.MenuItem,{value:100},"100x100 (10,000 cells)"))),n.createElement(a.Stack,{direction:"row",spacing:2},n.createElement(a.Button,{onClick:c,disabled:!t.bbox||!o.geoField||!t.gridTiles,startIcon:n.createElement(dn,null),variant:"contained",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600,bgcolor:e.palette.success.main,"&:hover":{bgcolor:e.palette.success.dark}}},"Calculate Sample Distribution"),t.gridCells.length>0&&n.createElement(a.Button,{onClick:r.clearDistribution,startIcon:n.createElement(Mo,null),variant:"outlined",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Clear Distribution")),t.gridCells.length>0&&n.createElement(a.Box,{sx:{mt:3,p:2,bgcolor:a.alpha(e.palette.success.main,.05),borderRadius:1}},n.createElement(a.Typography,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(pn,{sx:{color:e.palette.success.main,fontSize:20}}),n.createElement("strong",null,"Sample distribution calculated!")," The grid now shows sample counts for each geographic region."))),n.createElement(Rl,{sampleDistribution:t.realSampleDistribution,bbox:t.bbox?[t.bbox.minLon,t.bbox.minLat,t.bbox.maxLon,t.bbox.maxLat]:null,onQuadtreeCellsChange:r.setQuadtreeCells}),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.warning.main,.02),border:`1px solid ${a.alpha(e.palette.warning.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(dn,{color:"warning"}),"Ready to Index"),n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:e.palette.text.secondary}},"Once you've configured the geographic boundaries and calculated the sample distribution, you can proceed to start the indexing process."),n.createElement(a.Button,{onClick:f,disabled:!t.bbox||!o.geoField||t.gridCells.length===0,variant:"contained",color:"success",size:"large",sx:{px:6,py:2,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"1.1rem"}},"Start Indexing")))}function sc({bbox:e,isLoading:t,realSampleCounts:r,onCellStatusChange:o,quadtreeCells:s,useQuadtree:i,indexingStatus:l,gridCells:d}){const u=a.useTheme(),c=n.useMemo(()=>{if(d.forEach(M=>{console.log(`  Cell ${M.id}: status=${M.status}, sample_count=${M.sample_count}`)}),d.length===0)return 0;const y=d.filter(M=>M.status!=="empty");if(y.length===0)return 1;const _=y.filter(M=>M.status==="completed"||M.status==="failed"||M.status==="rate_limited"||M.status==="retrying").length;console.log("🔍 Progress calculation debug:"),console.log(`  Total cells: ${d.length}`),console.log(`  Active cells: ${y.length}`),console.log(`  Processed cells: ${_}`),console.log(`  Progress: ${(_/y.length*100).toFixed(1)}%`),console.log(`  Indexing status: ${l}`);const h=y.filter(M=>M.status==="idle");return h.length>0&&console.warn(`⚠️ Found ${h.length} idle cells that should be processed:`,h.map(M=>M.id)),_/y.length},[d]),f=n.useMemo(()=>{const y={idle:0,running:0,completed:0,failed:0,rate_limited:0,retrying:0,cancelled:0,empty:0,unknown:0};return d.forEach(_=>{const h=_.status;y[h]=(y[h]||0)+1}),y},[d]);if(!e)return null;const[m,v,b,x]=e,p=Math.sqrt(i?s.length:d.length);return d.length===0&&s.length===0?n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(u.palette.warning.main,.02),border:`1px solid ${a.alpha(u.palette.warning.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"No Grid Data"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"No grid cells found. Please complete the Index Configuration step first.")):isNaN(p)||p<=0?n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(u.palette.error.main,.02),border:`1px solid ${a.alpha(u.palette.error.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"Invalid Grid Size"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Grid size is invalid: ",p,". Please check your configuration.")):n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(u.palette.background.paper,.8),border:`1px solid ${a.alpha(u.palette.divider,.2)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:1,fontWeight:600,color:u.palette.text.primary}},"Geo Index Status"),n.createElement(a.Typography,{variant:"body2",sx:{mb:2,color:u.palette.text.secondary,fontStyle:"italic"}},"💡 Click on any cell to view detailed OSM data"),n.createElement(a.Box,{sx:{mb:3}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1}},n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Indexing Progress"),n.createElement(a.Typography,{variant:"body2",fontWeight:600},Math.round(c*100),"%")),n.createElement(a.LinearProgress,{variant:"determinate",value:c*100,sx:{height:8,borderRadius:4,backgroundColor:a.alpha(u.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:4}}})),n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3}},n.createElement(a.Chip,{label:`Idle: ${f.idle}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.grey[600]}}),n.createElement(a.Chip,{label:`Running: ${f.running}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.info.main}}),n.createElement(a.Chip,{label:`Completed: ${f.completed}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.success.main}}),n.createElement(a.Chip,{label:`Failed: ${f.failed}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.error.main}}),n.createElement(a.Chip,{label:`Rate Limited: ${f.rate_limited}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.warning.main}}),n.createElement(a.Chip,{label:`Retrying: ${f.retrying}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.info.main}}),n.createElement(a.Chip,{label:`Cancelled: ${f.cancelled}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.grey[500]}}),n.createElement(a.Chip,{label:`Empty: ${f.empty}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.grey[400]}})),n.createElement(a.Box,{sx:{display:"grid",gridTemplateColumns:`repeat(${p}, 1fr)`,gap:1,maxWidth:"100%",overflow:"auto"}},Array.from({length:p*p},(y,_)=>{const h=Math.floor(_/p),M=_%p,E=`${h}_${M}`,P=d.find(D=>D.id===E),$=r[E]||0,C=(P==null?void 0:P.status)||"unknown",F=D=>{switch(D){case"completed":return u.palette.success.main;case"running":return u.palette.info.main;case"failed":return u.palette.error.main;case"rate_limited":return u.palette.warning.main;case"retrying":return u.palette.info.light;case"cancelled":return u.palette.grey[500];case"empty":return u.palette.grey[400];case"idle":return u.palette.grey[600];default:return u.palette.grey[300]}},k=D=>{switch(D){case"completed":return"✓";case"running":return"⟳";case"failed":return"✗";case"rate_limited":return"⏱";case"retrying":return"↻";case"cancelled":return"⊘";case"empty":return"·";case"idle":return $>0?"○":"·";default:return"?"}};return n.createElement(a.Box,{key:E,sx:{width:20,height:20,backgroundColor:F(C),borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",color:"white",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease","&:hover":{transform:"scale(1.3)",zIndex:1,boxShadow:`0 0 10px ${a.alpha(u.palette.primary.main,.5)}`}},title:`Cell ${E}: ${C} (${$} samples)`,onClick:()=>o(E,C)},k(C))})),n.createElement(a.Box,{sx:{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"Grid: ",p,"x",p," (",p*p," cells)"),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},i?"Adaptive Quadtree":"Fixed Grid")))}function ic({open:e,onClose:t,cellId:r}){const o=a.useTheme(),s=Oe(),[i,l]=n.useState(null),[d,u]=n.useState(!1),[c,f]=n.useState(null);n.useEffect(()=>{e&&r&&m()},[e,r]);const m=async()=>{var h,M;if(!s){f("Client not available");return}try{u(!0),f(null);const E=await s.get_cell_data({cell_id:r});((h=E==null?void 0:E.result)==null?void 0:h.status)==="success"?l(E.result):f(((M=E==null?void 0:E.result)==null?void 0:M.message)||"Failed to load cell data")}catch(E){f(E instanceof Error?E.message:"Failed to load cell data")}finally{u(!1)}},v=h=>{switch(h){case"completed":return n.createElement(pn,{color:"success"});case"failed":return n.createElement(Io,{color:"error"});case"rate_limited":return n.createElement(Po,{color:"warning"});case"cancelled":return n.createElement(Io,{color:"disabled"});default:return n.createElement(gn,{color:"info"})}},b=h=>{switch(h){case"completed":return o.palette.success.main;case"failed":return o.palette.error.main;case"rate_limited":return o.palette.warning.main;case"cancelled":return o.palette.grey[500];case"running":return o.palette.info.main;default:return o.palette.grey[600]}},x=h=>{if(!h)return"N/A";const[M,E,P,$]=h;return`[${M.toFixed(6)}, ${E.toFixed(6)}, ${P.toFixed(6)}, ${$.toFixed(6)}]`},p=h=>{const M={};return h.forEach(E=>{const P=E.feature_type||"unknown";M[P]=(M[P]||0)+1}),M},y=h=>{const M={};return h.forEach(E=>{E.tags&&Object.keys(E.tags).forEach(P=>{M[P]=(M[P]||0)+1})}),M},_=h=>{const M={};return h.forEach(E=>{E.tags&&Object.entries(E.tags).forEach(([P,$])=>{M[P]||(M[P]={count:0,examples:[]}),M[P].count+=1;const C=String($);!M[P].examples.includes(C)&&M[P].examples.length<5&&M[P].examples.push(C)})}),M};return n.createElement(a.Dialog,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"90vh"}}},n.createElement(a.DialogTitle,null,n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(gn,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",component:"span"},"Cell Data Preview: ",r))),n.createElement(a.DialogContent,{dividers:!0},d&&n.createElement(a.Box,{sx:{display:"flex",justifyContent:"center",p:3}},n.createElement(a.CircularProgress,null)),c&&n.createElement(a.Alert,{severity:"error",sx:{mb:2}},c),i&&n.createElement(a.Box,null,n.createElement(a.Paper,{elevation:1,sx:{p:2,mb:3,background:a.alpha(o.palette.primary.main,.02),border:`1px solid ${a.alpha(o.palette.primary.main,.1)}`}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"Cell Overview"),n.createElement(a.Stack,{direction:"row",spacing:2,sx:{mb:2}},n.createElement(a.Chip,{icon:v(i.cell_status),label:`Status: ${i.cell_status}`,sx:{backgroundColor:a.alpha(b(i.cell_status),.1),color:b(i.cell_status),border:`1px solid ${a.alpha(b(i.cell_status),.3)}`}}),n.createElement(a.Chip,{label:`Samples: ${i.sample_count}`,variant:"outlined"}),n.createElement(a.Chip,{label:`OSM Features: ${i.osm_features_count||0}`,variant:"outlined"})),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},n.createElement("strong",null,"Coordinates:")," ",x(i.coordinates)),i.error&&n.createElement(a.Alert,{severity:"error",sx:{mt:2}},n.createElement("strong",null,"Error:")," ",i.error)),i.osm_data&&i.osm_data.length>0&&n.createElement(a.Paper,{elevation:1,sx:{p:2,mb:3,background:a.alpha(o.palette.info.main,.02),border:`1px solid ${a.alpha(o.palette.info.main,.1)}`}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"OSM Data Statistics"),n.createElement(a.Accordion,null,n.createElement(a.AccordionSummary,{expandIcon:n.createElement(fn,null)},n.createElement(a.Typography,{variant:"subtitle1"},"Feature Types (",Object.keys(p(i.osm_data)).length,")")),n.createElement(a.AccordionDetails,null,n.createElement(a.Stack,{direction:"row",spacing:1,flexWrap:"wrap"},Object.entries(p(i.osm_data)).sort(([,h],[,M])=>M-h).map(([h,M])=>n.createElement(a.Chip,{key:h,label:`${h}: ${M}`,size:"small",variant:"outlined"}))))),n.createElement(a.Accordion,null,n.createElement(a.AccordionSummary,{expandIcon:n.createElement(fn,null)},n.createElement(a.Typography,{variant:"subtitle1"},"OSM Tags (",Object.keys(y(i.osm_data)).length,")")),n.createElement(a.AccordionDetails,null,n.createElement(a.Stack,{direction:"row",spacing:1,flexWrap:"wrap"},Object.entries(y(i.osm_data)).sort(([,h],[,M])=>M-h).slice(0,20).map(([h,M])=>n.createElement(a.Chip,{key:h,label:`${h}: ${M}`,size:"small",variant:"outlined",color:"primary"}))),Object.keys(y(i.osm_data)).length>20&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},"Showing top 20 tags out of ",Object.keys(y(i.osm_data)).length," total"))),n.createElement(a.Accordion,null,n.createElement(a.AccordionSummary,{expandIcon:n.createElement(fn,null)},n.createElement(a.Typography,{variant:"subtitle1"},"Tag Counts & Examples (",Object.keys(_(i.osm_data)).length,")")),n.createElement(a.AccordionDetails,null,n.createElement(a.TableContainer,{sx:{maxHeight:400}},n.createElement(a.Table,{size:"small",stickyHeader:!0},n.createElement(a.TableHead,null,n.createElement(a.TableRow,null,n.createElement(a.TableCell,null,n.createElement("strong",null,"Tag")),n.createElement(a.TableCell,{align:"right"},n.createElement("strong",null,"Count")),n.createElement(a.TableCell,null,n.createElement("strong",null,"Example Values")))),n.createElement(a.TableBody,null,Object.entries(_(i.osm_data)).sort(([,h],[,M])=>M.count-h.count).slice(0,50).map(([h,M])=>n.createElement(a.TableRow,{key:h},n.createElement(a.TableCell,null,n.createElement(a.Chip,{label:h,size:"small",variant:"outlined",color:"primary"})),n.createElement(a.TableCell,{align:"right"},n.createElement(a.Typography,{variant:"body2",fontWeight:"medium"},M.count)),n.createElement(a.TableCell,null,n.createElement(a.Stack,{direction:"row",spacing:.5,flexWrap:"wrap"},M.examples.map((E,P)=>n.createElement(a.Chip,{key:P,label:E,size:"small",variant:"filled",sx:{backgroundColor:a.alpha(o.palette.secondary.main,.1),color:o.palette.secondary.main,fontSize:"0.75rem",height:"20px"}})),M.examples.length===5&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center",ml:.5}},"+more")))))))),Object.keys(_(i.osm_data)).length>50&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},"Showing top 50 tags out of ",Object.keys(_(i.osm_data)).length," total")))),i.osm_data&&i.osm_data.length>0&&n.createElement(a.Paper,{elevation:1,sx:{p:2,background:a.alpha(o.palette.grey[100],.5),border:`1px solid ${a.alpha(o.palette.grey[300],.5)}`}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"Raw OSM Data (",i.osm_data.length," features)"),n.createElement(a.Accordion,null,n.createElement(a.AccordionSummary,{expandIcon:n.createElement(fn,null)},n.createElement(a.Typography,{variant:"subtitle1"},n.createElement(jl,{sx:{mr:1,verticalAlign:"middle"}}),"View Raw Data")),n.createElement(a.AccordionDetails,null,n.createElement(a.TableContainer,{sx:{maxHeight:400}},n.createElement(a.Table,{size:"small",stickyHeader:!0},n.createElement(a.TableHead,null,n.createElement(a.TableRow,null,n.createElement(a.TableCell,null,"Type"),n.createElement(a.TableCell,null,"ID"),n.createElement(a.TableCell,null,"Feature Type"),n.createElement(a.TableCell,null,"Tags"))),n.createElement(a.TableBody,null,i.osm_data.slice(0,50).map((h,M)=>n.createElement(a.TableRow,{key:M},n.createElement(a.TableCell,null,h.type),n.createElement(a.TableCell,null,h.id),n.createElement(a.TableCell,null,h.feature_type||"N/A"),n.createElement(a.TableCell,null,n.createElement(a.Box,{sx:{maxWidth:200,overflow:"hidden"}},h.tags?Object.entries(h.tags).slice(0,3).map(([E,P])=>n.createElement(a.Chip,{key:E,label:`${E}=${P}`,size:"small",sx:{mr:.5,mb:.5}})):n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"No tags"),h.tags&&Object.keys(h.tags).length>3&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"+",Object.keys(h.tags).length-3," more")))))))),i.osm_data.length>50&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},"Showing first 50 features out of ",i.osm_data.length," total")))),i.osm_data&&i.osm_data.length===0&&n.createElement(a.Paper,{elevation:1,sx:{p:3,textAlign:"center",background:a.alpha(o.palette.grey[100],.5),border:`1px solid ${a.alpha(o.palette.grey[300],.5)}`}},n.createElement(a.Typography,{variant:"body1",color:"text.secondary"},"No OSM data found in this cell")))),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:t,variant:"outlined"},"Close"),n.createElement(a.Button,{onClick:m,variant:"contained",disabled:d},"Refresh")))}function lc(){const e=a.useTheme(),{state:t,derived:r,actions:o}=Qn(),{state:s,actions:i,derived:l}=Jn(),[d,u]=n.useState(null),[c,f]=n.useState(!1),[m,v]=n.useState("immediate"),b=async()=>{(await i.startIndexing(m)).success},x=async()=>{console.log("Pausing indexing...")},p=async()=>{o.retryFailedCells(),(await i.startIndexing(m)).success},y=async()=>{const E=await i.cancelIndexing();E.success?console.log("Indexing cancelled successfully"):console.error("Failed to cancel indexing:",E.error)},_=async()=>{(await i.dropIndex()).success},h=(E,P)=>{u(E),f(!0)},M=()=>{f(!1),u(null)};return n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"h6",sx:{mb:3,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(gn,{color:"primary"}),"Step 2: Indexing"),!l.hasExistingIndex&&n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:e.palette.text.secondary,lineHeight:1.6}},"Run the indexing operation to download OpenStreetMap data for each geographic region. This step requires the configuration from Step 1."),l.hasExistingIndex&&n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:e.palette.text.secondary,lineHeight:1.6}},r.isCompleted?"Indexing completed successfully! You can view the results below or proceed to the next step.":r.isIndexing?"Indexing is currently in progress. Monitor the grid below to track progress.":"Resume or restart the indexing operation to download OpenStreetMap data for each geographic region."),t.bbox?n.createElement(n.Fragment,null,n.createElement(sc,{bbox:[t.bbox.minLon,t.bbox.minLat,t.bbox.maxLon,t.bbox.maxLat],isLoading:r.isIndexing,realSampleCounts:t.realSampleDistribution||{},onCellStatusChange:h,quadtreeCells:t.quadtreeCells||[],useQuadtree:(t.quadtreeCells||[]).length>0,indexingStatus:t.indexingStatus,gridCells:t.gridCells||[]}),r.isCompleted&&n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.success.main,.05),border:`1px solid ${a.alpha(e.palette.success.main,.2)}`,borderRadius:2}},n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",mb:2}},n.createElement(pn,{sx:{fontSize:32,color:e.palette.success.main,mr:2}}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600,color:e.palette.success.main}},"Indexing Completed Successfully!")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"All grid cells have been processed. You can now proceed to the Mapping step to configure how OSM data should be mapped to your dataset fields.")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mt:3,background:a.alpha(e.palette.warning.main,.02),border:`1px solid ${a.alpha(e.palette.warning.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary}},"Indexing Controls"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3}},"Control the indexing process. Start indexing to begin downloading OSM data for each geographic region."),r.hasExistingIndex&&n.createElement(a.Box,{sx:{mb:3,p:2,bgcolor:a.alpha(e.palette.info.main,.05),borderRadius:1,border:`1px solid ${a.alpha(e.palette.info.main,.2)}`}},n.createElement(a.Typography,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1,mb:2}},n.createElement("span",null,"ℹ️"),n.createElement("strong",null,"Existing index loaded!")," You can continue with this index or drop it to start fresh."),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:2}},"Grid cells: ",t.gridCells.length," | Status:"," ",t.indexingStatus," | Quadtree cells:"," ",t.quadtreeCells.length),n.createElement(a.Button,{onClick:_,startIcon:n.createElement(Mo,null),variant:"outlined",size:"small",sx:{borderColor:e.palette.error.main,color:e.palette.error.main,"&:hover":{borderColor:e.palette.error.dark,color:e.palette.error.dark}}},"Drop Index")),(!t.gridCells||t.gridCells.length===0)&&n.createElement(a.Alert,{severity:"warning",sx:{mb:3}},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null,"Grid not calculated yet."),' Please go back to the Index Configuration step and click "Calculate Sample Distribution" to create the indexing grid before starting indexing.')),n.createElement(a.Box,{sx:{mb:3}},n.createElement(a.FormControl,{component:"fieldset"},n.createElement(a.FormLabel,{component:"legend",sx:{mb:1,fontWeight:600}},"Execution Mode"),n.createElement(a.RadioGroup,{row:!0,value:m,onChange:E=>v(E.target.value)},n.createElement(a.FormControlLabel,{value:"immediate",control:n.createElement(a.Radio,null),label:"Immediate (Local)"}),n.createElement(a.FormControlLabel,{value:"delegated",control:n.createElement(a.Radio,null),label:"Delegated (Remote)"})),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},m==="immediate"?"Runs locally with real-time progress updates":"Runs on remote worker with better resource management"))),n.createElement(a.Stack,{direction:"row",spacing:2,sx:{mb:3}},n.createElement(a.Button,{onClick:b,disabled:!t.bbox||r.isIndexing||!t.gridCells||t.gridCells.length===0,startIcon:n.createElement("span",null,"▶️"),variant:"contained",color:"success",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},r.isIndexing?"Indexing...":!t.gridCells||t.gridCells.length===0?"Calculate Grid First":r.hasExistingIndex?"Resume Indexing":"Start Indexing"),n.createElement(a.Button,{onClick:x,disabled:!r.isIndexing,startIcon:n.createElement("span",null,"⏸️"),variant:"outlined",color:"warning",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Pause"),n.createElement(a.Button,{onClick:p,disabled:!r.isFailed,startIcon:n.createElement("span",null,"🔄"),variant:"outlined",color:"info",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Retry"),n.createElement(a.Button,{onClick:y,disabled:!r.isIndexing,startIcon:n.createElement("span",null,"❌"),variant:"outlined",color:"error",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Cancel & Clear")))):n.createElement(a.Paper,{elevation:1,sx:{p:4,textAlign:"center",background:a.alpha(e.palette.grey[100],.5),border:`2px dashed ${e.palette.grey[300]}`}},n.createElement(Po,{sx:{fontSize:48,color:e.palette.warning.main,mb:2}}),n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"Configuration Required"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3}},"Please complete the Index Configuration step first to set geographic boundaries before you can start indexing."),n.createElement(a.Button,{variant:"outlined",color:"warning",onClick:_,startIcon:n.createElement(qe,null),sx:{textTransform:"none",fontWeight:600}},"Clear All Metageo State")),n.createElement(ic,{open:c,onClose:M,cellId:d||""}))}function cc(){const[e,t]=n.useState([]),[r,o]=n.useState(!1),[s,i]=n.useState(null),[l,d]=n.useState(!1),u=Oe(),c=n.useCallback(async()=>{var f,m,v,b,x,p,y,_;if(console.log("🔍 useOsmTags: loadOsmTags called"),!u){console.log("🔍 useOsmTags: Client not available"),i("Client not available"),o(!1);return}try{console.log("🔍 useOsmTags: Setting loading to true"),o(!0),i(null),console.log("🔍 useOsmTags: Calling client.get_available_osm_tags()");const h=await u.get_available_osm_tags();console.log("🔍 useOsmTags: Result received:",h),console.log("🔍 useOsmTags: result.result:",h==null?void 0:h.result),console.log("🔍 useOsmTags: result.result.status:",(f=h==null?void 0:h.result)==null?void 0:f.status),console.log("🔍 useOsmTags: result.result.tags:",(m=h==null?void 0:h.result)==null?void 0:m.tags),((v=h==null?void 0:h.result)==null?void 0:v.status)==="success"&&h.result.tags?(console.log("🔍 useOsmTags: Success - setting tags:",h.result.tags),t(h.result.tags),d(!0)):((b=h==null?void 0:h.result)==null?void 0:b.status)==="no_index"?(console.log("🔍 useOsmTags: No index found"),i(((x=h==null?void 0:h.result)==null?void 0:x.message)||"No completed index found. Please complete the indexing step first."),t([]),d(!0)):((p=h==null?void 0:h.result)==null?void 0:p.status)==="error"?(console.log("🔍 useOsmTags: Backend error"),i(((y=h==null?void 0:h.result)==null?void 0:y.message)||"Failed to load OSM tags"),t([]),d(!0)):(console.log("🔍 useOsmTags: Unknown status - result:",h),console.log("🔍 useOsmTags: Unknown status - result.result:",h==null?void 0:h.result),i(((_=h==null?void 0:h.result)==null?void 0:_.message)||"Failed to load OSM tags"),t([]),d(!0))}catch(h){console.error("🔍 useOsmTags: Exception:",h),i(h instanceof Error?h.message:"Failed to load OSM tags"),t([]),d(!0)}finally{console.log("🔍 useOsmTags: Setting loading to false"),o(!1)}},[u]);return n.useEffect(()=>{u&&!l&&!r&&(console.log("🔍 useOsmTags: Auto-loading OSM tags on mount"),c())},[u,l,r]),{osmTags:e,loading:r,error:s,hasLoaded:l,refetch:c}}function uc(e){const[t,r]=n.useState(null),[o,s]=n.useState(!0),[i,l]=n.useState(null),d=Oe(),u=async()=>{if(!d){l("Client not available"),s(!1);return}try{s(!0),l(null);const f=(await d.get_dataset_info()).result;if(console.log("🔍 useDatasetInfo: Backend result =",f),(f==null?void 0:f.status)==="success"){const m={is_grouped:f.is_grouped,group_field:f.group_field,slices:f.slices||[],dataset_name:f.dataset_name,total_samples:f.total_samples};console.log("🔍 useDatasetInfo: Setting dataset info =",m),r(m)}else l((f==null?void 0:f.message)||"Failed to load dataset info")}catch(c){l(c instanceof Error?c.message:"Unknown error")}finally{s(!1)}};return n.useEffect(()=>{console.log("🔍 useDatasetInfo: useEffect triggered, calling loadDatasetInfo"),u()},[e]),{datasetInfo:t,loading:o,error:i,refetch:u}}const dc=[{value:"string",label:"String",description:"Text values"},{value:"int",label:"Integer",description:"Whole numbers"},{value:"float",label:"Float",description:"Decimal numbers"},{value:"bool",label:"Boolean",description:"True/False values"},{value:"enum",label:"Enum",description:"Categorical values"}];function pc({fieldMappings:e,osmTags:t,onAddMapping:r,onUpdateMapping:o,onRemoveMapping:s}){var $;const i=a.useTheme(),l=Oe(),[d,u]=n.useState(!1),[c,f]=n.useState(null),[m,v]=n.useState([]);n.useEffect(()=>{(async()=>{var F;if(l)try{const k=await l.get_field_mappings();((F=k==null?void 0:k.result)==null?void 0:F.status)==="success"&&v(k.result.used_field_names||[])}catch(k){console.error("Error loading field mappings:",k)}})()},[l,e]);const[b,x]=n.useState({osmKey:"",fieldName:"",fieldType:"string",boolTrueValue:"yes",boolFalseValues:"false, no",enumMappings:{},defaultValue:"",description:"",distance:100}),p=C=>{if(C!==void 0){const F=e[C];x({osmKey:F.osmKey,fieldName:F.fieldName,fieldType:F.fieldType,boolTrueValue:F.boolTrueValue||"yes",boolFalseValues:F.boolFalseValues||"false, no",enumMappings:F.enumMappings||{},defaultValue:F.defaultValue||"",description:F.description||"",distance:F.distance||100}),f(C)}else x({osmKey:"",fieldName:"",fieldType:"string",boolTrueValue:"yes",boolFalseValues:"false, no",enumMappings:{},defaultValue:"",description:"",distance:100}),f(null);u(!0)},y=()=>{u(!1),f(null)},_=()=>{const C={id:c!==null?e[c].id:`mapping_${Date.now()}`,osmKey:b.osmKey,fieldName:b.fieldName,fieldType:b.fieldType,boolTrueValue:b.fieldType==="bool"?b.boolTrueValue:void 0,boolFalseValues:b.fieldType==="bool"?b.boolFalseValues:void 0,enumMappings:b.fieldType==="enum"?b.enumMappings:void 0,defaultValue:b.defaultValue||void 0,description:b.description||void 0,distance:b.distance};c!==null?o(c,C):r(C),y()},h=()=>{x(C=>({...C,enumMappings:{...C.enumMappings,"":""}}))},M=(C,F,k)=>{x(D=>{const A={...D.enumMappings};return delete A[C],A[F]=k,{...D,enumMappings:A}})},E=C=>{x(F=>{const k={...F.enumMappings};return delete k[C],{...F,enumMappings:k}})},P=C=>({building:["yes","house","apartments","commercial","industrial"],highway:["primary","secondary","residential","footway","cycleway"],amenity:["restaurant","school","hospital","bank","fuel"],landuse:["residential","commercial","industrial","forest","farmland"],natural:["water","wood","grassland","scrub","bare_rock"],leisure:["park","playground","sports_centre","swimming_pool","golf_course"],shop:["supermarket","bakery","clothes","electronics","books"],tourism:["hotel","museum","attraction","information","guest_house"]})[C]||[];return n.createElement(a.Box,null,n.createElement(a.Stack,{spacing:2},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Field Mappings (",e.length,")"),n.createElement(a.Button,{variant:"contained",startIcon:n.createElement(Vn,null),onClick:()=>p(),size:"small"},"Add Mapping")),e.length===0?n.createElement(a.Alert,{severity:"info",sx:{mb:2}},'No field mappings configured. Click "Add Mapping" to create your first mapping.'):n.createElement(a.Stack,{spacing:1},e.map((C,F)=>n.createElement(a.Paper,{key:C.id,elevation:1,sx:{p:2,border:`1px solid ${a.alpha(i.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Box,{sx:{flex:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Chip,{label:C.osmKey,size:"small",color:"primary",variant:"outlined"}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"→"),n.createElement(a.Chip,{label:C.fieldName,size:"small",color:"secondary",variant:"outlined"}),n.createElement(a.Chip,{label:C.fieldType,size:"small",color:"default",variant:"filled"})),C.description&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"}},C.description)),n.createElement(a.Stack,{direction:"row",spacing:1},n.createElement(a.Tooltip,{title:"Edit mapping"},n.createElement(a.IconButton,{size:"small",onClick:()=>p(F)},n.createElement(Oo,{fontSize:"small"}))),n.createElement(a.Tooltip,{title:"Delete mapping"},n.createElement(a.IconButton,{size:"small",onClick:()=>s(F),color:"error"},n.createElement(qe,{fontSize:"small"}))))))))),n.createElement(a.Dialog,{open:d,onClose:y,maxWidth:"md",fullWidth:!0},n.createElement(a.DialogTitle,null,c!==null?"Edit Field Mapping":"Add Field Mapping"),n.createElement(a.DialogContent,null,n.createElement(a.Stack,{spacing:3,sx:{mt:1}},n.createElement(a.Autocomplete,{freeSolo:!0,options:t.map(C=>C.key),value:b.osmKey,onChange:(C,F)=>{const k=F||"";x(D=>({...D,osmKey:k,fieldName:k}))},renderInput:C=>n.createElement(a.TextField,{...C,label:"OSM Tag Key",placeholder:"e.g., building, highway, amenity",helperText:`The OSM tag key to map from (${t.length} available tags)`,required:!0}),renderOption:(C,F)=>{const k=t.find(D=>D.key===F);return n.createElement(a.Box,{component:"li",...C},n.createElement(a.Box,{sx:{width:"100%"}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5}},n.createElement(a.Typography,{variant:"body2",sx:{fontWeight:500}},F),k&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},k.count," features")),k&&k.examples&&k.examples.length>0&&n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},k.examples.slice(0,3).map((D,A)=>n.createElement(a.Chip,{key:A,label:D,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20,"& .MuiChip-label":{px:.5}}})),k.examples.length>3&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"}},"+",k.examples.length-3," more"))))}}),n.createElement(a.TextField,{label:"Dataset Field Name",value:b.fieldName,onChange:C=>x(F=>({...F,fieldName:C.target.value})),placeholder:"e.g., building_type, road_type",helperText:"The field name in your FiftyOne dataset",required:!0,error:m.includes(b.fieldName)&&b.fieldName!=="",InputProps:{endAdornment:m.includes(b.fieldName)&&b.fieldName!==""?n.createElement(a.Tooltip,{title:"This field name is already used"},n.createElement(ko,{color:"error",fontSize:"small"})):null}}),m.includes(b.fieldName)&&b.fieldName!==""&&n.createElement(a.Alert,{severity:"error",size:"small"},'Field name "',b.fieldName,'" is already used in another mapping.'),n.createElement(a.FormControl,{fullWidth:!0},n.createElement(a.InputLabel,null,"Field Type"),n.createElement(a.Select,{value:b.fieldType,onChange:C=>x(F=>({...F,fieldType:C.target.value})),label:"Field Type"},dc.map(C=>n.createElement(a.MenuItem,{key:C.value,value:C.value},n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"body2",sx:{fontWeight:500}},C.label),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},C.description)))))),b.fieldType==="bool"&&n.createElement(a.Stack,{spacing:2},n.createElement(a.Typography,{variant:"subtitle2"},"Boolean Mapping"),n.createElement(a.Stack,{direction:"row",spacing:2},n.createElement(a.TextField,{label:"True Value",value:b.boolTrueValue,onChange:C=>x(F=>({...F,boolTrueValue:C.target.value})),helperText:"OSM value that maps to true",size:"small"}),n.createElement(a.TextField,{label:"False Values",value:b.boolFalseValues,onChange:C=>x(F=>({...F,boolFalseValues:C.target.value})),helperText:"Comma-separated list of OSM values that map to false (case-insensitive)",placeholder:"false, no, off, 0",size:"small"}))),b.fieldType==="enum"&&n.createElement(a.Stack,{spacing:2},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Typography,{variant:"subtitle2"},"Enum Mappings"),n.createElement(a.Button,{size:"small",startIcon:n.createElement(Vn,null),onClick:h},"Add Mapping")),n.createElement(a.Stack,{spacing:1},Object.entries(b.enumMappings).map(([C,F])=>n.createElement(a.Stack,{key:C,direction:"row",spacing:1,alignItems:"center"},n.createElement(a.TextField,{label:"OSM Value",value:C,onChange:k=>M(C,k.target.value,F),size:"small",sx:{flex:1}}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"→"),n.createElement(a.TextField,{label:"Dataset Value",value:F,onChange:k=>M(C,C,k.target.value),size:"small",sx:{flex:1}}),n.createElement(a.IconButton,{size:"small",onClick:()=>E(C),color:"error"},n.createElement(qe,{fontSize:"small"}))))),b.osmKey&&n.createElement(a.Alert,{severity:"info"},n.createElement(a.Typography,{variant:"body2"},"Common values for ",n.createElement("strong",null,b.osmKey),":"," ",P(b.osmKey).join(", ")))),n.createElement(a.TextField,{label:"Default Value",value:b.defaultValue,onChange:C=>x(F=>({...F,defaultValue:C.target.value})),helperText:"Value to use when OSM tag is not found",placeholder:"e.g., unknown, null, 0"}),n.createElement(a.TextField,{label:"Distance Threshold (meters)",type:"number",value:b.distance,onChange:C=>x(F=>({...F,distance:parseFloat(C.target.value)||100})),helperText:"OSM tag will only be mapped to the sample if the OSM feature is within this distance threshold from the sample's location. This ensures spatial relevance of the mapped data.",inputProps:{min:1,max:1e4,step:1},required:!0}),n.createElement(a.TextField,{label:"Description",value:b.description,onChange:C=>x(F=>({...F,description:C.target.value})),helperText:"Optional description for documentation",multiline:!0,rows:2}))),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:y},"Cancel"),n.createElement(a.Button,{onClick:_,variant:"contained",disabled:!b.osmKey||!b.fieldName||m.includes(b.fieldName)&&(c===null||(($=e[c])==null?void 0:$.fieldName)!==b.fieldName)},c!==null?"Update":"Add"," Mapping"))))}function fc({tagMappings:e,osmTags:t,onAddMapping:r,onUpdateMapping:o,onRemoveMapping:s}){var M;const i=a.useTheme(),l=Oe(),[d,u]=n.useState(!1),[c,f]=n.useState(null),[m,v]=n.useState([]);n.useEffect(()=>{(async()=>{var P;if(l)try{const $=await l.get_field_mappings();((P=$==null?void 0:$.result)==null?void 0:P.status)==="success"&&v($.result.used_field_names||[])}catch($){console.error("Error loading field mappings:",$)}})()},[l,e]);const[b,x]=n.useState({osmKey:"",fieldName:"",boolFalseValues:"false, no",distance:100}),p=E=>{if(E!==void 0){const P=e[E];x({osmKey:P.osmKey,fieldName:P.fieldName,boolFalseValues:P.boolFalseValues||"false, no",distance:P.distance||100}),f(E)}else x({osmKey:"",fieldName:"",boolFalseValues:"false, no",distance:100}),f(null);u(!0)},y=()=>{u(!1),f(null)},_=()=>{const E={osmKey:b.osmKey,fieldName:b.fieldName,fieldType:"bool",boolFalseValues:b.boolFalseValues,distance:b.distance};c!==null?o(c,E):r(E),y()},h=E=>{const P=t.find($=>$.key===E);return(P==null?void 0:P.examples)||[]};return n.createElement(a.Box,null,n.createElement(a.Stack,{spacing:2},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Tag Mappings (",e.length,")"),n.createElement(a.Button,{variant:"contained",startIcon:n.createElement(Vn,null),onClick:()=>p(),size:"small"},"Add Tag Mapping")),e.length===0?n.createElement(a.Alert,{severity:"info",sx:{mb:2}},'No tag mappings configured. Click "Add Tag Mapping" to create your first mapping.'):n.createElement(a.Stack,{spacing:1},e.map((E,P)=>n.createElement(a.Paper,{key:`${E.osmKey}-${E.fieldName}-${P}`,elevation:1,sx:{p:2,border:`1px solid ${a.alpha(i.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Box,{sx:{flex:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Chip,{label:E.osmKey,size:"small",color:"primary",variant:"outlined"}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"→"),n.createElement(a.Chip,{label:E.fieldName,size:"small",color:"secondary",variant:"outlined"}),n.createElement(a.Chip,{label:"Tag",size:"small",color:"success",variant:"filled"}),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"Skip tagging for: ",E.boolFalseValues),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"Distance: ",E.distance||100,"m"))),n.createElement(a.Stack,{direction:"row",spacing:1},n.createElement(a.Tooltip,{title:"Edit mapping"},n.createElement(a.IconButton,{size:"small",onClick:()=>p(P)},n.createElement(Oo,{fontSize:"small"}))),n.createElement(a.Tooltip,{title:"Delete mapping"},n.createElement(a.IconButton,{size:"small",onClick:()=>s(P),color:"error"},n.createElement(qe,{fontSize:"small"}))))))))),n.createElement(a.Dialog,{open:d,onClose:y,maxWidth:"md",fullWidth:!0},n.createElement(a.DialogTitle,null,c!==null?"Edit Tag Mapping":"Add Tag Mapping"),n.createElement(a.DialogContent,null,n.createElement(a.Stack,{spacing:3,sx:{mt:1}},n.createElement(a.Autocomplete,{freeSolo:!0,options:t.map(E=>E.key),value:b.osmKey,onChange:(E,P)=>{const $=P||"";x(C=>({...C,osmKey:$,fieldName:$}))},renderInput:E=>n.createElement(a.TextField,{...E,label:"OSM Tag Key",placeholder:"e.g., building, highway, amenity",helperText:"The OSM tag key to map from",required:!0}),renderOption:(E,P)=>{const $=t.find(C=>C.key===P);return n.createElement(a.Box,{component:"li",...E},n.createElement(a.Box,{sx:{width:"100%"}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5}},n.createElement(a.Typography,{variant:"body2",sx:{fontWeight:500}},P),$&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},$.count," features")),$&&$.examples&&$.examples.length>0&&n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},$.examples.slice(0,3).map((C,F)=>n.createElement(a.Chip,{key:F,label:C,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20,"& .MuiChip-label":{px:.5}}})),$.examples.length>3&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"}},"+",$.examples.length-3," more"))))}}),n.createElement(a.TextField,{label:"Sample Field Name",value:b.fieldName,onChange:E=>x(P=>({...P,fieldName:E.target.value})),placeholder:"e.g., has_building, road_type, amenity_type",helperText:"The field name where the tag value will be stored on samples",required:!0,error:m.includes(b.fieldName)&&b.fieldName!=="",InputProps:{endAdornment:m.includes(b.fieldName)&&b.fieldName!==""?n.createElement(a.Tooltip,{title:"This field name is already used"},n.createElement(ko,{color:"error",fontSize:"small"})):null}}),m.includes(b.fieldName)&&b.fieldName!==""&&n.createElement(a.Alert,{severity:"error",size:"small"},'Field name "',b.fieldName,'" is already used in another mapping.'),n.createElement(a.Stack,{spacing:2},n.createElement(a.Typography,{variant:"subtitle2"},"Tag Configuration"),n.createElement(a.Alert,{severity:"info"},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null,"How it works:")," If the OSM tag is present on a sample, the sample will be ",n.createElement("strong",null,"tagged"),'. If the OSM tag value matches any of the "False Values" below, the sample will ',n.createElement("strong",null,"NOT be tagged"),". All other OSM tag values will result in the sample being ",n.createElement("strong",null,"tagged"),".")),n.createElement(a.TextField,{label:"False Values",value:b.boolFalseValues,onChange:E=>x(P=>({...P,boolFalseValues:E.target.value})),helperText:"Comma-separated list of OSM tag values that will prevent the sample from being tagged (case-insensitive)",placeholder:"false, no, off, 0",fullWidth:!0}),n.createElement(a.TextField,{label:"Distance Threshold (meters)",type:"number",value:b.distance,onChange:E=>x(P=>({...P,distance:Number(E.target.value)})),helperText:"Only OSM nodes within this distance from the sample will be considered for tagging",inputProps:{min:1,max:1e4},fullWidth:!0}),b.osmKey&&n.createElement(a.Alert,{severity:"info"},n.createElement(a.Typography,{variant:"body2"},"Example values for ",n.createElement("strong",null,b.osmKey),":"," ",h(b.osmKey).join(", ")))))),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:y},"Cancel"),n.createElement(a.Button,{onClick:_,variant:"contained",disabled:!b.osmKey||!b.fieldName||m.includes(b.fieldName)&&(c===null||((M=e[c])==null?void 0:M.fieldName)!==b.fieldName)},c!==null?"Update":"Add"," Mapping"))))}function gc(){const e=a.useTheme(),{state:t,actions:r}=ht(),{osmTags:o,loading:s,error:i,hasLoaded:l}=cc(),{datasetInfo:d,refetch:u}=uc();return n.useEffect(()=>{console.log("🔍 MappingStep: Component mounted, forcing dataset info refresh"),u()},[]),Oe(),n.createElement(a.Box,{sx:{maxWidth:1200,mx:"auto",p:3}},n.createElement(a.Typography,{variant:"h4",sx:{mb:4,fontWeight:600}},"Step 3: Mapping Configuration"),n.createElement(a.Typography,{variant:"body1",sx:{mb:4,color:"text.secondary"}},"Configure how OpenStreetMap data should be mapped to your dataset. You can create 3D detections, tag samples, map OSM tags to fields, and include metadata."),n.createElement(a.Paper,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a.alpha(e.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Global Distance Threshold")),n.createElement(a.TextField,{label:"Default Distance Threshold (meters)",type:"number",value:t.globalDistanceThreshold,onChange:c=>r.setGlobalDistanceThreshold(parseFloat(c.target.value)||100),helperText:"Default distance threshold for all OSM tag mappings. Individual mappings can override this value. OSM tags will only be mapped to samples if the OSM feature is within this distance from the sample's location.",inputProps:{min:1,max:1e4,step:1},fullWidth:!0})),n.createElement(a.Box,{sx:{mb:3,display:"flex",justifyContent:"flex-end"}},n.createElement(a.Button,{variant:"outlined",color:"warning",startIcon:n.createElement(qe,null),onClick:r.clearMappingConfig,sx:{minWidth:200}},"Clear Configuration")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(Hn,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Available OSM Tags"),s&&n.createElement(a.Typography,{variant:"caption",color:"primary"},"Loading...")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},"OSM tags from your indexed data are automatically loaded to help configure mappings."),i&&n.createElement(a.Alert,{severity:"error",sx:{mb:2}},"Error: ",i),o.length>0&&n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"body2",sx:{mb:1}},"Found ",o.length," OSM tags:"),n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1}},o.slice(0,20).map(c=>n.createElement(a.Chip,{key:c.key,label:`${c.key} (${c.count})`,size:"small",color:"primary",variant:"outlined"})),o.length>20&&n.createElement(a.Chip,{label:`+${o.length-20} more`,size:"small",color:"default",variant:"outlined"}))),o.length===0&&!s&&!i&&l&&n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"No OSM tags found. Please complete the indexing step first."),o.length===0&&!s&&!i&&!l&&n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Loading OSM tags...")),!1,n.createElement(a.Paper,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a.alpha(e.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Sample Tagging")),n.createElement(a.FormControlLabel,{control:n.createElement(a.Switch,{checked:t.enableSampleTagging,onChange:c=>r.setEnableSampleTagging(c.target.checked)}),label:"Enable sample tagging",sx:{mb:2}}),t.enableSampleTagging&&n.createElement(a.Stack,{spacing:3},d!=null&&d.is_grouped?n.createElement(a.FormControl,{fullWidth:!0},n.createElement(a.InputLabel,null,"Tag Slice"),n.createElement(a.Select,{value:t.tagSlice,onChange:c=>r.setTagSlice(c.target.value),label:"Tag Slice"},d.slices.map(c=>n.createElement(a.MenuItem,{key:c,value:c},c))),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1}},"Select the slice where tags will be stored")):n.createElement(a.Alert,{severity:"info",sx:{mb:2}},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null,"Note:")," Tag slice selection is only available for grouped datasets. Your current dataset is not grouped, so tags will be stored at the sample level.")),n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"subtitle2",sx:{mb:2}},"OSM Tag Mappings"),n.createElement(a.Alert,{severity:"info",sx:{mb:2}},'Configure which OSM tags should be used for sample tagging. For example, map "building=yes" to a boolean field.'),n.createElement(fc,{tagMappings:t.tagMappings,osmTags:o,onAddMapping:r.addTagMapping,onUpdateMapping:r.updateTagMapping,onRemoveMapping:r.removeTagMapping})))),n.createElement(a.Paper,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a.alpha(e.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Field Mapping")),n.createElement(a.FormControlLabel,{control:n.createElement(a.Switch,{checked:t.enableFieldMapping,onChange:c=>r.setEnableFieldMapping(c.target.checked)}),label:"Enable field mapping",sx:{mb:2}}),t.enableFieldMapping&&n.createElement(pc,{fieldMappings:t.fieldMappings,osmTags:o,onAddMapping:r.addFieldMapping,onUpdateMapping:r.updateFieldMapping,onRemoveMapping:r.removeFieldMapping})),n.createElement(a.Paper,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a.alpha(e.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Metadata")),n.createElement(a.FormControlLabel,{control:n.createElement(a.Switch,{checked:t.includeAllTagsAsMetadata,onChange:c=>r.setIncludeAllTagsAsMetadata(c.target.checked)}),label:"Include all OSM tags as metadata",sx:{mb:2}}),t.includeAllTagsAsMetadata&&n.createElement(a.Stack,{spacing:2},n.createElement(a.TextField,{label:"Metadata Field Name",value:t.metadataFieldName,onChange:c=>r.setMetadataFieldName(c.target.value),placeholder:"e.g., osm_metadata, tags, properties",helperText:"The field name where all OSM tags will be stored as metadata",fullWidth:!0}),n.createElement(a.TextField,{label:"Distance Threshold (meters)",type:"number",value:t.metadataDistanceThreshold,onChange:c=>r.setMetadataDistanceThreshold(parseFloat(c.target.value)||100),helperText:"OSM tags will only be included as metadata if the OSM feature is within this distance threshold from the sample's location. This ensures spatial relevance of the metadata.",inputProps:{min:1,max:1e4,step:1},fullWidth:!0}))),n.createElement(a.Box,{sx:{display:"flex",justifyContent:"flex-end",mt:3}},n.createElement(a.Button,{variant:"outlined",color:"error",onClick:()=>r.resetMapping()},"Reset Configuration")))}const Ft=pe.atom({key:"enrichmentState",default:{enrichmentId:null,status:"idle",totalSamples:0,processedSamples:0,failedSamples:0,progress:0,startedAt:null,completedAt:null,error:null}});function mc(){console.log("🔍 useEnrichmentState: Hook starting...");let e,t;try{[e,t]=pe.useRecoilState(Ft)}catch(s){return console.error("🔍 useEnrichmentState: Error accessing atom:",s),{state:{enrichmentId:null,status:"idle",totalSamples:0,processedSamples:0,failedSamples:0,progress:0,startedAt:null,completedAt:null,error:null},actions:{startEnrichment:()=>{},cancelEnrichment:()=>{},resetEnrichment:()=>{},loadCurrentEnrichmentState:()=>{}}}}console.log("🔍 useEnrichmentState: enrichmentState =",e);const r=Oe();console.log("🔍 useEnrichmentState: client =",r);const o=n.useMemo(()=>({startEnrichment:async(s,i)=>{if(console.log("🔍 useEnrichmentState: Starting enrichment",s,i),!r){console.error("🔍 useEnrichmentState: No client available");return}try{await r.watch_enrichment({enrichment_id:s,total_samples:i}),console.log("🔍 useEnrichmentState: Enrichment started successfully")}catch(l){console.error("🔍 useEnrichmentState: Error starting enrichment:",l),t(d=>({...d,status:"failed",error:l instanceof Error?l.message:String(l)}))}},cancelEnrichment:async()=>{if(console.log("🔍 useEnrichmentState: Cancelling enrichment"),!r){console.error("🔍 useEnrichmentState: No client available");return}try{await r.cancel_enrichment(),t(s=>({...s,status:"cancelled",completedAt:new Date().toISOString()})),console.log("🔍 useEnrichmentState: Enrichment cancelled successfully")}catch(s){console.error("🔍 useEnrichmentState: Error cancelling enrichment:",s)}},resetEnrichment:()=>{console.log("🔍 useEnrichmentState: Resetting enrichment state"),t({enrichmentId:null,status:"idle",totalSamples:0,processedSamples:0,failedSamples:0,progress:0,startedAt:null,completedAt:null,error:null})},loadCurrentEnrichmentState:async()=>{var s;if(console.log("🔍 useEnrichmentState: Loading current enrichment state"),!r){console.error("🔍 useEnrichmentState: No client available");return}try{const i=await r.get_enrichment_status();if(console.log("🔍 useEnrichmentState: Backend enrichment status:",i),((s=i==null?void 0:i.result)==null?void 0:s.status)==="success"&&i.result.enrichment_job){const l=i.result.enrichment_job;t(d=>({...d,enrichmentId:l.get("enrichment_id")||null,status:l.get("status")||"idle",totalSamples:l.get("total_samples")||0,processedSamples:l.get("processed_samples")||0,failedSamples:l.get("failed_samples")||0,progress:l.get("progress_percent")||0,startedAt:l.get("started_at")||null,completedAt:l.get("completed_at")||null,error:l.get("error")||null}))}}catch(i){console.error("🔍 useEnrichmentState: Error loading enrichment state:",i)}},updateEnrichmentProgress:s=>{console.log("🔍 useEnrichmentState: Updating enrichment progress:",s),t(i=>({...i,...s}))}}),[r,t]);return n.useEffect(()=>{console.log("🔍 useEnrichmentState: useEffect triggered, loading current state"),o.loadCurrentEnrichmentState()},[]),{state:e,actions:o}}function hc(){const{state:e}=ht(),t=Oe(),{state:r,actions:o}=mc(),[s,i]=n.useState(!1),[l,d]=n.useState(!1),[u,c]=n.useState("immediate"),f=()=>{const x=new Set;return e.enableSampleTagging&&e.tagMappings.forEach(p=>{p.fieldName&&x.add(p.fieldName)}),e.enableFieldMapping&&e.fieldMappings.forEach(p=>{p.fieldName&&x.add(p.fieldName)}),e.includeAllTagsAsMetadata&&x.add(e.metadataFieldName||"osm_metadata"),e.enable3DDetections&&x.add(e.detectionFieldName||"detections"),Array.from(x)},m=()=>{const x=[];return e.enableSampleTagging&&e.tagMappings.forEach(p=>{p.fieldName&&x.push({name:p.fieldName,type:p.fieldType||"string",category:"Sample Tagging",description:`OSM tag "${p.osmKey}" → ${p.fieldType||"string"} field`,enabled:!0})}),e.enableFieldMapping&&e.fieldMappings.forEach(p=>{p.fieldName&&x.push({name:p.fieldName,type:p.fieldType||"string",category:"Field Mapping",description:`OSM tag "${p.osmKey}" → ${p.fieldType||"string"} field`,enabled:!0})}),e.includeAllTagsAsMetadata&&x.push({name:e.metadataFieldName||"osm_metadata",type:"list",category:"Metadata",description:"All OSM features from the grid cell",enabled:!0}),e.enable3DDetections&&x.push({name:e.detectionFieldName||"detections",type:"list",category:"3D Detections",description:`3D detections using "${e.detectionLabelTag||"type"}" tag`,enabled:!0}),x},v=async()=>{var x,p;if(!(!t||s)){i(!0);try{const y=await t.clear_enrichment_data();((x=y==null?void 0:y.result)==null?void 0:x.status)==="success"?console.log("Enrichment data cleared successfully:",y.result.message):console.error("Failed to clear enrichment data:",(p=y==null?void 0:y.result)==null?void 0:p.message)}catch(y){console.error("Error clearing enrichment data:",y)}finally{i(!1),d(!1)}}},b=async()=>{var x,p;if(t)try{await t.save_mapping_config({mapping_config:e});const y=await t.enrich_dataset_async({execution_mode:u});if(((x=y==null?void 0:y.result)==null?void 0:x.status)==="success"){const _=y.result.enrichment_id||`enrichment_${Date.now()}`,h=y.result.total_samples||0;await o.startEnrichment(_,h),console.log("Enrichment started successfully")}else console.error("Failed to start enrichment:",(p=y==null?void 0:y.result)==null?void 0:p.message)}catch(y){console.error("Error starting enrichment:",y)}};return n.createElement(a.Box,{sx:{p:3}},n.createElement(a.Typography,{variant:"h5",sx:{mb:3,fontWeight:600}},"Step 4: Dataset Enrichment"),n.createElement(a.Typography,{variant:"body1",sx:{mb:3,color:"text.secondary"}},"Apply your mapping configuration to enrich the dataset with OpenStreetMap data. This process runs asynchronously and supports multi-dashboard environments."),n.createElement(a.Box,{sx:{mb:3,display:"flex",justifyContent:"flex-end"}},n.createElement(a.Button,{variant:"outlined",color:"info",startIcon:s?n.createElement(a.CircularProgress,{size:20}):n.createElement(qe,null),onClick:()=>d(!0),disabled:s,sx:{minWidth:200}},s?"Clearing...":"Clear Enrichment Data")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Dataset Enrichment")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3}},"Start the enrichment process to apply your mapping configuration to the dataset. This process runs asynchronously and supports multi-dashboard environments."),m().length>0&&n.createElement(a.Alert,{severity:"info",sx:{mb:3}},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null,"Ready to enrich ",m().length," field",m().length!==1?"s":"")," ","across your dataset. Each sample will be enriched with OpenStreetMap data based on its geographic location and your configured mappings.")),n.createElement(a.Paper,{elevation:0,sx:{p:2,mb:3,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.02)"}},n.createElement(a.Typography,{variant:"subtitle2",sx:{mb:2,fontWeight:600}},"📋 Enrichment Preview"),m().length>0?n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},"The following fields will be populated in your dataset:"),Object.entries(m().reduce((x,p)=>(x[p.category]||(x[p.category]=[]),x[p.category].push(p),x),{})).map(([x,p])=>n.createElement(a.Box,{key:x,sx:{mb:2}},n.createElement(a.Typography,{variant:"caption",sx:{fontWeight:600,color:"primary.main",display:"block",mb:1}},x),n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1,ml:1}},p.map((y,_)=>n.createElement(a.Chip,{key:_,label:`${y.name} (${y.type})`,color:"primary",variant:"filled",size:"small",title:y.description}))))),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"}},"💡 Hover over field chips to see detailed mapping information")):n.createElement(a.Alert,{severity:"info",sx:{mb:0}},"No enrichment fields are configured. Please go back to the Mapping step to configure field mappings.")),m().length>0&&n.createElement(a.Box,{sx:{mb:3}},n.createElement(a.FormControl,{component:"fieldset"},n.createElement(a.FormLabel,{component:"legend",sx:{mb:1,fontWeight:600}},"Execution Mode"),n.createElement(a.RadioGroup,{row:!0,value:u,onChange:x=>c(x.target.value)},n.createElement(a.FormControlLabel,{value:"immediate",control:n.createElement(a.Radio,null),label:"Immediate (Local)"}),n.createElement(a.FormControlLabel,{value:"delegated",control:n.createElement(a.Radio,null),label:"Delegated (Remote)"})),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},u==="immediate"?"Runs locally with real-time progress updates":"Runs on remote worker with better resource management"))),n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Button,{variant:"contained",onClick:b,disabled:r.status==="running"||m().length===0,sx:{minWidth:200}},r.status==="running"?"Enrichment Running...":m().length===0?"No Fields Configured":"Start Enrichment"),r.status==="running"&&n.createElement(a.Box,{sx:{flex:1}},n.createElement(a.Typography,{variant:"body2",color:"primary",sx:{mb:1}},"Enrichment in progress... ",r.processedSamples,"/",r.totalSamples," samples processed (",r.progress.toFixed(1),"%)"),n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(a.CircularProgress,{size:20}),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},r.failedSamples>0&&`${r.failedSamples} failed`))),r.status==="completed"&&n.createElement(a.Alert,{severity:"success",sx:{flex:1}},"Dataset enrichment completed successfully!"," ",r.processedSamples," samples processed.",r.failedSamples>0&&` ${r.failedSamples} samples failed.`),r.status==="failed"&&n.createElement(a.Alert,{severity:"error",sx:{flex:1}},"Dataset enrichment failed:"," ",r.error||"Unknown error"),r.status==="cancelled"&&n.createElement(a.Alert,{severity:"warning",sx:{flex:1}},"Dataset enrichment was cancelled."))),n.createElement(a.Dialog,{open:l,onClose:()=>!s&&d(!1),maxWidth:"sm",fullWidth:!0},n.createElement(a.DialogTitle,null,n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(qe,{color:"warning"}),"Confirm Clear Enrichment Data")),n.createElement(a.DialogContent,null,n.createElement(a.Typography,{variant:"body1",sx:{mb:2}},"This action will permanently delete all enrichment data from the following fields:"),f().length>0?n.createElement(a.Box,{sx:{mb:2}},f().map((x,p)=>n.createElement(a.Chip,{key:p,label:x,color:"primary",variant:"outlined",size:"small",sx:{mr:1,mb:1}}))):n.createElement(a.Alert,{severity:"info",sx:{mb:2}},"No enrichment fields are currently configured. Nothing will be cleared."),n.createElement(a.Alert,{severity:"warning",sx:{mt:2}},n.createElement("strong",null,"Warning:")," This action cannot be undone. All data in these fields will be permanently removed from your dataset.")),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:()=>d(!1),disabled:s},"Cancel"),n.createElement(a.Button,{onClick:v,color:"error",variant:"contained",disabled:s||f().length===0,startIcon:s?n.createElement(a.CircularProgress,{size:20}):n.createElement(qe,null)},s?"Clearing...":"Clear Data"))))}function yc(){const{state:e}=ht(),t=()=>{const s=[];if(e.enableSampleTagging&&e.tagMappings.forEach(i=>{if(i.fieldName){const l=i.fieldName,d=i.fieldType||"string";d==="bool"?(s.push({title:`Find samples with ${l} = true`,description:`Samples where the ${i.osmKey} OSM tag was found and converted to true`,query:`${l} == True`,category:"Sample Tagging"}),s.push({title:`Find samples with ${l} = false`,description:`Samples where the ${i.osmKey} OSM tag was found and converted to false`,query:`${l} == False`,category:"Sample Tagging"})):d==="string"?(s.push({title:`Find samples with specific ${l} value`,description:`Samples where ${i.osmKey} has a specific value`,query:`${l} == "residential"`,category:"Sample Tagging"}),s.push({title:`Find samples with any ${l} value`,description:`Samples where ${i.osmKey} has any value (not null)`,query:`${l} != None`,category:"Sample Tagging"})):(d==="int"||d==="float")&&s.push({title:`Find samples with ${l} > threshold`,description:`Samples where ${i.osmKey} has a numeric value above threshold`,query:`${l} > 5`,category:"Sample Tagging"})}}),e.enableFieldMapping&&e.fieldMappings.forEach(i=>{if(i.fieldName){const l=i.fieldName,d=i.fieldType||"string";s.push({title:`Find samples with ${l} data`,description:`Samples where ${i.osmKey} was mapped to ${l}`,query:`${l} != None`,category:"Field Mapping"}),d==="string"&&s.push({title:`Find samples with ${l} containing text`,description:`Samples where ${l} contains specific text`,query:`${l}.contains("school")`,category:"Field Mapping"})}}),e.includeAllTagsAsMetadata){const i=e.metadataFieldName||"osm_metadata";s.push({title:"Find samples with OSM metadata",description:"Samples that have OSM metadata from the enrichment process",query:`${i} != None`,category:"Metadata"}),s.push({title:"Find samples with specific OSM tag in metadata",description:"Samples where the metadata contains a specific OSM tag",query:`${i}.apply(lambda x: any(tag.get("amenity") == "school" for tag in x if isinstance(tag, dict)))`,category:"Metadata"})}if(e.enable3DDetections){const i=e.detectionFieldName||"detections";s.push({title:"Find samples with 3D detections",description:"Samples that have 3D detections from OSM data",query:`${i} != None`,category:"3D Detections"}),s.push({title:"Find samples with specific detection types",description:"Samples with detections of a specific type",query:`${i}.apply(lambda x: any(d.get("label") == "building" for d in x) if x else False)`,category:"3D Detections"})}return s},r=s=>{navigator.clipboard.writeText(s)},o=t();return n.createElement(a.Box,{sx:{p:3}},n.createElement(a.Typography,{variant:"h5",sx:{mb:3,fontWeight:600}},"Step 5: Search & Cleanup"),n.createElement(a.Typography,{variant:"body1",sx:{mb:3,color:"text.secondary"}},"Use the enriched OSM data to search for specific samples in your dataset. Copy the example queries below and use them in the FiftyOne sidebar to find samples that match your criteria."),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(Wl,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Search Examples")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3}},"Use these example queries in the FiftyOne sidebar to search for samples based on your enriched OSM data."),o.length>0?n.createElement(a.Box,null,Object.entries(o.reduce((s,i)=>(s[i.category]||(s[i.category]=[]),s[i.category].push(i),s),{})).map(([s,i],l)=>n.createElement(a.Box,{key:s,sx:{mb:3}},n.createElement(a.Typography,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"primary.main"}},s),i.map((d,u)=>n.createElement(a.Paper,{key:u,elevation:0,sx:{p:2,mb:2,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.02)"}},n.createElement(a.Stack,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:1}},n.createElement(a.Typography,{variant:"subtitle2",sx:{fontWeight:600}},d.title),n.createElement(a.Tooltip,{title:"Copy query to clipboard"},n.createElement(a.IconButton,{size:"small",onClick:()=>r(d.query),sx:{ml:1}},n.createElement(Nl,{fontSize:"small"})))),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},d.description),n.createElement(a.Paper,{elevation:0,sx:{p:1.5,backgroundColor:"rgba(0, 0, 0, 0.05)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:1,fontFamily:"monospace",fontSize:"0.875rem"}},n.createElement("code",null,d.query)))))),n.createElement(a.Alert,{severity:"info",sx:{mt:3}},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null,"💡 Tip:")," Copy any query above and paste it into the FiftyOne sidebar filter box. You can also combine multiple conditions using ",n.createElement("code",null,"&")," (and) or ",n.createElement("code",null,"|")," (or) operators."))):n.createElement(a.Alert,{severity:"info"},n.createElement(a.Typography,{variant:"body2"},"No search examples available. Please complete the mapping configuration in previous steps to see search examples."))))}const bc=["Index Configuration","Indexing","Mapping","Enrich","Search & Cleanup"];function xc(){const e=a.useTheme(),{state:t,actions:r,derived:o}=Jn(),s=n.useRef(!1);return console.log("🔍 MetageoView render: state =",t,"derived =",o),n.useEffect(()=>{s.current||(console.log("🔍 MetageoView: useEffect triggered, calling loadCurrentIndexingState"),s.current=!0,r.loadCurrentIndexingState().then(i=>{console.log("🔍 MetageoView: loadCurrentIndexingState result:",i),i!=null&&i.success&&(i!=null&&i.hasExistingIndex)?console.log("🔍 MetageoView: Found existing index, should show indexing step"):console.log("🔍 MetageoView: No existing index found")}).catch(i=>{console.error("🔍 MetageoView: Error loading current indexing state:",i)}))},[]),n.useEffect(()=>{t.activeStep===0&&!t.hasStarted&&(s.current=!1,console.log("🔍 MetageoView: Reset detected, reloading state..."),r.loadCurrentIndexingState().then(i=>{console.log("🔍 MetageoView: State reloaded after reset:",i)}).catch(i=>{console.error("🔍 MetageoView: Error reloading state after reset:",i)}))},[t.activeStep,t.hasStarted]),t.isLoadingState?n.createElement(a.Box,null,n.createElement(a.Paper,{elevation:1,sx:{p:6,textAlign:"center",borderRadius:2,backgroundColor:e.palette.background.paper}},n.createElement(a.Typography,{variant:"h6",gutterBottom:!0},"Loading Metageo Configuration..."),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Please wait while we check for existing indexing data."))):!t.hasStarted&&!o.hasExistingIndex?(console.log("🔍 MetageoView: Showing Configuration Required - hasStarted =",t.hasStarted,"hasExistingIndex =",o.hasExistingIndex),n.createElement(a.Box,null,n.createElement(a.Paper,{elevation:1,sx:{p:6,textAlign:"center",background:`linear-gradient(135deg, ${a.alpha(e.palette.primary.main,.05)} 0%, ${a.alpha(e.palette.secondary.main,.05)} 100%)`,border:`1px solid ${a.alpha(e.palette.primary.main,.1)}`,borderRadius:3}},n.createElement(a.Typography,{variant:"h3",sx:{mb:3,fontWeight:700,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},"Welcome to Metageo"),n.createElement(a.Typography,{variant:"h6",sx:{mb:4,color:e.palette.text.secondary,fontWeight:400,lineHeight:1.6}},"Enrich your datasets with OpenStreetMap data using intelligent geographic indexing"),n.createElement(a.Button,{onClick:r.start,variant:"contained",size:"large",startIcon:n.createElement(Bl,null),sx:{px:6,py:2,borderRadius:3,fontSize:"1.2rem",fontWeight:600,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.primary.dark})`,"&:hover":{background:`linear-gradient(135deg, ${e.palette.primary.dark}, ${e.palette.primary.main})`}}},"Get Started"),n.createElement(a.Box,{sx:{mt:4,display:"flex",justifyContent:"center",gap:3}},n.createElement(a.Box,{sx:{textAlign:"center"}},n.createElement(a.Typography,{variant:"h4",sx:{color:e.palette.primary.main,fontWeight:600}},"🗺️"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Geographic Indexing")),n.createElement(a.Box,{sx:{textAlign:"center"}},n.createElement(a.Typography,{variant:"h4",sx:{color:e.palette.secondary.main,fontWeight:600}},"🔍"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"OSM Integration")),n.createElement(a.Box,{sx:{textAlign:"center"}},n.createElement(a.Typography,{variant:"h4",sx:{color:e.palette.success.main,fontWeight:600}},"⚡"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Real-time Updates")))))):n.createElement(a.Box,null,n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:4,background:`linear-gradient(135deg, ${a.alpha(e.palette.primary.main,.05)} 0%, ${a.alpha(e.palette.secondary.main,.05)} 100%)`,border:`1px solid ${a.alpha(e.palette.primary.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h4",sx:{mb:1,fontWeight:700,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},"Metageo"),n.createElement(a.Typography,{variant:"body1",color:"text.secondary"},"OpenStreetMap Data Enrichment for FiftyOne")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:4,background:a.alpha(e.palette.background.paper,.8),border:`1px solid ${a.alpha(e.palette.divider,.2)}`,borderRadius:2}},n.createElement(a.Stepper,{activeStep:o.effectiveStep,alternativeLabel:!0},bc.map((i,l)=>n.createElement(a.Step,{key:i},n.createElement(a.StepLabel,{sx:{"& .MuiStepLabel-label":{fontSize:"0.875rem",fontWeight:500}}},i))))),n.createElement(a.Box,{sx:{mb:4}},o.effectiveStep===ae.INDEX_CONFIGURATION&&n.createElement(ac,null),o.effectiveStep===ae.INDEXING&&n.createElement(lc,null),o.effectiveStep===ae.MAPPING&&n.createElement(gc,null),o.effectiveStep===ae.ENRICH&&n.createElement(hc,null),o.effectiveStep===ae.SEARCH_CLEANUP&&n.createElement(yc,null)),n.createElement(a.Paper,{elevation:1,sx:{p:3,background:a.alpha(e.palette.background.paper,.9),border:`1px solid ${a.alpha(e.palette.divider,.2)}`,borderRadius:2}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Button,{onClick:r.back,disabled:!o.canGoBack,startIcon:n.createElement(Dl,null),variant:"outlined",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Back"),n.createElement(a.Box,{sx:{display:"flex",gap:2}},n.createElement(a.Button,{onClick:r.startOver,startIcon:n.createElement("span",null,"🔄"),variant:"outlined",color:"warning",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Start Over"),n.createElement(a.Button,{onClick:r.next,disabled:!o.canGoNext,endIcon:n.createElement(Ll,null),variant:"contained",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Next")))))}class vc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"indexing_started",label:"Indexing Started",unlisted:!0})}useHooks(){return{setIndexingState:pe.useSetRecoilState(mt)}}async execute({hooks:t,params:r}){const{indexing_id:o,total_cells:s,active_cells:i,status:l}=r;console.log("IndexingStartedOperator: Indexing started",{indexing_id:o,total_cells:s,active_cells:i}),t.setIndexingState(d=>({...d,indexingStatus:"running"}))}}class Ec extends Q.Operator{get config(){return new Q.OperatorConfig({name:"cell_status_update",label:"Cell Status Update",unlisted:!0})}useHooks(){const[t,r]=pe.useRecoilState(mt);return{indexingState:t,setIndexingState:r}}async execute({hooks:t,params:r}){const{cell_id:o,status:s,progress:i,osm_features:l,error:d}=r;console.log(`CellStatusUpdateOperator: Updating cell ${o} to status ${s} with ${l} features`),t.setIndexingState(u=>{const c=u.gridCells.map(f=>f.id===o?{...f,status:s,progress:i||0,error:d||void 0,osm_features:l?[l]:void 0}:f);return{...u,gridCells:c}})}}class Sc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"indexing_progress",label:"Indexing Progress",unlisted:!0})}useHooks(){return{setIndexingState:pe.useSetRecoilState(mt)}}async execute({hooks:t,params:r}){const{indexing_id:o,completed_cells:s,failed_cells:i,total_cells:l,total_features:d,progress:u}=r;console.log("IndexingProgressOperator: Progress update",{indexing_id:o,completed_cells:s,failed_cells:i,total_cells:l,total_features:d,progress:u})}}class Cc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"indexing_completed",label:"Indexing Completed",unlisted:!0})}useHooks(){return{setIndexingState:pe.useSetRecoilState(mt)}}async execute({hooks:t,params:r}){const{indexing_id:o,completed_cells:s,failed_cells:i,total_cells:l,total_features:d,status:u}=r;console.log("IndexingCompletedOperator: Indexing completed",{indexing_id:o,completed_cells:s,failed_cells:i,total_cells:l,total_features:d,status:u}),t.setIndexingState(c=>({...c,indexingStatus:"completed"}))}}class Tc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"grid_indexing_completed",label:"Grid Indexing Completed",unlisted:!0})}useHooks(){return{setIndexingState:pe.useSetRecoilState(mt)}}async execute({hooks:t,params:r}){const{indexing_id:o,completed_cells:s,failed_cells:i,rate_limited_cells:l,total_features:d,status:u}=r;console.log("GridIndexingCompletedOperator: Grid indexing completed!"),console.log("Completed cells:",s),console.log("Failed cells:",i),console.log("Rate limited cells:",l),console.log("Total features:",d),t.setIndexingState(c=>({...c,indexingStatus:"completed"}))}}class _c extends Q.Operator{get config(){return new Q.OperatorConfig({name:"update_enrichment_state",label:"Update Enrichment State",unlisted:!0})}useHooks(){return{setEnrichmentState:pe.useSetRecoilState(Ft)}}async execute({hooks:t,params:r}){const{enrichment_id:o,status:s,total_samples:i,processed_samples:l,failed_samples:d,progress:u,error:c}=r;console.log("🔍 UpdateEnrichmentStateOperator: Updating enrichment state",{enrichment_id:o,status:s,total_samples:i,processed_samples:l,failed_samples:d,progress:u,error:c}),t.setEnrichmentState(f=>({...f,enrichmentId:o||f.enrichmentId,status:s||f.status,totalSamples:i!==void 0?i:f.totalSamples,processedSamples:l!==void 0?l:f.processedSamples,failedSamples:d!==void 0?d:f.failedSamples,progress:u!==void 0?u:f.progress,startedAt:s==="running"&&!f.startedAt?new Date().toISOString():f.startedAt,completedAt:s==="completed"||s==="failed"||s==="cancelled"?new Date().toISOString():f.completedAt,error:c||null}))}}class wc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"enrichment_started",label:"Enrichment Started",unlisted:!0})}useHooks(){return{setEnrichmentState:pe.useSetRecoilState(Ft)}}async execute({hooks:t,params:r}){const{enrichment_id:o,total_samples:s,status:i}=r;console.log("🔍 EnrichmentStartedOperator: Enrichment started",{enrichment_id:o,total_samples:s}),t.setEnrichmentState(l=>({...l,enrichmentId:o,status:"running",totalSamples:s,processedSamples:0,failedSamples:0,progress:0,startedAt:new Date().toISOString(),completedAt:null,error:null}))}}class Mc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"enrichment_progress",label:"Enrichment Progress",unlisted:!0})}useHooks(){return{setEnrichmentState:pe.useSetRecoilState(Ft)}}async execute({hooks:t,params:r}){const{enrichment_id:o,processed_samples:s,failed_samples:i,total_samples:l,progress:d}=r;console.log("🔍 EnrichmentProgressOperator: Progress update",{enrichment_id:o,processed_samples:s,failed_samples:i,total_samples:l,progress:d}),t.setEnrichmentState(u=>({...u,processedSamples:s!==void 0?s:u.processedSamples,failedSamples:i!==void 0?i:u.failedSamples,totalSamples:l!==void 0?l:u.totalSamples,progress:d!==void 0?d:u.progress}))}}class Oc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"enrichment_completed",label:"Enrichment Completed",unlisted:!0})}useHooks(){return{setEnrichmentState:pe.useSetRecoilState(Ft)}}async execute({hooks:t,params:r}){const{enrichment_id:o,processed_samples:s,failed_samples:i,total_samples:l,status:d,error:u}=r;console.log("🔍 EnrichmentCompletedOperator: Enrichment completed",{enrichment_id:o,processed_samples:s,failed_samples:i,total_samples:l,status:d,error:u}),t.setEnrichmentState(c=>({...c,status:d,processedSamples:s!==void 0?s:c.processedSamples,failedSamples:i!==void 0?i:c.failedSamples,totalSamples:l!==void 0?l:c.totalSamples,progress:d==="completed"?100:c.progress,completedAt:new Date().toISOString(),error:u||null}))}}function Ic(){try{Q.registerOperator(vc,"@voxel51/metageo"),Q.registerOperator(Ec,"@voxel51/metageo"),Q.registerOperator(Sc,"@voxel51/metageo"),Q.registerOperator(Cc,"@voxel51/metageo"),Q.registerOperator(Tc,"@voxel51/metageo"),Q.registerOperator(_c,"@voxel51/metageo"),Q.registerOperator(wc,"@voxel51/metageo"),Q.registerOperator(Mc,"@voxel51/metageo"),Q.registerOperator(Oc,"@voxel51/metageo"),console.log("Metageo operators registered successfully")}catch(e){console.error("Error registering Metageo operators:",e)}}Ic(),De.registerComponent({name:"MetageoView",label:"Metageo",component:xc,type:De.PluginComponentType.Component,activator:()=>!0})});
//# sourceMappingURL=index.umd.js.map
