(function(De,Q){typeof exports=="object"&&typeof module<"u"?Q(require("@fiftyone/plugins"),require("@fiftyone/operators"),require("react"),require("@mui/material"),require("recoil")):typeof define=="function"&&define.amd?define(["@fiftyone/plugins","@fiftyone/operators","react","@mui/material","recoil"],Q):(De=typeof globalThis<"u"?globalThis:De||self,Q(De.__fop__,De.__foo__,De.React,De.__mui__,De.recoil))})(this,function(De,Q,n,a,pe){"use strict";function qo(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const r in e)if(r!=="default"){const o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>e[r]})}}return t.default=e,Object.freeze(t)}const R=qo(n);function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)({}).hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},ee.apply(null,arguments)}function Ze(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function or(e){if(R.isValidElement(e)||!Ze(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=or(e[r])}),t}function Re(e,t,r={clone:!0}){const o=r.clone?ee({},e):e;return Ze(e)&&Ze(t)&&Object.keys(t).forEach(s=>{R.isValidElement(t[s])?o[s]=t[s]:Ze(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&Ze(e[s])?o[s]=Re(e[s],t[s],r):r.clone?o[s]=Ze(t[s])?or(t[s]):t[s]:o[s]=t[s]}),o}function Ko(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ue(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),r}var ar={exports:{}},sr={exports:{}},ne={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,y=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,f=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,O=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function w(_){return typeof _=="string"||typeof _=="function"||_===o||_===c||_===i||_===s||_===h||_===y||typeof _=="object"&&_!==null&&(_.$$typeof===x||_.$$typeof===m||_.$$typeof===l||_.$$typeof===d||_.$$typeof===p||_.$$typeof===v||_.$$typeof===O||_.$$typeof===b||_.$$typeof===f)}function C(_){if(typeof _=="object"&&_!==null){var We=_.$$typeof;switch(We){case t:var Fe=_.type;switch(Fe){case u:case c:case o:case i:case s:case h:return Fe;default:var ze=Fe&&Fe.$$typeof;switch(ze){case d:case p:case x:case m:case l:return ze;default:return We}}case r:return We}}}var $=u,A=c,S=d,T=l,P=t,k=p,F=o,U=x,E=m,M=r,L=i,z=s,N=h,Y=!1;function W(_){return Y||(Y=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),B(_)||C(_)===u}function B(_){return C(_)===c}function V(_){return C(_)===d}function K(_){return C(_)===l}function H(_){return typeof _=="object"&&_!==null&&_.$$typeof===t}function ve(_){return C(_)===p}function be(_){return C(_)===o}function we(_){return C(_)===x}function Qe(_){return C(_)===m}function Ke(_){return C(_)===r}function Je(_){return C(_)===i}function Xe(_){return C(_)===s}function Dt(_){return C(_)===h}ne.AsyncMode=$,ne.ConcurrentMode=A,ne.ContextConsumer=S,ne.ContextProvider=T,ne.Element=P,ne.ForwardRef=k,ne.Fragment=F,ne.Lazy=U,ne.Memo=E,ne.Portal=M,ne.Profiler=L,ne.StrictMode=z,ne.Suspense=N,ne.isAsyncMode=W,ne.isConcurrentMode=B,ne.isContextConsumer=V,ne.isContextProvider=K,ne.isElement=H,ne.isForwardRef=ve,ne.isFragment=be,ne.isLazy=we,ne.isMemo=Qe,ne.isPortal=Ke,ne.isProfiler=Je,ne.isStrictMode=Xe,ne.isSuspense=Dt,ne.isValidElementType=w,ne.typeOf=C})(),sr.exports=ne;var ir=sr.exports;/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var lr=Object.getOwnPropertySymbols,Xo=Object.prototype.hasOwnProperty,Qo=Object.prototype.propertyIsEnumerable;function Jo(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Zo(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var o=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(o.join("")!=="0123456789")return!1;var s={};return"abcdefghijklmnopqrst".split("").forEach(function(i){s[i]=i}),Object.keys(Object.assign({},s)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var Ro=Zo()?Object.assign:function(e,t){for(var r,o=Jo(e),s,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var l in r)Xo.call(r,l)&&(o[l]=r[l]);if(lr){s=lr(r);for(var d=0;d<s.length;d++)Qo.call(r,s[d])&&(o[s[d]]=r[s[d]])}}return o},ea="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cr=ea,ur=Function.call.bind(Object.prototype.hasOwnProperty),yn=function(){};{var ta=cr,bn={},na=ur;yn=function(e){var t="Warning: "+e;typeof console<"u"&&console.error(t);try{throw new Error(t)}catch{}}}function dr(e,t,r,o,s){for(var i in e)if(na(e,i)){var l;try{if(typeof e[i]!="function"){var d=Error((o||"React class")+": "+r+" type `"+i+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[i]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw d.name="Invariant Violation",d}l=e[i](t,i,o,r,null,ta)}catch(c){l=c}if(l&&!(l instanceof Error)&&yn((o||"React class")+": type specification of "+r+" `"+i+"` is invalid; the type checker function must return `null` or an `Error` but returned a "+typeof l+". You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument)."),l instanceof Error&&!(l.message in bn)){bn[l.message]=!0;var u=s?s():"";yn("Failed "+r+" type: "+l.message+(u??""))}}}dr.resetWarningCache=function(){bn={}};var ra=dr,oa=ir,aa=Ro,et=cr,xn=ur,pr=ra,tt=function(){};tt=function(e){var t="Warning: "+e;typeof console<"u"&&console.error(t);try{throw new Error(t)}catch{}};function Lt(){return null}var sa=function(e,t){var r=typeof Symbol=="function"&&Symbol.iterator,o="@@iterator";function s(E){var M=E&&(r&&E[r]||E[o]);if(typeof M=="function")return M}var i="<<anonymous>>",l={array:p("array"),bigint:p("bigint"),bool:p("boolean"),func:p("function"),number:p("number"),object:p("object"),string:p("string"),symbol:p("symbol"),any:h(),arrayOf:y,element:m(),elementType:x(),instanceOf:f,node:w(),objectOf:O,oneOf:v,oneOfType:b,shape:$,exact:A};function d(E,M){return E===M?E!==0||1/E===1/M:E!==E&&M!==M}function u(E,M){this.message=E,this.data=M&&typeof M=="object"?M:{},this.stack=""}u.prototype=Error.prototype;function c(E){var M={},L=0;function z(Y,W,B,V,K,H,ve){if(V=V||i,H=H||B,ve!==et){if(t){var be=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");throw be.name="Invariant Violation",be}else if(typeof console<"u"){var we=V+":"+B;!M[we]&&L<3&&(tt("You are manually calling a React.PropTypes validation function for the `"+H+"` prop on `"+V+"`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details."),M[we]=!0,L++)}}return W[B]==null?Y?W[B]===null?new u("The "+K+" `"+H+"` is marked as required "+("in `"+V+"`, but its value is `null`.")):new u("The "+K+" `"+H+"` is marked as required in "+("`"+V+"`, but its value is `undefined`.")):null:E(W,B,V,K,H)}var N=z.bind(null,!1);return N.isRequired=z.bind(null,!0),N}function p(E){function M(L,z,N,Y,W,B){var V=L[z],K=P(V);if(K!==E){var H=k(V);return new u("Invalid "+Y+" `"+W+"` of type "+("`"+H+"` supplied to `"+N+"`, expected ")+("`"+E+"`."),{expectedType:E})}return null}return c(M)}function h(){return c(Lt)}function y(E){function M(L,z,N,Y,W){if(typeof E!="function")return new u("Property `"+W+"` of component `"+N+"` has invalid PropType notation inside arrayOf.");var B=L[z];if(!Array.isArray(B)){var V=P(B);return new u("Invalid "+Y+" `"+W+"` of type "+("`"+V+"` supplied to `"+N+"`, expected an array."))}for(var K=0;K<B.length;K++){var H=E(B,K,N,Y,W+"["+K+"]",et);if(H instanceof Error)return H}return null}return c(M)}function m(){function E(M,L,z,N,Y){var W=M[L];if(!e(W)){var B=P(W);return new u("Invalid "+N+" `"+Y+"` of type "+("`"+B+"` supplied to `"+z+"`, expected a single ReactElement."))}return null}return c(E)}function x(){function E(M,L,z,N,Y){var W=M[L];if(!oa.isValidElementType(W)){var B=P(W);return new u("Invalid "+N+" `"+Y+"` of type "+("`"+B+"` supplied to `"+z+"`, expected a single ReactElement type."))}return null}return c(E)}function f(E){function M(L,z,N,Y,W){if(!(L[z]instanceof E)){var B=E.name||i,V=U(L[z]);return new u("Invalid "+Y+" `"+W+"` of type "+("`"+V+"` supplied to `"+N+"`, expected ")+("instance of `"+B+"`."))}return null}return c(M)}function v(E){if(!Array.isArray(E))return arguments.length>1?tt("Invalid arguments supplied to oneOf, expected an array, got "+arguments.length+" arguments. A common mistake is to write oneOf(x, y, z) instead of oneOf([x, y, z])."):tt("Invalid argument supplied to oneOf, expected an array."),Lt;function M(L,z,N,Y,W){for(var B=L[z],V=0;V<E.length;V++)if(d(B,E[V]))return null;var K=JSON.stringify(E,function(ve,be){var we=k(be);return we==="symbol"?String(be):be});return new u("Invalid "+Y+" `"+W+"` of value `"+String(B)+"` "+("supplied to `"+N+"`, expected one of "+K+"."))}return c(M)}function O(E){function M(L,z,N,Y,W){if(typeof E!="function")return new u("Property `"+W+"` of component `"+N+"` has invalid PropType notation inside objectOf.");var B=L[z],V=P(B);if(V!=="object")return new u("Invalid "+Y+" `"+W+"` of type "+("`"+V+"` supplied to `"+N+"`, expected an object."));for(var K in B)if(xn(B,K)){var H=E(B,K,N,Y,W+"."+K,et);if(H instanceof Error)return H}return null}return c(M)}function b(E){if(!Array.isArray(E))return tt("Invalid argument supplied to oneOfType, expected an instance of array."),Lt;for(var M=0;M<E.length;M++){var L=E[M];if(typeof L!="function")return tt("Invalid argument supplied to oneOfType. Expected an array of check functions, but received "+F(L)+" at index "+M+"."),Lt}function z(N,Y,W,B,V){for(var K=[],H=0;H<E.length;H++){var ve=E[H],be=ve(N,Y,W,B,V,et);if(be==null)return null;be.data&&xn(be.data,"expectedType")&&K.push(be.data.expectedType)}var we=K.length>0?", expected one of type ["+K.join(", ")+"]":"";return new u("Invalid "+B+" `"+V+"` supplied to "+("`"+W+"`"+we+"."))}return c(z)}function w(){function E(M,L,z,N,Y){return S(M[L])?null:new u("Invalid "+N+" `"+Y+"` supplied to "+("`"+z+"`, expected a ReactNode."))}return c(E)}function C(E,M,L,z,N){return new u((E||"React class")+": "+M+" type `"+L+"."+z+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+N+"`.")}function $(E){function M(L,z,N,Y,W){var B=L[z],V=P(B);if(V!=="object")return new u("Invalid "+Y+" `"+W+"` of type `"+V+"` "+("supplied to `"+N+"`, expected `object`."));for(var K in E){var H=E[K];if(typeof H!="function")return C(N,Y,W,K,k(H));var ve=H(B,K,N,Y,W+"."+K,et);if(ve)return ve}return null}return c(M)}function A(E){function M(L,z,N,Y,W){var B=L[z],V=P(B);if(V!=="object")return new u("Invalid "+Y+" `"+W+"` of type `"+V+"` "+("supplied to `"+N+"`, expected `object`."));var K=aa({},L[z],E);for(var H in K){var ve=E[H];if(xn(E,H)&&typeof ve!="function")return C(N,Y,W,H,k(ve));if(!ve)return new u("Invalid "+Y+" `"+W+"` key `"+H+"` supplied to `"+N+"`.\nBad object: "+JSON.stringify(L[z],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(E),null,"  "));var be=ve(B,H,N,Y,W+"."+H,et);if(be)return be}return null}return c(M)}function S(E){switch(typeof E){case"number":case"string":case"undefined":return!0;case"boolean":return!E;case"object":if(Array.isArray(E))return E.every(S);if(E===null||e(E))return!0;var M=s(E);if(M){var L=M.call(E),z;if(M!==E.entries){for(;!(z=L.next()).done;)if(!S(z.value))return!1}else for(;!(z=L.next()).done;){var N=z.value;if(N&&!S(N[1]))return!1}}else return!1;return!0;default:return!1}}function T(E,M){return E==="symbol"?!0:M?M["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&M instanceof Symbol:!1}function P(E){var M=typeof E;return Array.isArray(E)?"array":E instanceof RegExp?"object":T(M,E)?"symbol":M}function k(E){if(typeof E>"u"||E===null)return""+E;var M=P(E);if(M==="object"){if(E instanceof Date)return"date";if(E instanceof RegExp)return"regexp"}return M}function F(E){var M=k(E);switch(M){case"array":case"object":return"an "+M;case"boolean":case"date":case"regexp":return"a "+M;default:return M}}function U(E){return!E.constructor||!E.constructor.name?i:E.constructor.name}return l.checkPropTypes=pr,l.resetWarningCache=pr.resetWarningCache,l.PropTypes=l,l};{var ia=ir,la=!0;ar.exports=sa(ia.isElement,la)}var ca=ar.exports;const G=Ko(ca);function Nt(e){if(typeof e!="string")throw new Error("MUI: `capitalize(string)` expects a string argument.");return e.charAt(0).toUpperCase()+e.slice(1)}function ua(e,t,r=void 0){const o={};return Object.keys(e).forEach(s=>{o[s]=e[s].reduce((i,l)=>{if(l){const d=t(l);d!==""&&i.push(d),r&&r[l]&&i.push(r[l])}return i},[]).join(" ")}),o}const fr=e=>e,da=(()=>{let e=fr;return{configure(t){e=t},generate(t){return e(t)},reset(){e=fr}}})(),pa={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function vn(e,t,r="Mui"){const o=pa[t];return o?`${r}-${o}`:`${da.generate(e)}-${t}`}function fa(e,t,r="Mui"){const o={};return t.forEach(s=>{o[s]=vn(e,s,r)}),o}function Ye(e,t){if(e==null)return{};var r={};for(var o in e)if({}.hasOwnProperty.call(e,o)){if(t.indexOf(o)!==-1)continue;r[o]=e[o]}return r}function gr(e){var t,r,o="";if(typeof e=="string"||typeof e=="number")o+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=gr(e[t]))&&(o&&(o+=" "),o+=r)}else for(r in e)e[r]&&(o&&(o+=" "),o+=r);return o}function ga(){for(var e,t,r=0,o="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=gr(e))&&(o&&(o+=" "),o+=t);return o}function En(e,t){const r=ee({},t);return Object.keys(e).forEach(o=>{if(o.toString().match(/^(components|slots)$/))r[o]=ee({},e[o],r[o]);else if(o.toString().match(/^(componentsProps|slotProps)$/)){const s=e[o]||{},i=t[o];r[o]={},!i||!Object.keys(i)?r[o]=s:!s||!Object.keys(s)?r[o]=i:(r[o]=ee({},i),Object.keys(s).forEach(l=>{r[o][l]=En(s[l],i[l])}))}else r[o]===void 0&&(r[o]=e[o])}),r}var mr={exports:{}},jt={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=n,t=Symbol.for("react.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),x=Symbol.iterator,f="@@iterator";function v(g){if(g===null||typeof g!="object")return null;var I=x&&g[x]||g[f];return typeof I=="function"?I:null}var O=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function b(g){{for(var I=arguments.length,D=new Array(I>1?I-1:0),j=1;j<I;j++)D[j-1]=arguments[j];w("error",g,D)}}function w(g,I,D){{var j=O.ReactDebugCurrentFrame,te=j.getStackAddendum();te!==""&&(I+="%s",D=D.concat([te]));var se=D.map(function(X){return String(X)});se.unshift("Warning: "+I),Function.prototype.apply.call(console[g],console,se)}}var C=!1,$=!1,A=!1,S=!1,T=!1,P;P=Symbol.for("react.module.reference");function k(g){return!!(typeof g=="string"||typeof g=="function"||g===o||g===i||T||g===s||g===c||g===p||S||g===m||C||$||A||typeof g=="object"&&g!==null&&(g.$$typeof===y||g.$$typeof===h||g.$$typeof===l||g.$$typeof===d||g.$$typeof===u||g.$$typeof===P||g.getModuleId!==void 0))}function F(g,I,D){var j=g.displayName;if(j)return j;var te=I.displayName||I.name||"";return te!==""?D+"("+te+")":D}function U(g){return g.displayName||"Context"}function E(g){if(g==null)return null;if(typeof g.tag=="number"&&b("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case o:return"Fragment";case r:return"Portal";case i:return"Profiler";case s:return"StrictMode";case c:return"Suspense";case p:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case d:var I=g;return U(I)+".Consumer";case l:var D=g;return U(D._context)+".Provider";case u:return F(g,g.render,"ForwardRef");case h:var j=g.displayName||null;return j!==null?j:E(g.type)||"Memo";case y:{var te=g,se=te._payload,X=te._init;try{return E(X(se))}catch{return null}}}return null}var M=Object.assign,L=0,z,N,Y,W,B,V,K;function H(){}H.__reactDisabledLog=!0;function ve(){{if(L===0){z=console.log,N=console.info,Y=console.warn,W=console.error,B=console.group,V=console.groupCollapsed,K=console.groupEnd;var g={configurable:!0,enumerable:!0,value:H,writable:!0};Object.defineProperties(console,{info:g,log:g,warn:g,error:g,group:g,groupCollapsed:g,groupEnd:g})}L++}}function be(){{if(L--,L===0){var g={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:M({},g,{value:z}),info:M({},g,{value:N}),warn:M({},g,{value:Y}),error:M({},g,{value:W}),group:M({},g,{value:B}),groupCollapsed:M({},g,{value:V}),groupEnd:M({},g,{value:K})})}L<0&&b("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}}var we=O.ReactCurrentDispatcher,Qe;function Ke(g,I,D){{if(Qe===void 0)try{throw Error()}catch(te){var j=te.stack.trim().match(/\n( *(at )?)/);Qe=j&&j[1]||""}return`
`+Qe+g}}var Je=!1,Xe;{var Dt=typeof WeakMap=="function"?WeakMap:Map;Xe=new Dt}function _(g,I){if(!g||Je)return"";{var D=Xe.get(g);if(D!==void 0)return D}var j;Je=!0;var te=Error.prepareStackTrace;Error.prepareStackTrace=void 0;var se;se=we.current,we.current=null,ve();try{if(I){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(Ge){j=Ge}Reflect.construct(g,[],X)}else{try{X.call()}catch(Ge){j=Ge}g.call(X.prototype)}}else{try{throw Error()}catch(Ge){j=Ge}g()}}catch(Ge){if(Ge&&j&&typeof Ge.stack=="string"){for(var q=Ge.stack.split(`
`),Ce=j.stack.split(`
`),he=q.length-1,xe=Ce.length-1;he>=1&&xe>=0&&q[he]!==Ce[xe];)xe--;for(;he>=1&&xe>=0;he--,xe--)if(q[he]!==Ce[xe]){if(he!==1||xe!==1)do if(he--,xe--,xe<0||q[he]!==Ce[xe]){var $e=`
`+q[he].replace(" at new "," at ");return g.displayName&&$e.includes("<anonymous>")&&($e=$e.replace("<anonymous>",g.displayName)),typeof g=="function"&&Xe.set(g,$e),$e}while(he>=1&&xe>=0);break}}}finally{Je=!1,we.current=se,be(),Error.prepareStackTrace=te}var bt=g?g.displayName||g.name:"",Ho=bt?Ke(bt):"";return typeof g=="function"&&Xe.set(g,Ho),Ho}function We(g,I,D){return _(g,!1)}function Fe(g){var I=g.prototype;return!!(I&&I.isReactComponent)}function ze(g,I,D){if(g==null)return"";if(typeof g=="function")return _(g,Fe(g));if(typeof g=="string")return Ke(g);switch(g){case c:return Ke("Suspense");case p:return Ke("SuspenseList")}if(typeof g=="object")switch(g.$$typeof){case u:return We(g.render);case h:return ze(g.type,I,D);case y:{var j=g,te=j._payload,se=j._init;try{return ze(se(te),I,D)}catch{}}}return""}var mn=Object.prototype.hasOwnProperty,$o={},Fo=O.ReactDebugCurrentFrame;function hn(g){if(g){var I=g._owner,D=ze(g.type,g._source,I?I.type:null);Fo.setExtraStackFrame(D)}else Fo.setExtraStackFrame(null)}function Pc(g,I,D,j,te){{var se=Function.call.bind(mn);for(var X in g)if(se(g,X)){var q=void 0;try{if(typeof g[X]!="function"){var Ce=Error((j||"React class")+": "+D+" type `"+X+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof g[X]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw Ce.name="Invariant Violation",Ce}q=g[X](I,X,j,D,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(he){q=he}q&&!(q instanceof Error)&&(hn(te),b("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",j||"React class",D,X,typeof q),hn(null)),q instanceof Error&&!(q.message in $o)&&($o[q.message]=!0,hn(te),b("Failed %s type: %s",D,q.message),hn(null))}}}var Ac=Array.isArray;function er(g){return Ac(g)}function $c(g){{var I=typeof Symbol=="function"&&Symbol.toStringTag,D=I&&g[Symbol.toStringTag]||g.constructor.name||"Object";return D}}function Fc(g){try{return Do(g),!1}catch{return!0}}function Do(g){return""+g}function Lo(g){if(Fc(g))return b("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",$c(g)),Do(g)}var No=O.ReactCurrentOwner,Dc={key:!0,ref:!0,__self:!0,__source:!0},jo,zo;function Lc(g){if(mn.call(g,"ref")){var I=Object.getOwnPropertyDescriptor(g,"ref").get;if(I&&I.isReactWarning)return!1}return g.ref!==void 0}function Nc(g){if(mn.call(g,"key")){var I=Object.getOwnPropertyDescriptor(g,"key").get;if(I&&I.isReactWarning)return!1}return g.key!==void 0}function jc(g,I){typeof g.ref=="string"&&No.current}function zc(g,I){{var D=function(){jo||(jo=!0,b("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",I))};D.isReactWarning=!0,Object.defineProperty(g,"key",{get:D,configurable:!0})}}function Bc(g,I){{var D=function(){zo||(zo=!0,b("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",I))};D.isReactWarning=!0,Object.defineProperty(g,"ref",{get:D,configurable:!0})}}var Wc=function(g,I,D,j,te,se,X){var q={$$typeof:t,type:g,key:I,ref:D,props:X,_owner:se};return q._store={},Object.defineProperty(q._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(q,"_self",{configurable:!1,enumerable:!1,writable:!1,value:j}),Object.defineProperty(q,"_source",{configurable:!1,enumerable:!1,writable:!1,value:te}),Object.freeze&&(Object.freeze(q.props),Object.freeze(q)),q};function Gc(g,I,D,j,te){{var se,X={},q=null,Ce=null;D!==void 0&&(Lo(D),q=""+D),Nc(I)&&(Lo(I.key),q=""+I.key),Lc(I)&&(Ce=I.ref,jc(I,te));for(se in I)mn.call(I,se)&&!Dc.hasOwnProperty(se)&&(X[se]=I[se]);if(g&&g.defaultProps){var he=g.defaultProps;for(se in he)X[se]===void 0&&(X[se]=he[se])}if(q||Ce){var xe=typeof g=="function"?g.displayName||g.name||"Unknown":g;q&&zc(X,xe),Ce&&Bc(X,xe)}return Wc(g,q,Ce,te,j,No.current,X)}}var tr=O.ReactCurrentOwner,Bo=O.ReactDebugCurrentFrame;function yt(g){if(g){var I=g._owner,D=ze(g.type,g._source,I?I.type:null);Bo.setExtraStackFrame(D)}else Bo.setExtraStackFrame(null)}var nr;nr=!1;function rr(g){return typeof g=="object"&&g!==null&&g.$$typeof===t}function Wo(){{if(tr.current){var g=E(tr.current.type);if(g)return`

Check the render method of \``+g+"`."}return""}}function Uc(g){return""}var Go={};function Yc(g){{var I=Wo();if(!I){var D=typeof g=="string"?g:g.displayName||g.name;D&&(I=`

Check the top-level render call using <`+D+">.")}return I}}function Uo(g,I){{if(!g._store||g._store.validated||g.key!=null)return;g._store.validated=!0;var D=Yc(I);if(Go[D])return;Go[D]=!0;var j="";g&&g._owner&&g._owner!==tr.current&&(j=" It was passed a child from "+E(g._owner.type)+"."),yt(g),b('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',D,j),yt(null)}}function Yo(g,I){{if(typeof g!="object")return;if(er(g))for(var D=0;D<g.length;D++){var j=g[D];rr(j)&&Uo(j,I)}else if(rr(g))g._store&&(g._store.validated=!0);else if(g){var te=v(g);if(typeof te=="function"&&te!==g.entries)for(var se=te.call(g),X;!(X=se.next()).done;)rr(X.value)&&Uo(X.value,I)}}}function Vc(g){{var I=g.type;if(I==null||typeof I=="string")return;var D;if(typeof I=="function")D=I.propTypes;else if(typeof I=="object"&&(I.$$typeof===u||I.$$typeof===h))D=I.propTypes;else return;if(D){var j=E(I);Pc(D,g.props,"prop",j,g)}else if(I.PropTypes!==void 0&&!nr){nr=!0;var te=E(I);b("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",te||"Unknown")}typeof I.getDefaultProps=="function"&&!I.getDefaultProps.isReactClassApproved&&b("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}function Hc(g){{for(var I=Object.keys(g.props),D=0;D<I.length;D++){var j=I[D];if(j!=="children"&&j!=="key"){yt(g),b("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",j),yt(null);break}}g.ref!==null&&(yt(g),b("Invalid attribute `ref` supplied to `React.Fragment`."),yt(null))}}function Vo(g,I,D,j,te,se){{var X=k(g);if(!X){var q="";(g===void 0||typeof g=="object"&&g!==null&&Object.keys(g).length===0)&&(q+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports.");var Ce=Uc();Ce?q+=Ce:q+=Wo();var he;g===null?he="null":er(g)?he="array":g!==void 0&&g.$$typeof===t?(he="<"+(E(g.type)||"Unknown")+" />",q=" Did you accidentally export a JSX literal instead of a component?"):he=typeof g,b("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",he,q)}var xe=Gc(g,I,D,te,se);if(xe==null)return xe;if(X){var $e=I.children;if($e!==void 0)if(j)if(er($e)){for(var bt=0;bt<$e.length;bt++)Yo($e[bt],g);Object.freeze&&Object.freeze($e)}else b("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else Yo($e,g)}return g===o?Hc(xe):Vc(xe),xe}}function qc(g,I,D){return Vo(g,I,D,!0)}function Kc(g,I,D){return Vo(g,I,D,!1)}var Xc=Kc,Qc=qc;jt.Fragment=o,jt.jsx=Xc,jt.jsxs=Qc})(),mr.exports=jt;var ie=mr.exports;const ma=R.createContext(void 0);G.node,G.object;function ha(e){const{theme:t,name:r,props:o}=e;if(!t||!t.components||!t.components[r])return o;const s=t.components[r];return s.defaultProps?En(s.defaultProps,o):!s.styleOverrides&&!s.variants?En(s,o):o}function ya({props:e,name:t}){const r=R.useContext(ma);return ha({props:e,name:t,theme:{components:r}})}G.node,G.object.isRequired;function ba(e){return ya(e)}var xt={},hr={exports:{}};(function(e){function t(r){return r&&r.__esModule?r:{default:r}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(hr);var yr=hr.exports,Sn={exports:{}},br;function xr(){return br||(br=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(r){for(var o=1;o<arguments.length;o++){var s=arguments[o];for(var i in s)({}).hasOwnProperty.call(s,i)&&(r[i]=s[i])}return r},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Sn)),Sn.exports}var Cn={exports:{}},vr;function xa(){return vr||(vr=1,function(e){function t(r,o){if(r==null)return{};var s={};for(var i in r)if({}.hasOwnProperty.call(r,i)){if(o.indexOf(i)!==-1)continue;s[i]=r[i]}return s}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Cn)),Cn.exports}function va(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function Ea(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var Sa=function(){function e(r){var o=this;this._insertTag=function(s){var i;o.tags.length===0?o.insertionPoint?i=o.insertionPoint.nextSibling:o.prepend?i=o.container.firstChild:i=o.before:i=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(s,i),o.tags.push(s)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(o){o.forEach(this._insertTag)},t.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Ea(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=va(s);try{i.insertRule(o,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(o));this.ctr++},t.flush=function(){this.tags.forEach(function(o){var s;return(s=o.parentNode)==null?void 0:s.removeChild(o)}),this.tags=[],this.ctr=0},e}(),Se="-ms-",zt="-moz-",J="-webkit-",Er="comm",Tn="rule",_n="decl",Ca="@import",Sr="@keyframes",Ta="@layer",_a=Math.abs,Bt=String.fromCharCode,wa=Object.assign;function Oa(e,t){return Ee(e,0)^45?(((t<<2^Ee(e,0))<<2^Ee(e,1))<<2^Ee(e,2))<<2^Ee(e,3):0}function Cr(e){return e.trim()}function Ma(e,t){return(e=t.exec(e))?e[0]:e}function Z(e,t,r){return e.replace(t,r)}function wn(e,t){return e.indexOf(t)}function Ee(e,t){return e.charCodeAt(t)|0}function vt(e,t,r){return e.slice(t,r)}function Le(e){return e.length}function On(e){return e.length}function Wt(e,t){return t.push(e),e}function Ia(e,t){return e.map(t).join("")}var Gt=1,nt=1,Tr=0,Te=0,ye=0,rt="";function Ut(e,t,r,o,s,i,l){return{value:e,root:t,parent:r,type:o,props:s,children:i,line:Gt,column:nt,length:l,return:""}}function Et(e,t){return wa(Ut("",null,null,"",null,null,0),e,{length:-e.length},t)}function ka(){return ye}function Pa(){return ye=Te>0?Ee(rt,--Te):0,nt--,ye===10&&(nt=1,Gt--),ye}function Oe(){return ye=Te<Tr?Ee(rt,Te++):0,nt++,ye===10&&(nt=1,Gt++),ye}function Ne(){return Ee(rt,Te)}function Yt(){return Te}function St(e,t){return vt(rt,e,t)}function Ct(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function _r(e){return Gt=nt=1,Tr=Le(rt=e),Te=0,[]}function wr(e){return rt="",e}function Vt(e){return Cr(St(Te-1,Mn(e===91?e+2:e===40?e+1:e)))}function Aa(e){for(;(ye=Ne())&&ye<33;)Oe();return Ct(e)>2||Ct(ye)>3?"":" "}function $a(e,t){for(;--t&&Oe()&&!(ye<48||ye>102||ye>57&&ye<65||ye>70&&ye<97););return St(e,Yt()+(t<6&&Ne()==32&&Oe()==32))}function Mn(e){for(;Oe();)switch(ye){case e:return Te;case 34:case 39:e!==34&&e!==39&&Mn(ye);break;case 40:e===41&&Mn(e);break;case 92:Oe();break}return Te}function Fa(e,t){for(;Oe()&&e+ye!==57;)if(e+ye===84&&Ne()===47)break;return"/*"+St(t,Te-1)+"*"+Bt(e===47?e:Oe())}function Da(e){for(;!Ct(Ne());)Oe();return St(e,Te)}function La(e){return wr(Ht("",null,null,null,[""],e=_r(e),0,[0],e))}function Ht(e,t,r,o,s,i,l,d,u){for(var c=0,p=0,h=l,y=0,m=0,x=0,f=1,v=1,O=1,b=0,w="",C=s,$=i,A=o,S=w;v;)switch(x=b,b=Oe()){case 40:if(x!=108&&Ee(S,h-1)==58){wn(S+=Z(Vt(b),"&","&\f"),"&\f")!=-1&&(O=-1);break}case 34:case 39:case 91:S+=Vt(b);break;case 9:case 10:case 13:case 32:S+=Aa(x);break;case 92:S+=$a(Yt()-1,7);continue;case 47:switch(Ne()){case 42:case 47:Wt(Na(Fa(Oe(),Yt()),t,r),u);break;default:S+="/"}break;case 123*f:d[c++]=Le(S)*O;case 125*f:case 59:case 0:switch(b){case 0:case 125:v=0;case 59+p:O==-1&&(S=Z(S,/\f/g,"")),m>0&&Le(S)-h&&Wt(m>32?Mr(S+";",o,r,h-1):Mr(Z(S," ","")+";",o,r,h-2),u);break;case 59:S+=";";default:if(Wt(A=Or(S,t,r,c,p,s,d,w,C=[],$=[],h),i),b===123)if(p===0)Ht(S,t,A,A,C,i,h,d,$);else switch(y===99&&Ee(S,3)===110?100:y){case 100:case 108:case 109:case 115:Ht(e,A,A,o&&Wt(Or(e,A,A,0,0,s,d,w,s,C=[],h),$),s,$,h,d,o?C:$);break;default:Ht(S,A,A,A,[""],$,0,d,$)}}c=p=m=0,f=O=1,w=S="",h=l;break;case 58:h=1+Le(S),m=x;default:if(f<1){if(b==123)--f;else if(b==125&&f++==0&&Pa()==125)continue}switch(S+=Bt(b),b*f){case 38:O=p>0?1:(S+="\f",-1);break;case 44:d[c++]=(Le(S)-1)*O,O=1;break;case 64:Ne()===45&&(S+=Vt(Oe())),y=Ne(),p=h=Le(w=S+=Da(Yt())),b++;break;case 45:x===45&&Le(S)==2&&(f=0)}}return i}function Or(e,t,r,o,s,i,l,d,u,c,p){for(var h=s-1,y=s===0?i:[""],m=On(y),x=0,f=0,v=0;x<o;++x)for(var O=0,b=vt(e,h+1,h=_a(f=l[x])),w=e;O<m;++O)(w=Cr(f>0?y[O]+" "+b:Z(b,/&\f/g,y[O])))&&(u[v++]=w);return Ut(e,t,r,s===0?Tn:d,u,c,p)}function Na(e,t,r){return Ut(e,t,r,Er,Bt(ka()),vt(e,2,-2),0)}function Mr(e,t,r,o){return Ut(e,t,r,_n,vt(e,0,o),vt(e,o+1,-1),o)}function ot(e,t){for(var r="",o=On(e),s=0;s<o;s++)r+=t(e[s],s,e,t)||"";return r}function ja(e,t,r,o){switch(e.type){case Ta:if(e.children.length)break;case Ca:case _n:return e.return=e.return||e.value;case Er:return"";case Sr:return e.return=e.value+"{"+ot(e.children,o)+"}";case Tn:e.value=e.props.join(",")}return Le(r=ot(e.children,o))?e.return=e.value+"{"+r+"}":""}function za(e){var t=On(e);return function(r,o,s,i){for(var l="",d=0;d<t;d++)l+=e[d](r,o,s,i)||"";return l}}function Ba(e){return function(t){t.root||(t=t.return)&&e(t)}}function Ir(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var Wa=function(t,r,o){for(var s=0,i=0;s=i,i=Ne(),s===38&&i===12&&(r[o]=1),!Ct(i);)Oe();return St(t,Te)},Ga=function(t,r){var o=-1,s=44;do switch(Ct(s)){case 0:s===38&&Ne()===12&&(r[o]=1),t[o]+=Wa(Te-1,r,o);break;case 2:t[o]+=Vt(s);break;case 4:if(s===44){t[++o]=Ne()===58?"&\f":"",r[o]=t[o].length;break}default:t[o]+=Bt(s)}while(s=Oe());return t},Ua=function(t,r){return wr(Ga(_r(t),r))},kr=new WeakMap,Ya=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,o=t.parent,s=t.column===o.column&&t.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!kr.get(o))&&!s){kr.set(t,!0);for(var i=[],l=Ua(r,i),d=o.props,u=0,c=0;u<l.length;u++)for(var p=0;p<d.length;p++,c++)t.props[c]=i[u]?l[u].replace(/&\f/g,d[p]):d[p]+" "+l[u]}}},Va=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function Pr(e,t){switch(Oa(e,t)){case 5103:return J+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return J+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return J+e+zt+e+Se+e+e;case 6828:case 4268:return J+e+Se+e+e;case 6165:return J+e+Se+"flex-"+e+e;case 5187:return J+e+Z(e,/(\w+).+(:[^]+)/,J+"box-$1$2"+Se+"flex-$1$2")+e;case 5443:return J+e+Se+"flex-item-"+Z(e,/flex-|-self/,"")+e;case 4675:return J+e+Se+"flex-line-pack"+Z(e,/align-content|flex-|-self/,"")+e;case 5548:return J+e+Se+Z(e,"shrink","negative")+e;case 5292:return J+e+Se+Z(e,"basis","preferred-size")+e;case 6060:return J+"box-"+Z(e,"-grow","")+J+e+Se+Z(e,"grow","positive")+e;case 4554:return J+Z(e,/([^-])(transform)/g,"$1"+J+"$2")+e;case 6187:return Z(Z(Z(e,/(zoom-|grab)/,J+"$1"),/(image-set)/,J+"$1"),e,"")+e;case 5495:case 3959:return Z(e,/(image-set\([^]*)/,J+"$1$`$1");case 4968:return Z(Z(e,/(.+:)(flex-)?(.*)/,J+"box-pack:$3"+Se+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+J+e+e;case 4095:case 3583:case 4068:case 2532:return Z(e,/(.+)-inline(.+)/,J+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Le(e)-1-t>6)switch(Ee(e,t+1)){case 109:if(Ee(e,t+4)!==45)break;case 102:return Z(e,/(.+:)(.+)-([^]+)/,"$1"+J+"$2-$3$1"+zt+(Ee(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~wn(e,"stretch")?Pr(Z(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Ee(e,t+1)!==115)break;case 6444:switch(Ee(e,Le(e)-3-(~wn(e,"!important")&&10))){case 107:return Z(e,":",":"+J)+e;case 101:return Z(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+J+(Ee(e,14)===45?"inline-":"")+"box$3$1"+J+"$2$3$1"+Se+"$2box$3")+e}break;case 5936:switch(Ee(e,t+11)){case 114:return J+e+Se+Z(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return J+e+Se+Z(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return J+e+Se+Z(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return J+e+Se+e+e}return e}var Ha=function(t,r,o,s){if(t.length>-1&&!t.return)switch(t.type){case _n:t.return=Pr(t.value,t.length);break;case Sr:return ot([Et(t,{value:Z(t.value,"@","@"+J)})],s);case Tn:if(t.length)return Ia(t.props,function(i){switch(Ma(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ot([Et(t,{props:[Z(i,/:(read-\w+)/,":"+zt+"$1")]})],s);case"::placeholder":return ot([Et(t,{props:[Z(i,/:(plac\w+)/,":"+J+"input-$1")]}),Et(t,{props:[Z(i,/:(plac\w+)/,":"+zt+"$1")]}),Et(t,{props:[Z(i,/:(plac\w+)/,Se+"input-$1")]})],s)}return""})}},qa=[Ha],Ar=function(t){var r=t.key;if(r==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(f){var v=f.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(f),f.setAttribute("data-s",""))})}var s=t.stylisPlugins||qa,i={},l,d=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(f){for(var v=f.getAttribute("data-emotion").split(" "),O=1;O<v.length;O++)i[v[O]]=!0;d.push(f)});var u,c=[Ya,Va];{var p,h=[ja,Ba(function(f){p.insert(f)})],y=za(c.concat(s,h)),m=function(v){return ot(La(v),y)};u=function(v,O,b,w){p=b,m(v?v+"{"+O.styles+"}":O.styles),w&&(x.inserted[O.name]=!0)}}var x={key:r,sheet:new Sa({key:r,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:i,registered:{},insert:u};return x.sheet.hydrate(d),x},$r={exports:{}},re={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,r=e?Symbol.for("react.portal"):60106,o=e?Symbol.for("react.fragment"):60107,s=e?Symbol.for("react.strict_mode"):60108,i=e?Symbol.for("react.profiler"):60114,l=e?Symbol.for("react.provider"):60109,d=e?Symbol.for("react.context"):60110,u=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,p=e?Symbol.for("react.forward_ref"):60112,h=e?Symbol.for("react.suspense"):60113,y=e?Symbol.for("react.suspense_list"):60120,m=e?Symbol.for("react.memo"):60115,x=e?Symbol.for("react.lazy"):60116,f=e?Symbol.for("react.block"):60121,v=e?Symbol.for("react.fundamental"):60117,O=e?Symbol.for("react.responder"):60118,b=e?Symbol.for("react.scope"):60119;function w(_){return typeof _=="string"||typeof _=="function"||_===o||_===c||_===i||_===s||_===h||_===y||typeof _=="object"&&_!==null&&(_.$$typeof===x||_.$$typeof===m||_.$$typeof===l||_.$$typeof===d||_.$$typeof===p||_.$$typeof===v||_.$$typeof===O||_.$$typeof===b||_.$$typeof===f)}function C(_){if(typeof _=="object"&&_!==null){var We=_.$$typeof;switch(We){case t:var Fe=_.type;switch(Fe){case u:case c:case o:case i:case s:case h:return Fe;default:var ze=Fe&&Fe.$$typeof;switch(ze){case d:case p:case x:case m:case l:return ze;default:return We}}case r:return We}}}var $=u,A=c,S=d,T=l,P=t,k=p,F=o,U=x,E=m,M=r,L=i,z=s,N=h,Y=!1;function W(_){return Y||(Y=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),B(_)||C(_)===u}function B(_){return C(_)===c}function V(_){return C(_)===d}function K(_){return C(_)===l}function H(_){return typeof _=="object"&&_!==null&&_.$$typeof===t}function ve(_){return C(_)===p}function be(_){return C(_)===o}function we(_){return C(_)===x}function Qe(_){return C(_)===m}function Ke(_){return C(_)===r}function Je(_){return C(_)===i}function Xe(_){return C(_)===s}function Dt(_){return C(_)===h}re.AsyncMode=$,re.ConcurrentMode=A,re.ContextConsumer=S,re.ContextProvider=T,re.Element=P,re.ForwardRef=k,re.Fragment=F,re.Lazy=U,re.Memo=E,re.Portal=M,re.Profiler=L,re.StrictMode=z,re.Suspense=N,re.isAsyncMode=W,re.isConcurrentMode=B,re.isContextConsumer=V,re.isContextProvider=K,re.isElement=H,re.isForwardRef=ve,re.isFragment=be,re.isLazy=we,re.isMemo=Qe,re.isPortal=Ke,re.isProfiler=Je,re.isStrictMode=Xe,re.isSuspense=Dt,re.isValidElementType=w,re.typeOf=C})(),$r.exports=re;var Ka=$r.exports,Fr=Ka,Xa={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Qa={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Dr={};Dr[Fr.ForwardRef]=Xa,Dr[Fr.Memo]=Qa;var Ja=!0;function Lr(e,t,r){var o="";return r.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(o+=s+" ")}),o}var In=function(t,r,o){var s=t.key+"-"+r.name;(o===!1||Ja===!1)&&t.registered[s]===void 0&&(t.registered[s]=r.styles)},kn=function(t,r,o){In(t,r,o);var s=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var i=r;do t.insert(r===i?"."+s:"",i,t.sheet,!0),i=i.next;while(i!==void 0)}};function Za(e){for(var t=0,r,o=0,s=e.length;s>=4;++o,s-=4)r=e.charCodeAt(o)&255|(e.charCodeAt(++o)&255)<<8|(e.charCodeAt(++o)&255)<<16|(e.charCodeAt(++o)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(o+2)&255)<<16;case 2:t^=(e.charCodeAt(o+1)&255)<<8;case 1:t^=e.charCodeAt(o)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Ra={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},es=/[A-Z]|^ms/g,ts=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Nr=function(t){return t.charCodeAt(1)===45},jr=function(t){return t!=null&&typeof t!="boolean"},Pn=Ir(function(e){return Nr(e)?e:e.replace(es,"-$&").toLowerCase()}),zr=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(ts,function(o,s,i){return je={name:s,styles:i,next:je},s})}return Ra[t]!==1&&!Nr(t)&&typeof r=="number"&&r!==0?r+"px":r};function Tt(e,t,r){if(r==null)return"";var o=r;if(o.__emotion_styles!==void 0)return o;switch(typeof r){case"boolean":return"";case"object":{var s=r;if(s.anim===1)return je={name:s.name,styles:s.styles,next:je},s.name;var i=r;if(i.styles!==void 0){var l=i.next;if(l!==void 0)for(;l!==void 0;)je={name:l.name,styles:l.styles,next:je},l=l.next;var d=i.styles+";";return d}return ns(e,t,r)}case"function":{if(e!==void 0){var u=je,c=r(e);return je=u,Tt(e,t,c)}break}}var p=r;if(t==null)return p;var h=t[p];return h!==void 0?h:p}function ns(e,t,r){var o="";if(Array.isArray(r))for(var s=0;s<r.length;s++)o+=Tt(e,t,r[s])+";";else for(var i in r){var l=r[i];if(typeof l!="object"){var d=l;t!=null&&t[d]!==void 0?o+=i+"{"+t[d]+"}":jr(d)&&(o+=Pn(i)+":"+zr(i,d)+";")}else if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var u=0;u<l.length;u++)jr(l[u])&&(o+=Pn(i)+":"+zr(i,l[u])+";");else{var c=Tt(e,t,l);switch(i){case"animation":case"animationName":{o+=Pn(i)+":"+c+";";break}default:o+=i+"{"+c+"}"}}}return o}var Br=/label:\s*([^\s;{]+)\s*(;|$)/g,je;function _t(e,t,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var o=!0,s="";je=void 0;var i=e[0];if(i==null||i.raw===void 0)o=!1,s+=Tt(r,t,i);else{var l=i;s+=l[0]}for(var d=1;d<e.length;d++)if(s+=Tt(r,t,e[d]),o){var u=i;s+=u[d]}Br.lastIndex=0;for(var c="",p;(p=Br.exec(s))!==null;)c+="-"+p[1];var h=Za(s)+c;return{name:h,styles:s,next:je}}var rs=function(t){return t()},Wr=R.useInsertionEffect?R.useInsertionEffect:!1,Gr=Wr||rs,Ur=Wr||R.useLayoutEffect,Yr=R.createContext(typeof HTMLElement<"u"?Ar({key:"css"}):null),os=Yr.Provider,An=function(t){return n.forwardRef(function(r,o){var s=n.useContext(Yr);return t(r,s,o)})},qt=R.createContext({}),$n={}.hasOwnProperty,Fn="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",as=function(t,r){var o={};for(var s in r)$n.call(r,s)&&(o[s]=r[s]);return o[Fn]=t,o},ss=function(t){var r=t.cache,o=t.serialized,s=t.isStringTag;return In(r,o,s),Gr(function(){return kn(r,o,s)}),null},is=An(function(e,t,r){var o=e.css;typeof o=="string"&&t.registered[o]!==void 0&&(o=t.registered[o]);var s=e[Fn],i=[o],l="";typeof e.className=="string"?l=Lr(t.registered,i,e.className):e.className!=null&&(l=e.className+" ");var d=_t(i,void 0,R.useContext(qt));l+=t.key+"-"+d.name;var u={};for(var c in e)$n.call(e,c)&&c!=="css"&&c!==Fn&&(u[c]=e[c]);return u.className=l,r&&(u.ref=r),R.createElement(R.Fragment,null,R.createElement(ss,{cache:t,serialized:d,isStringTag:typeof s=="string"}),R.createElement(s,u))}),ls=is;xr();var Vr=function(t,r){var o=arguments;if(r==null||!$n.call(r,"css"))return R.createElement.apply(void 0,o);var s=o.length,i=new Array(s);i[0]=ls,i[1]=as(t,r);for(var l=2;l<s;l++)i[l]=o[l];return R.createElement.apply(null,i)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Vr||(Vr={}));var cs=An(function(e,t){var r=e.styles,o=_t([r],void 0,R.useContext(qt)),s=R.useRef();return Ur(function(){var i=t.key+"-global",l=new t.sheet.constructor({key:i,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),d=!1,u=document.querySelector('style[data-emotion="'+i+" "+o.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),u!==null&&(d=!0,u.setAttribute("data-emotion",i),l.hydrate([u])),s.current=[l,d],function(){l.flush()}},[t]),Ur(function(){var i=s.current,l=i[0],d=i[1];if(d){i[1]=!1;return}if(o.next!==void 0&&kn(t,o.next,!0),l.tags.length){var u=l.tags[l.tags.length-1].nextElementSibling;l.before=u,l.flush()}t.insert("",o,l,!1)},[t,o.name]),null});function Hr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _t(t)}function us(){var e=Hr.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var ds=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,ps=Ir(function(e){return ds.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),fs=ps,gs=function(t){return t!=="theme"},qr=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?fs:gs},Kr=function(t,r,o){var s;if(r){var i=r.shouldForwardProp;s=t.__emotion_forwardProp&&i?function(l){return t.__emotion_forwardProp(l)&&i(l)}:i}return typeof s!="function"&&o&&(s=t.__emotion_forwardProp),s},ms=function(t){var r=t.cache,o=t.serialized,s=t.isStringTag;return In(r,o,s),Gr(function(){return kn(r,o,s)}),null},hs=function e(t,r){var o=t.__emotion_real===t,s=o&&t.__emotion_base||t,i,l;r!==void 0&&(i=r.label,l=r.target);var d=Kr(t,r,o),u=d||qr(s),c=!u("as");return function(){var p=arguments,h=o&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(i!==void 0&&h.push("label:"+i+";"),p[0]==null||p[0].raw===void 0)h.push.apply(h,p);else{var y=p[0];h.push(y[0]);for(var m=p.length,x=1;x<m;x++)h.push(p[x],y[x])}var f=An(function(v,O,b){var w=c&&v.as||s,C="",$=[],A=v;if(v.theme==null){A={};for(var S in v)A[S]=v[S];A.theme=R.useContext(qt)}typeof v.className=="string"?C=Lr(O.registered,$,v.className):v.className!=null&&(C=v.className+" ");var T=_t(h.concat($),O.registered,A);C+=O.key+"-"+T.name,l!==void 0&&(C+=" "+l);var P=c&&d===void 0?qr(w):u,k={};for(var F in v)c&&F==="as"||P(F)&&(k[F]=v[F]);return k.className=C,b&&(k.ref=b),R.createElement(R.Fragment,null,R.createElement(ms,{cache:O,serialized:T,isStringTag:typeof w=="string"}),R.createElement(w,k))});return f.displayName=i!==void 0?i:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",f.defaultProps=t.defaultProps,f.__emotion_real=f,f.__emotion_base=s,f.__emotion_styles=h,f.__emotion_forwardProp=d,Object.defineProperty(f,"toString",{value:function(){return"."+l}}),f.withComponent=function(v,O){var b=e(v,ee({},r,O,{shouldForwardProp:Kr(f,O,!0)}));return b.apply(void 0,h)},f}},ys=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Dn=hs.bind(null);ys.forEach(function(e){Dn[e]=Dn(e)});function bs(e,t){const r=Ar({key:"css",prepend:e});if(t){const o=r.insert;r.insert=(...s)=>(s[1].styles.match(/^@layer\s+[^{]*$/)||(s[1].styles=`@layer mui {${s[1].styles}}`),o(...s))}return r}const Ln=new Map;function Xr(e){const{injectFirst:t,enableCssLayer:r,children:o}=e,s=R.useMemo(()=>{const i=`${t}-${r}`;if(typeof document=="object"&&Ln.has(i))return Ln.get(i);const l=bs(t,r);return Ln.set(i,l),l},[t,r]);return t||r?ie.jsx(os,{value:s,children:o}):o}Xr.propTypes={children:G.node,enableCssLayer:G.bool,injectFirst:G.bool};function xs(e){return e==null||Object.keys(e).length===0}function Qr(e){const{styles:t,defaultTheme:r={}}=e,o=typeof t=="function"?s=>t(xs(s)?r:s):t;return ie.jsx(cs,{styles:o})}Qr.propTypes={defaultTheme:G.object,styles:G.oneOfType([G.array,G.string,G.object,G.func])};function vs(e,t){const r=Dn(e,t);return(...o)=>{const s=typeof e=="string"?`"${e}"`:"component";return o.length===0?console.error([`MUI: Seems like you called \`styled(${s})()\` without a \`style\` argument.`,'You must provide a `styles` argument: `styled("div")(styleYouForgotToPass)`.'].join(`
`)):o.some(i=>i===void 0)&&console.error(`MUI: the styled(${s})(...args) API requires all its args to be defined.`),r(...o)}}const Es=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},Jr=[];function Ss(e){return Jr[0]=e,_t(Jr)}const Cs=Ue(Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Qr,StyledEngineProvider:Xr,ThemeContext:qt,css:Hr,default:vs,internal_processStyles:Es,internal_serializeStyles:Ss,keyframes:us},Symbol.toStringTag,{value:"Module"})));function Ve(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Zr(e){if(R.isValidElement(e)||!Ve(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=Zr(e[r])}),t}function wt(e,t,r={clone:!0}){const o=r.clone?ee({},e):e;return Ve(e)&&Ve(t)&&Object.keys(t).forEach(s=>{R.isValidElement(t[s])?o[s]=t[s]:Ve(t[s])&&Object.prototype.hasOwnProperty.call(e,s)&&Ve(e[s])?o[s]=wt(e[s],t[s],r):r.clone?o[s]=Ve(t[s])?Zr(t[s]):t[s]:o[s]=t[s]}),o}const Ts=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:wt,isPlainObject:Ve},Symbol.toStringTag,{value:"Module"})));function _s(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const ws=Object.freeze(Object.defineProperty({__proto__:null,default:_s},Symbol.toStringTag,{value:"Module"}));function Nn(e){if(typeof e!="string")throw new Error("MUI: `capitalize(string)` expects a string argument.");return e.charAt(0).toUpperCase()+e.slice(1)}const Os=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:Nn},Symbol.toStringTag,{value:"Module"})));var Rr={exports:{}},oe={};/**
 * @license React
 * react-is.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){function e(f){if(typeof f=="object"&&f!==null){var v=f.$$typeof;switch(v){case t:switch(f=f.type,f){case o:case i:case s:case c:case p:case m:return f;default:switch(f=f&&f.$$typeof,f){case d:case u:case y:case h:return f;case l:return f;default:return v}}case r:return v}}}var t=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),x=Symbol.for("react.client.reference");oe.ContextConsumer=l,oe.ContextProvider=d,oe.Element=t,oe.ForwardRef=u,oe.Fragment=o,oe.Lazy=y,oe.Memo=h,oe.Portal=r,oe.Profiler=i,oe.StrictMode=s,oe.Suspense=c,oe.SuspenseList=p,oe.isContextConsumer=function(f){return e(f)===l},oe.isContextProvider=function(f){return e(f)===d},oe.isElement=function(f){return typeof f=="object"&&f!==null&&f.$$typeof===t},oe.isForwardRef=function(f){return e(f)===u},oe.isFragment=function(f){return e(f)===o},oe.isLazy=function(f){return e(f)===y},oe.isMemo=function(f){return e(f)===h},oe.isPortal=function(f){return e(f)===r},oe.isProfiler=function(f){return e(f)===i},oe.isStrictMode=function(f){return e(f)===s},oe.isSuspense=function(f){return e(f)===c},oe.isSuspenseList=function(f){return e(f)===p},oe.isValidElementType=function(f){return typeof f=="string"||typeof f=="function"||f===o||f===i||f===s||f===c||f===p||typeof f=="object"&&f!==null&&(f.$$typeof===y||f.$$typeof===h||f.$$typeof===d||f.$$typeof===l||f.$$typeof===u||f.$$typeof===x||f.getModuleId!==void 0)},oe.typeOf=e})(),Rr.exports=oe;var eo=Rr.exports;const Ms=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function to(e){const t=`${e}`.match(Ms);return t&&t[1]||""}function no(e,t=""){return e.displayName||e.name||to(e)||t}function ro(e,t,r){const o=no(t);return e.displayName||(o!==""?`${r}(${o})`:r)}function Is(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return no(e,"Component");if(typeof e=="object")switch(e.$$typeof){case eo.ForwardRef:return ro(e,e.render,"ForwardRef");case eo.Memo:return ro(e,e.type,"memo");default:return}}}const ks=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:Is,getFunctionName:to},Symbol.toStringTag,{value:"Module"}))),Ps=["values","unit","step"],As=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,o)=>r.val-o.val),t.reduce((r,o)=>ee({},r,{[o.key]:o.val}),{})};function oo(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:o=5}=e,s=Ye(e,Ps),i=As(t),l=Object.keys(i);function d(y){return`@media (min-width:${typeof t[y]=="number"?t[y]:y}${r})`}function u(y){return`@media (max-width:${(typeof t[y]=="number"?t[y]:y)-o/100}${r})`}function c(y,m){const x=l.indexOf(m);return`@media (min-width:${typeof t[y]=="number"?t[y]:y}${r}) and (max-width:${(x!==-1&&typeof t[l[x]]=="number"?t[l[x]]:m)-o/100}${r})`}function p(y){return l.indexOf(y)+1<l.length?c(y,l[l.indexOf(y)+1]):d(y)}function h(y){const m=l.indexOf(y);return m===0?d(l[1]):m===l.length-1?u(l[m]):c(y,l[l.indexOf(y)+1]).replace("@media","@media not all and")}return ee({keys:l,values:i,up:d,down:u,between:c,only:p,not:h,unit:r},s)}const $s={borderRadius:4},He=G.oneOfType([G.number,G.string,G.object,G.array]);function Ot(e,t){return t?wt(e,t,{clone:!1}):e}const jn={xs:0,sm:600,md:900,lg:1200,xl:1536},ao={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${jn[e]}px)`};function Be(e,t,r){const o=e.theme||{};if(Array.isArray(t)){const i=o.breakpoints||ao;return t.reduce((l,d,u)=>(l[i.up(i.keys[u])]=r(t[u]),l),{})}if(typeof t=="object"){const i=o.breakpoints||ao;return Object.keys(t).reduce((l,d)=>{if(Object.keys(i.values||jn).indexOf(d)!==-1){const u=i.up(d);l[u]=r(t[d],d)}else{const u=d;l[u]=t[u]}return l},{})}return r(t)}function Fs(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((o,s)=>{const i=e.up(s);return o[i]={},o},{}))||{}}function so(e,t){return e.reduce((r,o)=>{const s=r[o];return(!s||Object.keys(s).length===0)&&delete r[o],r},t)}function Kt(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const o=`vars.${t}`.split(".").reduce((s,i)=>s&&s[i]?s[i]:null,e);if(o!=null)return o}return t.split(".").reduce((o,s)=>o&&o[s]!=null?o[s]:null,e)}function Xt(e,t,r,o=r){let s;return typeof e=="function"?s=e(r):Array.isArray(e)?s=e[r]||o:s=Kt(e,r)||o,t&&(s=t(s,o,e)),s}function fe(e){const{prop:t,cssProperty:r=e.prop,themeKey:o,transform:s}=e,i=l=>{if(l[t]==null)return null;const d=l[t],u=l.theme,c=Kt(u,o)||{};return Be(l,d,h=>{let y=Xt(c,s,h);return h===y&&typeof h=="string"&&(y=Xt(c,s,`${t}${h==="default"?"":Nn(h)}`,h)),r===!1?y:{[r]:y}})};return i.propTypes={[t]:He},i.filterProps=[t],i}function Ds(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const Ls={m:"margin",p:"padding"},Ns={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},io={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},js=Ds(e=>{if(e.length>2)if(io[e])e=io[e];else return[e];const[t,r]=e.split(""),o=Ls[t],s=Ns[r]||"";return Array.isArray(s)?s.map(i=>o+i):[o+s]}),Qt=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Jt=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],zs=[...Qt,...Jt];function Mt(e,t,r,o){var s;const i=(s=Kt(e,t,!1))!=null?s:r;return typeof i=="number"?l=>typeof l=="string"?l:(typeof l!="number"&&console.error(`MUI: Expected ${o} argument to be a number or a string, got ${l}.`),i*l):Array.isArray(i)?l=>typeof l=="string"?l:(Number.isInteger(l)?l>i.length-1&&console.error([`MUI: The value provided (${l}) overflows.`,`The supported values are: ${JSON.stringify(i)}.`,`${l} > ${i.length-1}, you need to add the missing values.`].join(`
`)):console.error([`MUI: The \`theme.${t}\` array type cannot be combined with non integer values.You should either use an integer value that can be used as index, or define the \`theme.${t}\` as a number.`].join(`
`)),i[l]):typeof i=="function"?i:(console.error([`MUI: The \`theme.${t}\` value (${i}) is invalid.`,"It should be a number, an array or a function."].join(`
`)),()=>{})}function lo(e){return Mt(e,"spacing",8,"spacing")}function It(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),o=e(r);return t>=0?o:typeof o=="number"?-o:`-${o}`}function Bs(e,t){return r=>e.reduce((o,s)=>(o[s]=It(t,r),o),{})}function Ws(e,t,r,o){if(t.indexOf(r)===-1)return null;const s=js(r),i=Bs(s,o),l=e[r];return Be(e,l,i)}function co(e,t){const r=lo(e.theme);return Object.keys(e).map(o=>Ws(e,t,o,r)).reduce(Ot,{})}function ue(e){return co(e,Qt)}ue.propTypes=Qt.reduce((e,t)=>(e[t]=He,e),{}),ue.filterProps=Qt;function de(e){return co(e,Jt)}de.propTypes=Jt.reduce((e,t)=>(e[t]=He,e),{}),de.filterProps=Jt,zs.reduce((e,t)=>(e[t]=He,e),{});function Gs(e=8){if(e.mui)return e;const t=lo({spacing:e}),r=(...o)=>(o.length<=4||console.error(`MUI: Too many arguments provided, expected between 0 and 4, got ${o.length}`),(o.length===0?[1]:o).map(i=>{const l=t(i);return typeof l=="number"?`${l}px`:l}).join(" "));return r.mui=!0,r}function Zt(...e){const t=e.reduce((o,s)=>(s.filterProps.forEach(i=>{o[i]=s}),o),{}),r=o=>Object.keys(o).reduce((s,i)=>t[i]?Ot(s,t[i](o)):s,{});return r.propTypes=e.reduce((o,s)=>Object.assign(o,s.propTypes),{}),r.filterProps=e.reduce((o,s)=>o.concat(s.filterProps),[]),r}function Ie(e){return typeof e!="number"?e:`${e}px solid`}function ke(e,t){return fe({prop:e,themeKey:"borders",transform:t})}const Us=ke("border",Ie),Ys=ke("borderTop",Ie),Vs=ke("borderRight",Ie),Hs=ke("borderBottom",Ie),qs=ke("borderLeft",Ie),Ks=ke("borderColor"),Xs=ke("borderTopColor"),Qs=ke("borderRightColor"),Js=ke("borderBottomColor"),Zs=ke("borderLeftColor"),Rs=ke("outline",Ie),ei=ke("outlineColor"),Rt=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=Mt(e.theme,"shape.borderRadius",4,"borderRadius"),r=o=>({borderRadius:It(t,o)});return Be(e,e.borderRadius,r)}return null};Rt.propTypes={borderRadius:He},Rt.filterProps=["borderRadius"],Zt(Us,Ys,Vs,Hs,qs,Ks,Xs,Qs,Js,Zs,Rt,Rs,ei);const en=e=>{if(e.gap!==void 0&&e.gap!==null){const t=Mt(e.theme,"spacing",8,"gap"),r=o=>({gap:It(t,o)});return Be(e,e.gap,r)}return null};en.propTypes={gap:He},en.filterProps=["gap"];const tn=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=Mt(e.theme,"spacing",8,"columnGap"),r=o=>({columnGap:It(t,o)});return Be(e,e.columnGap,r)}return null};tn.propTypes={columnGap:He},tn.filterProps=["columnGap"];const nn=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=Mt(e.theme,"spacing",8,"rowGap"),r=o=>({rowGap:It(t,o)});return Be(e,e.rowGap,r)}return null};nn.propTypes={rowGap:He},nn.filterProps=["rowGap"];const ti=fe({prop:"gridColumn"}),ni=fe({prop:"gridRow"}),ri=fe({prop:"gridAutoFlow"}),oi=fe({prop:"gridAutoColumns"}),ai=fe({prop:"gridAutoRows"}),si=fe({prop:"gridTemplateColumns"}),ii=fe({prop:"gridTemplateRows"}),li=fe({prop:"gridTemplateAreas"}),ci=fe({prop:"gridArea"});Zt(en,tn,nn,ti,ni,ri,oi,ai,si,ii,li,ci);function at(e,t){return t==="grey"?t:e}const ui=fe({prop:"color",themeKey:"palette",transform:at}),di=fe({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:at}),pi=fe({prop:"backgroundColor",themeKey:"palette",transform:at});Zt(ui,di,pi);function Me(e){return e<=1&&e!==0?`${e*100}%`:e}const fi=fe({prop:"width",transform:Me}),zn=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var o,s;const i=((o=e.theme)==null||(o=o.breakpoints)==null||(o=o.values)==null?void 0:o[r])||jn[r];return i?((s=e.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${i}${e.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Me(r)}};return Be(e,e.maxWidth,t)}return null};zn.filterProps=["maxWidth"];const gi=fe({prop:"minWidth",transform:Me}),mi=fe({prop:"height",transform:Me}),hi=fe({prop:"maxHeight",transform:Me}),yi=fe({prop:"minHeight",transform:Me});fe({prop:"size",cssProperty:"width",transform:Me}),fe({prop:"size",cssProperty:"height",transform:Me});const bi=fe({prop:"boxSizing"});Zt(fi,zn,gi,mi,hi,yi,bi);const kt={border:{themeKey:"borders",transform:Ie},borderTop:{themeKey:"borders",transform:Ie},borderRight:{themeKey:"borders",transform:Ie},borderBottom:{themeKey:"borders",transform:Ie},borderLeft:{themeKey:"borders",transform:Ie},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Ie},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Rt},color:{themeKey:"palette",transform:at},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:at},backgroundColor:{themeKey:"palette",transform:at},p:{style:de},pt:{style:de},pr:{style:de},pb:{style:de},pl:{style:de},px:{style:de},py:{style:de},padding:{style:de},paddingTop:{style:de},paddingRight:{style:de},paddingBottom:{style:de},paddingLeft:{style:de},paddingX:{style:de},paddingY:{style:de},paddingInline:{style:de},paddingInlineStart:{style:de},paddingInlineEnd:{style:de},paddingBlock:{style:de},paddingBlockStart:{style:de},paddingBlockEnd:{style:de},m:{style:ue},mt:{style:ue},mr:{style:ue},mb:{style:ue},ml:{style:ue},mx:{style:ue},my:{style:ue},margin:{style:ue},marginTop:{style:ue},marginRight:{style:ue},marginBottom:{style:ue},marginLeft:{style:ue},marginX:{style:ue},marginY:{style:ue},marginInline:{style:ue},marginInlineStart:{style:ue},marginInlineEnd:{style:ue},marginBlock:{style:ue},marginBlockStart:{style:ue},marginBlockEnd:{style:ue},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:en},rowGap:{style:nn},columnGap:{style:tn},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Me},maxWidth:{style:zn},minWidth:{transform:Me},height:{transform:Me},maxHeight:{transform:Me},minHeight:{transform:Me},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function xi(...e){const t=e.reduce((o,s)=>o.concat(Object.keys(s)),[]),r=new Set(t);return e.every(o=>r.size===Object.keys(o).length)}function vi(e,t){return typeof e=="function"?e(t):e}function uo(){function e(r,o,s,i){const l={[r]:o,theme:s},d=i[r];if(!d)return{[r]:o};const{cssProperty:u=r,themeKey:c,transform:p,style:h}=d;if(o==null)return null;if(c==="typography"&&o==="inherit")return{[r]:o};const y=Kt(s,c)||{};return h?h(l):Be(l,o,x=>{let f=Xt(y,p,x);return x===f&&typeof x=="string"&&(f=Xt(y,p,`${r}${x==="default"?"":Nn(x)}`,x)),u===!1?f:{[u]:f}})}function t(r){var o;const{sx:s,theme:i={},nested:l}=r||{};if(!s)return null;const d=(o=i.unstable_sxConfig)!=null?o:kt;function u(c){let p=c;if(typeof c=="function")p=c(i);else if(typeof c!="object")return c;if(!p)return null;const h=Fs(i.breakpoints),y=Object.keys(h);let m=h;return Object.keys(p).forEach(x=>{const f=vi(p[x],i);if(f!=null)if(typeof f=="object")if(d[x])m=Ot(m,e(x,f,i,d));else{const v=Be({theme:i},f,O=>({[x]:O}));xi(v,f)?m[x]=t({sx:f,theme:i,nested:!0}):m=Ot(m,v)}else m=Ot(m,e(x,f,i,d))}),!l&&i.modularCssLayers?{"@layer sx":so(y,m)}:so(y,m)}return Array.isArray(s)?s.map(u):u(s)}return t}const rn=uo();rn.filterProps=["sx"];function po(e,t){const r=this;return r.vars&&typeof r.getColorSchemeSelector=="function"?{[r.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:r.palette.mode===e?t:{}}const Ei=["breakpoints","palette","spacing","shape"];function fo(e={},...t){const{breakpoints:r={},palette:o={},spacing:s,shape:i={}}=e,l=Ye(e,Ei),d=oo(r),u=Gs(s);let c=wt({breakpoints:d,direction:"ltr",components:{},palette:ee({mode:"light"},o),spacing:u,shape:ee({},$s,i)},l);return c.applyStyles=po,c=t.reduce((p,h)=>wt(p,h),c),c.unstable_sxConfig=ee({},kt,l==null?void 0:l.unstable_sxConfig),c.unstable_sx=function(h){return rn({sx:h,theme:this})},c}const Si=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:fo,private_createBreakpoints:oo,unstable_applyStyles:po},Symbol.toStringTag,{value:"Module"}))),Ci=["sx"],Ti=e=>{var t,r;const o={systemProps:{},otherProps:{}},s=(t=e==null||(r=e.theme)==null?void 0:r.unstable_sxConfig)!=null?t:kt;return Object.keys(e).forEach(i=>{s[i]?o.systemProps[i]=e[i]:o.otherProps[i]=e[i]}),o};function _i(e){const{sx:t}=e,r=Ye(e,Ci),{systemProps:o,otherProps:s}=Ti(r);let i;return Array.isArray(t)?i=[o,...t]:typeof t=="function"?i=(...l)=>{const d=t(...l);return Ve(d)?ee({},o,d):o}:i=ee({},o,t),ee({},s,{sx:i})}const wi=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:rn,extendSxProp:_i,unstable_createStyleFunctionSx:uo,unstable_defaultSxConfig:kt},Symbol.toStringTag,{value:"Module"})));var st=yr;Object.defineProperty(xt,"__esModule",{value:!0});var Oi=xt.default=Wi;xt.shouldForwardProp=an,xt.systemDefaultTheme=void 0;var Pe=st(xr()),Bn=st(xa()),on=Li(Cs),Mi=Ts,Ii=st(Os),ki=st(ks),Pi=st(Si),Ai=st(wi);const $i=["ownerState"],Fi=["variants"],Di=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function go(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,r=new WeakMap;return(go=function(o){return o?r:t})(e)}function Li(e,t){if(e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var r=go(t);if(r&&r.has(e))return r.get(e);var o={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)){var l=s?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(o,i,l):o[i]=e[i]}return o.default=e,r&&r.set(e,o),o}function Ni(e){return Object.keys(e).length===0}function ji(e){return typeof e=="string"&&e.charCodeAt(0)>96}function an(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function mo(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}const zi=xt.systemDefaultTheme=(0,Pi.default)(),ho=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function sn({defaultTheme:e,theme:t,themeId:r}){return Ni(t)?e:t[r]||t}function Bi(e){return e?(t,r)=>r[e]:null}function ln(e,t,r){let{ownerState:o}=t,s=(0,Bn.default)(t,$i);const i=typeof e=="function"?e((0,Pe.default)({ownerState:o},s)):e;if(Array.isArray(i))return i.flatMap(l=>ln(l,(0,Pe.default)({ownerState:o},s),r));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:l=[]}=i;let u=(0,Bn.default)(i,Fi);return l.forEach(c=>{let p=!0;if(typeof c.props=="function"?p=c.props((0,Pe.default)({ownerState:o},s,o)):Object.keys(c.props).forEach(h=>{(o==null?void 0:o[h])!==c.props[h]&&s[h]!==c.props[h]&&(p=!1)}),p){Array.isArray(u)||(u=[u]);const h=typeof c.style=="function"?c.style((0,Pe.default)({ownerState:o},s,o)):c.style;u.push(r?mo((0,on.internal_serializeStyles)(h),r):h)}}),u}return r?mo((0,on.internal_serializeStyles)(i),r):i}function Wi(e={}){const{themeId:t,defaultTheme:r=zi,rootShouldForwardProp:o=an,slotShouldForwardProp:s=an}=e,i=l=>(0,Ai.default)((0,Pe.default)({},l,{theme:sn((0,Pe.default)({},l,{defaultTheme:r,themeId:t}))}));return i.__mui_systemSx=!0,(l,d={})=>{(0,on.internal_processStyles)(l,A=>A.filter(S=>!(S!=null&&S.__mui_systemSx)));const{name:u,slot:c,skipVariantsResolver:p,skipSx:h,overridesResolver:y=Bi(ho(c))}=d,m=(0,Bn.default)(d,Di),x=u&&u.startsWith("Mui")||c?"components":"custom",f=p!==void 0?p:c&&c!=="Root"&&c!=="root"||!1,v=h||!1;let O;u&&(O=`${u}-${ho(c||"Root")}`);let b=an;c==="Root"||c==="root"?b=o:c?b=s:ji(l)&&(b=void 0);const w=(0,on.default)(l,(0,Pe.default)({shouldForwardProp:b,label:O},m)),C=A=>typeof A=="function"&&A.__emotion_real!==A||(0,Mi.isPlainObject)(A)?S=>{const T=sn({theme:S.theme,defaultTheme:r,themeId:t});return ln(A,(0,Pe.default)({},S,{theme:T}),T.modularCssLayers?x:void 0)}:A,$=(A,...S)=>{let T=C(A);const P=S?S.map(C):[];u&&y&&P.push(U=>{const E=sn((0,Pe.default)({},U,{defaultTheme:r,themeId:t}));if(!E.components||!E.components[u]||!E.components[u].styleOverrides)return null;const M=E.components[u].styleOverrides,L={};return Object.entries(M).forEach(([z,N])=>{L[z]=ln(N,(0,Pe.default)({},U,{theme:E}),E.modularCssLayers?"theme":void 0)}),y(U,L)}),u&&!f&&P.push(U=>{var E;const M=sn((0,Pe.default)({},U,{defaultTheme:r,themeId:t})),L=M==null||(E=M.components)==null||(E=E[u])==null?void 0:E.variants;return ln({variants:L},(0,Pe.default)({},U,{theme:M}),M.modularCssLayers?"theme":void 0)}),v||P.push(i);const k=P.length-S.length;if(Array.isArray(A)&&k>0){const U=new Array(k).fill("");T=[...A,...U],T.raw=[...A.raw,...U]}const F=w(T,...P);{let U;u&&(U=`${u}${(0,Ii.default)(c||"")}`),U===void 0&&(U=`Styled(${(0,ki.default)(l)})`),F.displayName=U}return l.muiName&&(F.muiName=l.muiName),F};return w.withConfig&&($.withConfig=w.withConfig),$}}function Gi(e,t){return ee({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var ge={};const Ui=Ue(ws);function Yi(e,t=Number.MIN_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,r))}const Vi=Ue(Object.freeze(Object.defineProperty({__proto__:null,default:Yi},Symbol.toStringTag,{value:"Module"})));var yo=yr;Object.defineProperty(ge,"__esModule",{value:!0}),ge.alpha=So,ge.blend=rl,ge.colorChannel=void 0;var Hi=ge.darken=Gn;ge.decomposeColor=Ae,ge.emphasize=Co;var bo=ge.getContrastRatio=Zi;ge.getLuminance=cn,ge.hexToRgb=xo,ge.hslToRgb=Eo;var qi=ge.lighten=Un;ge.private_safeAlpha=Ri,ge.private_safeColorChannel=void 0,ge.private_safeDarken=el,ge.private_safeEmphasize=nl,ge.private_safeLighten=tl,ge.recomposeColor=it,ge.rgbToHex=Ji,yo(Ui);var Ki=yo(Vi);function Wn(e,t=0,r=1){return(e<t||e>r)&&console.error(`MUI: The value provided ${e} is out of range [${t}, ${r}].`),(0,Ki.default)(e,t,r)}function xo(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(o=>o+o)),r?`rgb${r.length===4?"a":""}(${r.map((o,s)=>s<3?parseInt(o,16):Math.round(parseInt(o,16)/255*1e3)/1e3).join(", ")})`:""}function Xi(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Ae(e){if(e.type)return e;if(e.charAt(0)==="#")return Ae(xo(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(`MUI: Unsupported \`${e}\` color.
The following formats are supported: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().`);let o=e.substring(t+1,e.length-1),s;if(r==="color"){if(o=o.split(" "),s=o.shift(),o.length===4&&o[3].charAt(0)==="/"&&(o[3]=o[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error(`MUI: unsupported \`${s}\` color space.
The following color spaces are supported: srgb, display-p3, a98-rgb, prophoto-rgb, rec-2020.`)}else o=o.split(",");return o=o.map(i=>parseFloat(i)),{type:r,values:o,colorSpace:s}}const vo=e=>{const t=Ae(e);return t.values.slice(0,3).map((r,o)=>t.type.indexOf("hsl")!==-1&&o!==0?`${r}%`:r).join(" ")};ge.colorChannel=vo;const Qi=(e,t)=>{try{return vo(e)}catch{return t&&console.warn(t),e}};ge.private_safeColorChannel=Qi;function it(e){const{type:t,colorSpace:r}=e;let{values:o}=e;return t.indexOf("rgb")!==-1?o=o.map((s,i)=>i<3?parseInt(s,10):s):t.indexOf("hsl")!==-1&&(o[1]=`${o[1]}%`,o[2]=`${o[2]}%`),t.indexOf("color")!==-1?o=`${r} ${o.join(" ")}`:o=`${o.join(", ")}`,`${t}(${o})`}function Ji(e){if(e.indexOf("#")===0)return e;const{values:t}=Ae(e);return`#${t.map((r,o)=>Xi(o===3?Math.round(255*r):r)).join("")}`}function Eo(e){e=Ae(e);const{values:t}=e,r=t[0],o=t[1]/100,s=t[2]/100,i=o*Math.min(s,1-s),l=(c,p=(c+r/30)%12)=>s-i*Math.max(Math.min(p-3,9-p,1),-1);let d="rgb";const u=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(d+="a",u.push(t[3])),it({type:d,values:u})}function cn(e){e=Ae(e);let t=e.type==="hsl"||e.type==="hsla"?Ae(Eo(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function Zi(e,t){const r=cn(e),o=cn(t);return(Math.max(r,o)+.05)/(Math.min(r,o)+.05)}function So(e,t){return e=Ae(e),t=Wn(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,it(e)}function Ri(e,t,r){try{return So(e,t)}catch{return r&&console.warn(r),e}}function Gn(e,t){if(e=Ae(e),t=Wn(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return it(e)}function el(e,t,r){try{return Gn(e,t)}catch{return r&&console.warn(r),e}}function Un(e,t){if(e=Ae(e),t=Wn(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return it(e)}function tl(e,t,r){try{return Un(e,t)}catch{return r&&console.warn(r),e}}function Co(e,t=.15){return cn(e)>.5?Gn(e,t):Un(e,t)}function nl(e,t,r){try{return Co(e,t)}catch{return r&&console.warn(r),e}}function rl(e,t,r,o=1){const s=(u,c)=>Math.round((u**(1/o)*(1-r)+c**(1/o)*r)**o),i=Ae(e),l=Ae(t),d=[s(i.values[0],l.values[0]),s(i.values[1],l.values[1]),s(i.values[2],l.values[2])];return it({type:"rgb",values:d})}const Pt={black:"#000",white:"#fff"},ol={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},lt={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},ct={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},At={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},ut={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},dt={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},pt={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},al=["mode","contrastThreshold","tonalOffset"],To={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Pt.white,default:Pt.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Yn={text:{primary:Pt.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Pt.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _o(e,t,r,o){const s=o.light||o,i=o.dark||o*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=qi(e.main,s):t==="dark"&&(e.dark=Hi(e.main,i)))}function sl(e="light"){return e==="dark"?{main:ut[200],light:ut[50],dark:ut[400]}:{main:ut[700],light:ut[400],dark:ut[800]}}function il(e="light"){return e==="dark"?{main:lt[200],light:lt[50],dark:lt[400]}:{main:lt[500],light:lt[300],dark:lt[700]}}function ll(e="light"){return e==="dark"?{main:ct[500],light:ct[300],dark:ct[700]}:{main:ct[700],light:ct[400],dark:ct[800]}}function cl(e="light"){return e==="dark"?{main:dt[400],light:dt[300],dark:dt[700]}:{main:dt[700],light:dt[500],dark:dt[900]}}function ul(e="light"){return e==="dark"?{main:pt[400],light:pt[300],dark:pt[700]}:{main:pt[800],light:pt[500],dark:pt[900]}}function dl(e="light"){return e==="dark"?{main:At[400],light:At[300],dark:At[700]}:{main:"#ed6c02",light:At[500],dark:At[900]}}function pl(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:o=.2}=e,s=Ye(e,al),i=e.primary||sl(t),l=e.secondary||il(t),d=e.error||ll(t),u=e.info||cl(t),c=e.success||ul(t),p=e.warning||dl(t);function h(f){const v=bo(f,Yn.text.primary)>=r?Yn.text.primary:To.text.primary;{const O=bo(f,v);O<3&&console.error([`MUI: The contrast ratio of ${O}:1 for ${v} on ${f}`,"falls below the WCAG recommended absolute minimum contrast ratio of 3:1.","https://www.w3.org/TR/2008/REC-WCAG20-20081211/#visual-audio-contrast-contrast"].join(`
`))}return v}const y=({color:f,name:v,mainShade:O=500,lightShade:b=300,darkShade:w=700})=>{if(f=ee({},f),!f.main&&f[O]&&(f.main=f[O]),!f.hasOwnProperty("main"))throw new Error(`MUI: The color${v?` (${v})`:""} provided to augmentColor(color) is invalid.
The color object needs to have a \`main\` property or a \`${O}\` property.`);if(typeof f.main!="string")throw new Error(`MUI: The color${v?` (${v})`:""} provided to augmentColor(color) is invalid.
\`color.main\` should be a string, but \`${JSON.stringify(f.main)}\` was provided instead.

Did you intend to use one of the following approaches?

import { green } from "@mui/material/colors";

const theme1 = createTheme({ palette: {
  primary: green,
} });

const theme2 = createTheme({ palette: {
  primary: { main: green[500] },
} });`);return _o(f,"light",b,o),_o(f,"dark",w,o),f.contrastText||(f.contrastText=h(f.main)),f},m={dark:Yn,light:To};return m[t]||console.error(`MUI: The palette mode \`${t}\` is not supported.`),Re(ee({common:ee({},Pt),mode:t,primary:y({color:i,name:"primary"}),secondary:y({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:y({color:d,name:"error"}),warning:y({color:p,name:"warning"}),info:y({color:u,name:"info"}),success:y({color:c,name:"success"}),grey:ol,contrastThreshold:r,getContrastText:h,augmentColor:y,tonalOffset:o},m[t]),s)}const fl=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function gl(e){return Math.round(e*1e5)/1e5}const wo={textTransform:"uppercase"},Oo='"Roboto", "Helvetica", "Arial", sans-serif';function ml(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:o=Oo,fontSize:s=14,fontWeightLight:i=300,fontWeightRegular:l=400,fontWeightMedium:d=500,fontWeightBold:u=700,htmlFontSize:c=16,allVariants:p,pxToRem:h}=r,y=Ye(r,fl);typeof s!="number"&&console.error("MUI: `fontSize` is required to be a number."),typeof c!="number"&&console.error("MUI: `htmlFontSize` is required to be a number.");const m=s/14,x=h||(O=>`${O/c*m}rem`),f=(O,b,w,C,$)=>ee({fontFamily:o,fontWeight:O,fontSize:x(b),lineHeight:w},o===Oo?{letterSpacing:`${gl(C/b)}em`}:{},$,p),v={h1:f(i,96,1.167,-1.5),h2:f(i,60,1.2,-.5),h3:f(l,48,1.167,0),h4:f(l,34,1.235,.25),h5:f(l,24,1.334,0),h6:f(d,20,1.6,.15),subtitle1:f(l,16,1.75,.15),subtitle2:f(d,14,1.57,.1),body1:f(l,16,1.5,.15),body2:f(l,14,1.43,.15),button:f(d,14,1.75,.4,wo),caption:f(l,12,1.66,.4),overline:f(l,12,2.66,1,wo),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Re(ee({htmlFontSize:c,pxToRem:x,fontFamily:o,fontSize:s,fontWeightLight:i,fontWeightRegular:l,fontWeightMedium:d,fontWeightBold:u},v),y,{clone:!1})}const hl=.2,yl=.14,bl=.12;function le(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${hl})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${yl})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${bl})`].join(",")}const xl=["none",le(0,2,1,-1,0,1,1,0,0,1,3,0),le(0,3,1,-2,0,2,2,0,0,1,5,0),le(0,3,3,-2,0,3,4,0,0,1,8,0),le(0,2,4,-1,0,4,5,0,0,1,10,0),le(0,3,5,-1,0,5,8,0,0,1,14,0),le(0,3,5,-1,0,6,10,0,0,1,18,0),le(0,4,5,-2,0,7,10,1,0,2,16,1),le(0,5,5,-3,0,8,10,1,0,3,14,2),le(0,5,6,-3,0,9,12,1,0,3,16,2),le(0,6,6,-3,0,10,14,1,0,4,18,3),le(0,6,7,-4,0,11,15,1,0,4,20,3),le(0,7,8,-4,0,12,17,2,0,5,22,4),le(0,7,8,-4,0,13,19,2,0,5,24,4),le(0,7,9,-4,0,14,21,2,0,5,26,4),le(0,8,9,-5,0,15,22,2,0,6,28,5),le(0,8,10,-5,0,16,24,2,0,6,30,5),le(0,8,11,-5,0,17,26,2,0,6,32,5),le(0,9,11,-5,0,18,28,2,0,7,34,6),le(0,9,12,-6,0,19,29,2,0,7,36,6),le(0,10,13,-6,0,20,31,3,0,8,38,7),le(0,10,13,-6,0,21,33,3,0,8,40,7),le(0,10,14,-6,0,22,35,3,0,8,42,7),le(0,11,14,-7,0,23,36,3,0,9,44,8),le(0,11,15,-7,0,24,38,3,0,9,46,8)],vl=["duration","easing","delay"],El={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},Sl={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Mo(e){return`${Math.round(e)}ms`}function Cl(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function Tl(e){const t=ee({},El,e.easing),r=ee({},Sl,e.duration);return ee({getAutoHeightDuration:Cl,create:(s=["all"],i={})=>{const{duration:l=r.standard,easing:d=t.easeInOut,delay:u=0}=i,c=Ye(i,vl);{const p=y=>typeof y=="string",h=y=>!isNaN(parseFloat(y));!p(s)&&!Array.isArray(s)&&console.error('MUI: Argument "props" must be a string or Array.'),!h(l)&&!p(l)&&console.error(`MUI: Argument "duration" must be a number or a string but found ${l}.`),p(d)||console.error('MUI: Argument "easing" must be a string.'),!h(u)&&!p(u)&&console.error('MUI: Argument "delay" must be a number or a string.'),typeof i!="object"&&console.error(["MUI: Secong argument of transition.create must be an object.","Arguments should be either `create('prop1', options)` or `create(['prop1', 'prop2'], options)`"].join(`
`)),Object.keys(c).length!==0&&console.error(`MUI: Unrecognized argument(s) [${Object.keys(c).join(",")}].`)}return(Array.isArray(s)?s:[s]).map(p=>`${p} ${typeof l=="string"?l:Mo(l)} ${d} ${typeof u=="string"?u:Mo(u)}`).join(",")}},e,{easing:t,duration:r})}const _l={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},wl=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Ol(e={},...t){const{mixins:r={},palette:o={},transitions:s={},typography:i={}}=e,l=Ye(e,wl);if(e.vars&&e.generateCssVars===void 0)throw new Error("MUI: `vars` is a private field used for CSS variables support.\nPlease use another name.");const d=pl(o),u=fo(e);let c=Re(u,{mixins:Gi(u.breakpoints,r),palette:d,shadows:xl.slice(),typography:ml(d,i),transitions:Tl(s),zIndex:ee({},_l)});c=Re(c,l),c=t.reduce((p,h)=>Re(p,h),c);{const p=["active","checked","completed","disabled","error","expanded","focused","focusVisible","required","selected"],h=(y,m)=>{let x;for(x in y){const f=y[x];if(p.indexOf(x)!==-1&&Object.keys(f).length>0){{const v=vn("",x);console.error([`MUI: The \`${m}\` component increases the CSS specificity of the \`${x}\` internal state.`,"You can not override it like this: ",JSON.stringify(y,null,2),"",`Instead, you need to use the '&.${v}' syntax:`,JSON.stringify({root:{[`&.${v}`]:f}},null,2),"","https://mui.com/r/state-classes-guide"].join(`
`))}y[x]={}}}};Object.keys(c.components).forEach(y=>{const m=c.components[y].styleOverrides;m&&y.indexOf("Mui")===0&&h(m,y)})}return c.unstable_sxConfig=ee({},kt,l==null?void 0:l.unstable_sxConfig),c.unstable_sx=function(h){return rn({sx:h,theme:this})},c}const Ml=Ol(),Il="$$material";function kl(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const Pl=Oi({themeId:Il,defaultTheme:Ml,rootShouldForwardProp:e=>kl(e)&&e!=="classes"});function Al(e){return vn("MuiSvgIcon",e)}fa("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const $l=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Fl=e=>{const{color:t,fontSize:r,classes:o}=e,s={root:["root",t!=="inherit"&&`color${Nt(t)}`,`fontSize${Nt(r)}`]};return ua(s,Al,o)},Dl=Pl("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${Nt(r.color)}`],t[`fontSize${Nt(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,o,s,i,l,d,u,c,p,h,y,m,x;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:t.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(o=r.create)==null?void 0:o.call(r,"fill",{duration:(s=e.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((i=e.typography)==null||(l=i.pxToRem)==null?void 0:l.call(i,20))||"1.25rem",medium:((d=e.typography)==null||(u=d.pxToRem)==null?void 0:u.call(d,24))||"1.5rem",large:((c=e.typography)==null||(p=c.pxToRem)==null?void 0:p.call(c,35))||"2.1875rem"}[t.fontSize],color:(h=(y=(e.vars||e).palette)==null||(y=y[t.color])==null?void 0:y.main)!=null?h:{action:(m=(e.vars||e).palette)==null||(m=m.action)==null?void 0:m.active,disabled:(x=(e.vars||e).palette)==null||(x=x.action)==null?void 0:x.disabled,inherit:void 0}[t.color]}}),un=R.forwardRef(function(t,r){const o=ba({props:t,name:"MuiSvgIcon"}),{children:s,className:i,color:l="inherit",component:d="svg",fontSize:u="medium",htmlColor:c,inheritViewBox:p=!1,titleAccess:h,viewBox:y="0 0 24 24"}=o,m=Ye(o,$l),x=R.isValidElement(s)&&s.type==="svg",f=ee({},o,{color:l,component:d,fontSize:u,instanceFontSize:t.fontSize,inheritViewBox:p,viewBox:y,hasSvgAsChild:x}),v={};p||(v.viewBox=y);const O=Fl(f);return ie.jsxs(Dl,ee({as:d,className:ga(O.root,i),focusable:"false",color:c,"aria-hidden":h?void 0:!0,role:h?"img":void 0,ref:r},v,m,x&&s.props,{ownerState:f,children:[x?s.props.children:s,h?ie.jsx("title",{children:h}):null]}))});un.propTypes={children:G.node,classes:G.object,className:G.string,color:G.oneOfType([G.oneOf(["inherit","action","disabled","primary","secondary","error","info","success","warning"]),G.string]),component:G.elementType,fontSize:G.oneOfType([G.oneOf(["inherit","large","medium","small"]),G.string]),htmlColor:G.string,inheritViewBox:G.bool,shapeRendering:G.string,sx:G.oneOfType([G.arrayOf(G.oneOfType([G.func,G.object,G.bool])),G.func,G.object]),titleAccess:G.string,viewBox:G.string},un.muiName="SvgIcon";function me(e,t){function r(o,s){return ie.jsx(un,ee({"data-testid":`${t}Icon`,ref:s},o,{children:e}))}return r.displayName=`${t}Icon`,r.muiName=un.muiName,R.memo(R.forwardRef(r))}const Vn=me(ie.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),dn=me(ie.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics"),Ll=me(ie.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),Nl=me(ie.jsx("path",{d:"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"}),"ArrowForward"),pn=me(ie.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),Io=me(ie.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),jl=me(ie.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),zl=me(ie.jsx("path",{d:"M4 7v2c0 .55-.45 1-1 1H2v4h1c.55 0 1 .45 1 1v2c0 1.65 1.35 3 3 3h3v-2H7c-.55 0-1-.45-1-1v-2c0-1.3-.84-2.42-2-2.83v-.34C5.16 11.42 6 10.3 6 9V7c0-.55.45-1 1-1h3V4H7C5.35 4 4 5.35 4 7m17 3c-.55 0-1-.45-1-1V7c0-1.65-1.35-3-3-3h-3v2h3c.55 0 1 .45 1 1v2c0 1.3.84 2.42 2 2.83v.34c-1.16.41-2 1.52-2 2.83v2c0 .55-.45 1-1 1h-3v2h3c1.65 0 3-1.35 3-3v-2c0-.55.45-1 1-1h1v-4z"}),"DataObject"),qe=me(ie.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),ko=me(ie.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),Po=me(ie.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),fn=me(ie.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Hn=me(ie.jsx("path",{d:"M12 10.9c-.61 0-1.1.49-1.1 1.1s.49 1.1 1.1 1.1c.61 0 1.1-.49 1.1-1.1s-.49-1.1-1.1-1.1M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m2.19 12.19L6 18l3.81-8.19L18 6z"}),"Explore"),Bl=me(ie.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"}),"GridOn"),Ao=me(ie.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),gn=me(ie.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"LocationOn"),Wl=me(ie.jsx("path",{d:"M8 5v14l11-7z"}),"PlayArrow"),qn=me(ie.jsx("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),Gl=me(ie.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),ft=me(ie.jsx("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings"),Kn=me(ie.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning"),$t={INDEXING_STATE:"metageo/indexingState",FLOW_STATE:"metageo/flowState",MAPPING_CONFIG:"metageo/mappingConfig"};function Xn(e,t){try{const r=localStorage.getItem(e);return r===null?t:JSON.parse(r)}catch(r){return console.warn(`Failed to parse stored data for key ${e}:`,r),t}}function Ul(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){console.warn(`Failed to store data for key ${e}:`,r)}}function Yl(e){try{localStorage.removeItem(e)}catch(t){console.warn(`Failed to remove data for key ${e}:`,t)}}function Vl(){return Xn($t.INDEXING_STATE,null)}function Qn(){return Xn($t.FLOW_STATE,null)}function Hl(e){Ul($t.FLOW_STATE,e)}function Jn(){Yl($t.FLOW_STATE)}function ql(){return Xn($t.MAPPING_CONFIG,null)}const gt=Qn(),Kl=pe.atom({key:"metageo/activeStep",default:(gt==null?void 0:gt.activeStep)??0}),Xl=pe.atom({key:"metageo/hasStarted",default:(gt==null?void 0:gt.hasStarted)??!1});pe.atom({key:"metageo/geoFields",default:[]}),pe.atom({key:"metageo/osmTags",default:[]});const Ql={bbox:null,gridTiles:16,location:"",gridCells:[],executionMode:"immediate",indexingStatus:"idle",quadtreeCells:[],realSampleDistribution:{}},mt=pe.atom({key:"metageo/indexing",default:Vl()||Ql});function ce(e,t,r){return async(o={})=>new Promise((s,i)=>{e(t,{operator:r,params:o,callback:l=>{l!=null&&l.error?i(new Error(l.error)):s(l)}})})}function _e(){console.log(" useMetageoClient: Hook starting...");const e=Q.usePanelEvent();return console.log(" useMetageoClient: handleEvent =",e),n.useMemo(()=>({define_area_auto:ce(e,"define_area_auto","@voxel51/metageo/metageo_panel#define_area_auto"),calculate_sample_distribution:ce(e,"calculate_sample_distribution","@voxel51/metageo/metageo_panel#get_sample_distribution"),index_grid:ce(e,"index_grid","@voxel51/metageo/index_grid"),start_indexing:ce(e,"start_indexing","@voxel51/metageo/metageo_panel#start_indexing"),watch_indexing:ce(e,"watch_indexing","@voxel51/metageo/watch_indexing"),get_current_indexing_state:ce(e,"get_current_indexing_state","@voxel51/metageo/metageo_panel#get_current_indexing_state"),drop_index:ce(e,"drop_index","@voxel51/metageo/metageo_panel#drop_index"),get_available_osm_tags:ce(e,"get_available_osm_tags","@voxel51/metageo/metageo_panel#get_available_osm_tags"),get_field_mappings:ce(e,"get_field_mappings","@voxel51/metageo/metageo_panel#get_field_mappings"),save_mapping_config:ce(e,"save_mapping_config","@voxel51/metageo/metageo_panel#save_mapping_config"),get_mapping_config:ce(e,"get_mapping_config","@voxel51/metageo/metageo_panel#get_mapping_config"),clear_mapping_config:ce(e,"clear_mapping_config","@voxel51/metageo/metageo_panel#clear_mapping_config"),clear_enrichment_data:ce(e,"clear_enrichment_data","@voxel51/metageo/metageo_panel#clear_enrichment_data"),enrich_dataset_async:ce(e,"enrich_dataset_async","@voxel51/metageo/metageo_panel#enrich_dataset_async"),get_enrichment_status:ce(e,"get_enrichment_status","@voxel51/metageo/metageo_panel#get_enrichment_status"),get_geo_fields:ce(e,"get_geo_fields","@voxel51/metageo/metageo_panel#get_geo_fields"),get_dataset_info:ce(e,"get_dataset_info","@voxel51/metageo/metageo_panel#get_dataset_info"),get_sample_geo_points:ce(e,"get_sample_geo_points","@voxel51/metageo/metageo_panel#get_sample_geo_points"),get_cell_data:ce(e,"get_cell_data","@voxel51/metageo/metageo_panel#get_cell_data"),cancel_indexing:ce(e,"cancel_indexing","@voxel51/metageo/metageo_panel#cancel_indexing"),reset_metageo:ce(e,"reset_metageo","@voxel51/metageo/metageo_panel#reset_metageo"),watch_enrichment:ce(e,"watch_enrichment","@voxel51/metageo/watch_enrichment_progress"),cancel_enrichment:ce(e,"cancel_enrichment","@voxel51/metageo/metageo_panel#cancel_enrichment")}),[e])}const Jl={geoField:"",useYamlConfig:!1,yamlConfig:"",enable3DDetections:!1,threeDSlice:"",detectionFieldName:"",detectionLabelTag:"",detectionRadius:100,enableSampleTagging:!1,tagSlice:"",tagMappings:[],enableFieldMapping:!1,fieldMappings:[],includeAllTagsAsMetadata:!1,metadataFieldName:"osm_metadata"},Zl=pe.atom({key:"metageo/mapping",default:ql()||Jl});function ht(){console.log(" useMappingConfig: Hook starting...");const e=_e(),[t,r]=n.useState(!1);let o,s;try{[o,s]=pe.useRecoilState(Zl)}catch(c){return console.error(" useMappingConfig: Error accessing atom:",c),{state:{geoField:"",useYamlConfig:!1,yamlConfig:"",enable3DDetections:!1,threeDSlice:"",detectionFieldName:"",detectionLabelTag:"",detectionRadius:100,enableSampleTagging:!1,tagSlice:"",tagMappings:[],enableFieldMapping:!1,fieldMappings:[],includeAllTagsAsMetadata:!1,metadataFieldName:"osm_metadata"},actions:{setDetectionRadius:()=>{},setGeoField:()=>{},setUseYamlConfig:()=>{},setYamlConfig:()=>{},setEnable3DDetections:()=>{},setThreeDSlice:()=>{},setDetectionFieldName:()=>{},setDetectionLabelTag:()=>{},setEnableSampleTagging:()=>{},setTagSlice:()=>{},setTagRadius:()=>{},setRenderOn3D:()=>{},setRenderOn2D:()=>{},setEnableFieldMapping:()=>{},addTagMapping:()=>{},removeTagMapping:()=>{},updateTagMapping:()=>{},addFieldMapping:()=>{},removeFieldMapping:()=>{},updateFieldMapping:()=>{},setIncludeAllTagsAsMetadata:()=>{},setMetadataFieldName:()=>{},resetMapping:()=>{}}}}console.log(" useMappingConfig: mappingConfig =",o),console.log(" useMappingConfig: mappingConfig.tagMappings =",o==null?void 0:o.tagMappings),console.log(" useMappingConfig: mappingConfig.fieldMappings =",o==null?void 0:o.fieldMappings);const i=n.useCallback(async c=>{if(!(!e||!t))try{console.log(" useMappingConfig: Auto-saving mapping config:",c),await e.save_mapping_config({mapping_config:c})}catch(p){console.error(" useMappingConfig: Error auto-saving mapping config:",p)}},[e,t]),l=n.useCallback(async()=>{var c;if(!(!e||t))try{console.log(" useMappingConfig: Loading mapping config from backend");const p=await e.get_mapping_config();((c=p==null?void 0:p.result)==null?void 0:c.status)==="success"&&p.result.mapping_config&&(console.log(" useMappingConfig: Loaded mapping config:",p.result.mapping_config),s(p.result.mapping_config))}catch(p){console.error(" useMappingConfig: Error loading mapping config:",p)}finally{r(!0)}},[e,t,s]);n.useEffect(()=>{l()},[l]),n.useEffect(()=>{t&&o&&i(o)},[o,t,i]);const d=n.useMemo(()=>({setDetectionRadius:c=>{s(p=>({...p,detectionRadius:c}))},setGeoField:c=>{s(p=>({...p,geoField:c}))},setUseYamlConfig:c=>{s(p=>({...p,useYamlConfig:c}))},setYamlConfig:c=>{s(p=>({...p,yamlConfig:c}))},setEnable3DDetections:c=>{s(p=>({...p,enable3DDetections:c}))},setThreeDSlice:c=>{s(p=>({...p,threeDSlice:c}))},setDetectionFieldName:c=>{s(p=>({...p,detectionFieldName:c}))},setDetectionLabelTag:c=>{s(p=>({...p,detectionLabelTag:c}))},setEnableSampleTagging:c=>{s(p=>({...p,enableSampleTagging:c}))},setTagSlice:c=>{s(p=>({...p,tagSlice:c}))},addTagMapping:c=>{s(p=>({...p,tagMappings:[...p.tagMappings,c]}))},updateTagMapping:(c,p)=>{s(h=>({...h,tagMappings:h.tagMappings.map((y,m)=>m===c?p:y)}))},removeTagMapping:c=>{s(p=>({...p,tagMappings:p.tagMappings.filter((h,y)=>y!==c)}))},addFieldMapping:c=>{s(p=>({...p,fieldMappings:[...p.fieldMappings,c]}))},updateFieldMapping:(c,p)=>{s(h=>({...h,fieldMappings:h.fieldMappings.map((y,m)=>m===c?p:y)}))},removeFieldMapping:c=>{s(p=>({...p,fieldMappings:p.fieldMappings.filter((h,y)=>y!==c)}))},setEnableFieldMapping:c=>{s(p=>({...p,enableFieldMapping:c}))},setIncludeAllTagsAsMetadata:c=>{s(p=>({...p,includeAllTagsAsMetadata:c}))},setMetadataFieldName:c=>{s(p=>({...p,metadataFieldName:c}))},resetMapping:()=>{s(c=>({...c,geoField:"",useYamlConfig:!1,yamlConfig:"",enable3DDetections:!1,threeDSlice:"",detectionFieldName:"",detectionLabelTag:"",detectionRadius:100,enableSampleTagging:!1,tagSlice:"",tagMappings:[],tagRadius:100,renderOn3D:!0,renderOn2D:!1,enableFieldMapping:!1,fieldMappings:[],includeAllTagsAsMetadata:!1,metadataFieldName:"osm_metadata"}))},clearMappingConfig:async()=>{if(e)try{console.log(" useMappingConfig: Clearing mapping config from backend"),await e.clear_mapping_config(),s(c=>({...c,geoField:"",useYamlConfig:!1,yamlConfig:"",enable3DDetections:!1,threeDSlice:"",detectionFieldName:"",detectionLabelTag:"",detectionRadius:100,enableSampleTagging:!1,tagSlice:"",tagMappings:[],enableFieldMapping:!1,fieldMappings:[],includeAllTagsAsMetadata:!1,metadataFieldName:"osm_metadata"}))}catch(c){console.error(" useMappingConfig: Error clearing mapping config:",c)}}}),[s,e]),u=n.useMemo(()=>({hasValidConfig:!!(o.geoField&&o.radius>0),has3DDetections:o.enable3DDetections,hasSampleTagging:o.enableSampleTagging,hasFieldMapping:o.enableFieldMapping,tagMappingsCount:o.tagMappings?o.tagMappings.length:0,fieldMappingsCount:o.fieldMappings?o.fieldMappings.length:0}),[o]);return{state:o,actions:d,derived:u}}function Zn(){var l;console.log(" useIndexingState: Hook starting...");let e,t;try{[e,t]=pe.useRecoilState(mt)}catch(d){return console.error(" useIndexingState: Error accessing atom:",d),{state:{bbox:null,gridTiles:16,location:"",gridCells:[],executionMode:"immediate",indexingStatus:"idle",quadtreeCells:[],realSampleDistribution:{}},actions:{setBbox:()=>{},setLocation:()=>{},setGridTiles:()=>{},setGridCells:()=>{},setIndexingStatus:()=>{},setQuadtreeCells:()=>{},setRealSampleDistribution:()=>{},updateCellStatus:()=>{},resetIndexing:()=>{},clearDistribution:()=>{}},derived:{hasBbox:!1,hasGridCells:!1,hasQuadtreeCells:!1,isIndexing:!1,isCompleted:!1,isFailed:!1,canStartIndexing:!1,canCalculateDistribution:!1,progress:0,hasExistingIndex:!1}}}console.log(" useIndexingState: indexingState =",e),console.log(" useIndexingState: indexingState.gridCells =",e==null?void 0:e.gridCells),console.log(" useIndexingState: indexingState.gridCells?.length =",(l=e==null?void 0:e.gridCells)==null?void 0:l.length);const r=_e();console.log(" useIndexingState: client =",r);const{state:o}=ht(),s=n.useMemo(()=>({setBbox:d=>{t(u=>({...u,bbox:d}))},setLocation:d=>{t(u=>({...u,location:d}))},setGridTiles:d=>{t(u=>({...u,gridTiles:d}))},setGridCells:d=>{t(u=>({...u,gridCells:d}))},setIndexingStatus:d=>{t(u=>({...u,indexingStatus:d}))},setQuadtreeCells:d=>{t(u=>({...u,quadtreeCells:d}))},setRealSampleDistribution:d=>{t(u=>({...u,realSampleDistribution:d}))},updateCellStatus:(d,u,c,p)=>{t(h=>({...h,gridCells:h.gridCells.map(y=>y.id===d?{...y,status:u,progress:c??y.progress,error:p}:y)}))},resetIndexing:(d="idle")=>{t(u=>({...u,gridCells:[],indexingStatus:d,quadtreeCells:[],realSampleDistribution:{}}))},clearDistribution:()=>{t(d=>({...d,gridCells:[],realSampleDistribution:{}}))}}),[t]),i=n.useMemo(()=>({hasBbox:!!e.bbox,hasGridCells:!!(e.gridCells&&e.gridCells.length>0),hasQuadtreeCells:!!(e.quadtreeCells&&e.quadtreeCells.length>0),isIndexing:e.indexingStatus==="running",isCompleted:e.indexingStatus==="completed",isFailed:e.indexingStatus==="failed",canStartIndexing:!!(e.bbox&&o.geoField&&e.gridTiles>0),canCalculateDistribution:!!(e.bbox&&o.geoField&&e.gridTiles>0),progress:e.gridCells&&e.gridCells.length>0?e.gridCells.filter(d=>d.status==="completed").length/e.gridCells.length:0,hasExistingIndex:e.gridCells&&e.gridCells.length>0||e.indexingStatus!=="idle"&&e.indexingStatus!=="cancelled"}),[e]);return{state:e,actions:s,derived:i}}const ae={INDEX_CONFIGURATION:0,INDEXING:1,MAPPING:2,ENRICH:3,SEARCH_CLEANUP:4};function Rn(){var S;console.log(" useMetageoFlow: Hook starting...");let e,t,r,o;const[s,i]=n.useState(!0);n.useEffect(()=>{const T=setTimeout(()=>{console.log(" useMetageoFlow: Loading timeout reached, setting isLoadingState to false"),i(!1)},5e3);return()=>clearTimeout(T)},[]),n.useEffect(()=>{r&&(console.log(" useMetageoFlow: Saving flow state to localStorage:",{activeStep:e,hasStarted:r}),Hl({activeStep:e,hasStarted:r}))},[e,r]);try{[e,t]=pe.useRecoilState(Kl),[r,o]=pe.useRecoilState(Xl)}catch(T){return console.error(" useMetageoFlow: Error accessing atoms:",T),{state:{activeStep:0,hasStarted:!1,isLoadingState:!0},actions:{start:()=>{},next:()=>{},back:()=>{},goToStep:()=>{},autoDetectBbox:async()=>({success:!1,error:"Client not available"}),calculateSampleDistribution:async()=>({success:!1,error:"Client not available"}),startIndexing:async()=>({success:!1,error:"Client not available"}),dropIndex:async()=>({success:!1,error:"Client not available"}),cancelIndexing:async()=>({success:!1,error:"Client not available"}),loadCurrentIndexingState:async()=>({success:!1,error:"Client not available"}),resetMetageo:async()=>({success:!1,error:"Client not available"})},derived:{canGoNext:!1,canGoBack:!1,isFirstStep:!0,isLastStep:!1,stepName:"Unknown",hasExistingIndex:!1}}}console.log(" useMetageoFlow: activeStep =",e),console.log(" useMetageoFlow: hasStarted =",r);const{state:l,actions:d}=Zn();console.log(" useMetageoFlow: indexingState =",l),console.log(" useMetageoFlow: indexingState.gridCells =",l==null?void 0:l.gridCells),console.log(" useMetageoFlow: indexingState.gridCells?.length =",(S=l==null?void 0:l.gridCells)==null?void 0:S.length);const{state:u}=ht();console.log(" useMetageoFlow: mappingConfig =",u);const c=_e();console.log(" useMetageoFlow: client =",c);const p=n.useMemo(()=>()=>{o(!0),t(ae.INDEX_CONFIGURATION)},[o,t]),h=n.useMemo(()=>()=>{if(console.log(" next() called: activeStep =",e,"STEPS.SEARCH_CLEANUP =",ae.SEARCH_CLEANUP),e<ae.SEARCH_CLEANUP){const T=e+1;console.log(" next() setting activeStep from",e,"to",T),t(T)}else console.log(" next() blocked: already at last step")},[e,t]),y=n.useMemo(()=>()=>{e>ae.INDEX_CONFIGURATION&&t(e-1)},[e,t]),m=n.useMemo(()=>T=>{t(T)},[t]),x=n.useMemo(()=>async T=>{var P;if(!c)return{success:!1,error:"Client not available"};try{const k=await c.define_area_auto({geo_field:T});if((P=k==null?void 0:k.result)!=null&&P.bbox){const F={minLon:k.result.bbox[0],minLat:k.result.bbox[1],maxLon:k.result.bbox[2],maxLat:k.result.bbox[3]};return d.setBbox(F),d.setLocation(T),{success:!0,bbox:F}}return{success:!1,error:"No bounding box data received"}}catch(k){return{success:!1,error:k instanceof Error?k.message:"Unknown error"}}},[c,d]),f=n.useMemo(()=>async()=>{var T;if(!c)return{success:!1,error:"Client not available"};if(!l.bbox||!u.geoField||!l.gridTiles)return{success:!1,error:"Missing required configuration"};try{const P=[l.bbox.minLon,l.bbox.minLat,l.bbox.maxLon,l.bbox.maxLat],k=await c.calculate_sample_distribution({bbox:P,grid_tiles:l.gridTiles,geo_field:u.geoField});return(T=k==null?void 0:k.result)!=null&&T.grid_cells?(d.setGridCells(k.result.grid_cells),d.setRealSampleDistribution(k.result.sample_distribution||{}),{success:!0,data:k.result}):{success:!1,error:"No grid cells data received"}}catch(P){return{success:!1,error:P instanceof Error?P.message:"Unknown error"}}},[l.bbox,u.geoField,l.gridTiles,c,d]),v=n.useMemo(()=>async()=>{var T;if(!c)return{success:!1,error:"Client not available"};if(!l.bbox||!u.geoField||!l.gridTiles)return{success:!1,error:"Missing required configuration"};try{const P=[l.bbox.minLon,l.bbox.minLat,l.bbox.maxLon,l.bbox.maxLat];d.setIndexingStatus("running");const k=await c.start_indexing({bbox:P,grid_tiles:l.gridTiles,geo_field:u.geoField,execution_mode:"immediate"});return(T=k==null?void 0:k.result)!=null&&T.indexing_id?(c.watch_indexing({indexing_id:k.result.indexing_id}),{success:!0,indexingId:k.result.indexing_id}):{success:!1,error:"No indexing ID received"}}catch(P){return d.setIndexingStatus("failed"),{success:!1,error:P instanceof Error?P.message:"Unknown error"}}},[l.bbox,u.geoField,l.gridTiles,c,d]),O=n.useMemo(()=>async()=>{if(!c)return{success:!1,error:"Client not available"};try{return await c.drop_index(),d.resetIndexing(),t(ae.INDEX_CONFIGURATION),o(!1),Jn(),{success:!0}}catch(T){return{success:!1,error:T instanceof Error?T.message:"Unknown error"}}},[c,d,t,o]),b=n.useCallback(async()=>{var T,P;if(!c)return{success:!1,error:"Client not available"};try{console.log(" cancelIndexing: Starting cancellation...");const k=await c.cancel_indexing({});if(console.log(" cancelIndexing: Backend result:",k),((T=k==null?void 0:k.result)==null?void 0:T.status)==="cancelled"){console.log(" cancelIndexing: Cancellation successful, resetting local state..."),d.resetIndexing("cancelled"),t(ae.INDEX_CONFIGURATION),o(!1),Jn(),console.log(" cancelIndexing: Reloading indexing state from backend...");try{const F=await c.get_current_indexing_state();if(console.log(" cancelIndexing: Load result:",F),F!=null&&F.result){const U=F.result;if(U.indexing_state){const E=U.indexing_state;E.bbox&&d.setBbox({minLon:E.bbox[0],minLat:E.bbox[1],maxLon:E.bbox[2],maxLat:E.bbox[3]}),E.grid_cells&&d.setGridCells(E.grid_cells),E.quadtree_cells&&d.setQuadtreeCells(E.quadtree_cells),E.real_sample_distribution&&d.setRealSampleDistribution(E.real_sample_distribution),E.indexing_status&&d.setIndexingStatus(E.indexing_status),E.location&&d.setLocation(E.location),E.grid_tiles&&d.setGridTiles(E.grid_tiles),console.log(" cancelIndexing: Indexing state reloaded after cancellation")}}}catch(F){console.warn(" cancelIndexing: Failed to reload indexing state:",F)}return{success:!0,message:k.result.message}}return console.error(" cancelIndexing: Backend did not return cancelled status:",k),{success:!1,error:((P=k==null?void 0:k.result)==null?void 0:P.message)||"Failed to cancel indexing"}}catch(k){return console.error(" cancelIndexing: Exception occurred:",k),{success:!1,error:k instanceof Error?k.message:"Unknown error"}}},[c,d,t,o]),w=n.useMemo(()=>async()=>{var T,P;if(console.log(" loadCurrentIndexingState: Function called"),console.log(" loadCurrentIndexingState: Client available:",!!c),i(!0),!c)return console.warn(" loadCurrentIndexingState: Client not available"),i(!1),{success:!1,error:"Client not available"};try{console.log(" loadCurrentIndexingState: Calling client.get_current_indexing_state()");const k=await c.get_current_indexing_state();if(console.log(" loadCurrentIndexingState: Result received:",k),k!=null&&k.result){const F=k.result;if(console.log(" loadCurrentIndexingState: Data extracted:",F),console.log(" loadCurrentIndexingState: Data keys:",Object.keys(F)),F.bbox||F.grid_cells||F.indexing_status){console.log(" loadCurrentIndexingState: Found data directly in result"),F.bbox&&d.setBbox({minLon:F.bbox[0],minLat:F.bbox[1],maxLon:F.bbox[2],maxLat:F.bbox[3]}),F.grid_cells&&d.setGridCells(F.grid_cells),F.quadtree_cells&&d.setQuadtreeCells(F.quadtree_cells),F.real_sample_distribution&&d.setRealSampleDistribution(F.real_sample_distribution),F.indexing_status&&d.setIndexingStatus(F.indexing_status),F.geo_field&&d.setLocation(F.geo_field),F.grid_tiles&&d.setGridTiles(F.grid_tiles),o(!0);const U=Qn();console.log(" loadCurrentIndexingState: Saved flow state:",U);let E=!1;try{const L=await c.get_mapping_config();E=((T=L==null?void 0:L.result)==null?void 0:T.status)==="success"&&L.result.mapping_config,console.log(" loadCurrentIndexingState: Has mapping config:",E)}catch(L){console.log(" loadCurrentIndexingState: Error checking mapping config:",L)}let M=ae.INDEXING;return U&&U.hasStarted?(M=U.activeStep,console.log(" loadCurrentIndexingState: Using saved step:",M)):F.indexing_status==="completed"&&E?(M=ae.MAPPING,console.log(" loadCurrentIndexingState: Indexing completed with mapping config, going to mapping step")):F.indexing_status==="completed"&&(M=ae.MAPPING,console.log(" loadCurrentIndexingState: Indexing completed, going to mapping step")),t(M),console.log(" loadCurrentIndexingState: Set hasStarted=true and activeStep=",M),i(!1),{success:!0,hasExistingIndex:!0}}else if(F.bbox||F.grid_cells){F.bbox&&d.setBbox({minLon:F.bbox[0],minLat:F.bbox[1],maxLon:F.bbox[2],maxLat:F.bbox[3]}),F.grid_cells&&d.setGridCells(F.grid_cells),F.geo_field&&d.setLocation(F.geo_field),o(!0);const U=Qn();console.log(" loadCurrentIndexingState: Saved flow state (old format):",U);let E=!1;try{const L=await c.get_mapping_config();E=((P=L==null?void 0:L.result)==null?void 0:P.status)==="success"&&L.result.mapping_config,console.log(" loadCurrentIndexingState: Has mapping config (old format):",E)}catch(L){console.log(" loadCurrentIndexingState: Error checking mapping config (old format):",L)}let M=ae.INDEXING;return U&&U.hasStarted?(M=U.activeStep,console.log(" loadCurrentIndexingState: Using saved step (old format):",M)):E&&(M=ae.MAPPING,console.log(" loadCurrentIndexingState: Has mapping config, going to mapping step (old format)")),t(M),console.log(" loadCurrentIndexingState: Set hasStarted=true and activeStep=",M,"(old format)"),i(!1),{success:!0,hasExistingIndex:!0}}}return i(!1),{success:!0,hasExistingIndex:!1}}catch(k){return i(!1),{success:!1,error:k instanceof Error?k.message:"Unknown error"}}},[c,d,o,t]),C=n.useMemo(()=>async()=>{if(!c)return{success:!1,error:"Client not available"};try{console.log(" resetMetageo: Starting complete reset...");const T=await c.reset_metageo();return(T==null?void 0:T.status)==="success"?(d.resetIndexing(),t(ae.INDEX_CONFIGURATION),o(!1),Jn(),console.log(" resetMetageo: Successfully reset all metageo state"),{success:!0,message:T.message}):(console.error(" resetMetageo: Reset failed:",T),{success:!1,error:(T==null?void 0:T.message)||"Reset failed"})}catch(T){return console.error(" resetMetageo: Error during reset:",T),{success:!1,error:T instanceof Error?T.message:"Unknown error during reset"}}},[c,d,t,o]),$={start:p,next:h,back:y,goToStep:m,autoDetectBbox:x,calculateSampleDistribution:f,startIndexing:v,dropIndex:O,cancelIndexing:b,loadCurrentIndexingState:w,resetMetageo:C},A=n.useMemo(()=>{const T=l.gridCells&&l.gridCells.length>0||l.indexingStatus!=="idle"&&l.indexingStatus!=="cancelled";console.log(" useMetageoFlow derived: hasExistingIndex =",T),console.log(" useMetageoFlow derived: indexingState.gridCells =",l.gridCells),console.log(" useMetageoFlow derived: indexingState.indexingStatus =",l.indexingStatus),console.log(" useMetageoFlow derived: indexingState.bbox =",l.bbox),console.log(" useMetageoFlow derived: activeStep =",e),console.log(" useMetageoFlow derived: hasStarted =",r);let P=e;T&&e===ae.INDEX_CONFIGURATION?P=ae.INDEXING:l.indexingStatus==="completed"&&e>=ae.INDEXING&&(P=e);const k=P<ae.SEARCH_CLEANUP;return console.log(" useMetageoFlow derived: canGoNext =",k,"(effectiveStep =",P,"<",ae.SEARCH_CLEANUP,")"),{canGoNext:k,canGoBack:P>ae.INDEX_CONFIGURATION,isFirstStep:P===ae.INDEX_CONFIGURATION,isLastStep:P===ae.SEARCH_CLEANUP,stepName:Object.keys(ae).find(F=>ae[F]===P)||"Unknown",hasExistingIndex:T,effectiveStep:P}},[e,l]);return{state:{activeStep:e,hasStarted:r,isLoadingState:s},actions:$,derived:A}}const Rl=(e,t,r)=>{const s=(()=>{if(Object.keys(e).length===0)return t;const[u,c,p,h]=t,y=Math.sqrt(Object.keys(e).length),m=(p-u)/y,x=(h-c)/y;let f=p,v=u,O=h,b=c;Object.entries(e).forEach(([C,$])=>{if($>0){const[A,S]=C.split("_").map(Number),T=u+S*m,P=T+m,k=c+A*x,F=k+x;f=Math.min(f,T),v=Math.max(v,P),O=Math.min(O,k),b=Math.max(b,F)}});const w=.001;return[Math.max(u,f-w),Math.max(c,O-w),Math.min(p,v+w),Math.min(h,b+w)]})(),i=Object.values(e).reduce((u,c)=>u+c,0),l={id:"root",bbox:s,sampleCount:i,depth:0,maxDepth:r.maxDepth,minSize:r.minSize},d=u=>{const[c,p,h,y]=u.bbox,m=h-c,x=y-p;if(u.depth<r.maxDepth&&u.sampleCount>r.threshold&&m>r.minSize&&x>r.minSize){const v=(c+h)/2,O=(p+y)/2,b=[{id:`${u.id}_NW`,bbox:[c,O,v,y]},{id:`${u.id}_NE`,bbox:[v,O,h,y]},{id:`${u.id}_SW`,bbox:[c,p,v,O]},{id:`${u.id}_SE`,bbox:[v,p,h,O]}];u.children=b.map(w=>{let C=0;return Object.entries(e).forEach(([$,A])=>{if(A>0){const[S,T]=$.split("_").map(Number),P=Math.sqrt(Object.keys(e).length),k=(h-c)/P,F=(y-p)/P,U=c+T*k,E=U+k,M=p+S*F,L=M+F;U<w.bbox[2]&&E>w.bbox[0]&&M<w.bbox[3]&&L>w.bbox[1]&&(C+=A)}}),d({...w,sampleCount:C,depth:u.depth+1,maxDepth:r.maxDepth,minSize:r.minSize})})}return u};return[d(l)]};function ec({sampleDistribution:e,bbox:t,onQuadtreeCellsChange:r}){const o=a.useTheme(),[s,i]=n.useState({maxDepth:4,minSize:.001,threshold:100,maxSamplesPerCell:1e3}),[l,d]=n.useState(!1),[u,c]=n.useState([]),[p,h]=n.useState(!1),y=n.useCallback(async()=>{if(t){h(!0);try{await new Promise(v=>setTimeout(v,100));const f=Rl(e,t,s);c(f),r(f),d(!0)}catch(f){console.error("Error building quadtree:",f)}finally{h(!1)}}},[t,e,s,r]),m=n.useMemo(()=>{const f=v=>v.reduce((O,b)=>O+1+(b.children?f(b.children):0),0);return f(u)},[u]),x=n.useMemo(()=>Object.values(e).reduce((f,v)=>f+v,0),[e]);return!t||Object.keys(e).length===0?null:n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(o.palette.secondary.main,.02),border:`1px solid ${a.alpha(o.palette.secondary.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:o.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(dn,{sx:{mr:1,color:o.palette.info.main}}),"Adaptive Quadtree Grid"),n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:o.palette.text.secondary}},"Generate an adaptive grid that automatically subdivides regions with high sample density for more efficient indexing."),n.createElement(a.Grid,{container:!0,spacing:2,sx:{mb:3}},n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Max Depth",type:"number",value:s.maxDepth,onChange:f=>{const v=parseInt(f.target.value);isNaN(v)||i(O=>({...O,maxDepth:v}))},size:"small",inputProps:{min:1,max:10}})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Min Size (deg)",type:"number",value:s.minSize,onChange:f=>{const v=parseFloat(f.target.value);isNaN(v)||i(O=>({...O,minSize:v}))},size:"small",inputProps:{min:1e-4,max:1,step:1e-4}})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Threshold",type:"number",value:s.threshold,onChange:f=>{const v=parseInt(f.target.value);isNaN(v)||i(O=>({...O,threshold:v}))},size:"small",inputProps:{min:1,max:1e4}})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Max Samples/Cell",type:"number",value:s.maxSamplesPerCell,onChange:f=>{const v=parseInt(f.target.value);isNaN(v)||i(O=>({...O,maxSamplesPerCell:v}))},size:"small",inputProps:{min:1,max:1e5}}))),n.createElement(a.Stack,{direction:"row",spacing:2,sx:{mb:3}},n.createElement(a.Button,{onClick:y,disabled:!t||Object.keys(e).length===0,variant:"contained",startIcon:n.createElement(Bl,null),sx:{height:40}},"Generate Quadtree")),l&&u.length>0&&n.createElement(a.Box,{sx:{mt:3,p:2,bgcolor:a.alpha(o.palette.success.main,.05),borderRadius:1,border:`1px solid ${a.alpha(o.palette.success.main,.2)}`}},n.createElement(a.Typography,{variant:"body2",sx:{mb:1}},n.createElement("strong",null,"Quadtree generated successfully!")),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"Total cells: ",m," | Total samples: ",x," | Max depth: ",s.maxDepth," | Min cell size: ",s.minSize,"")),p&&n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1,mt:2}},n.createElement(a.CircularProgress,{size:16}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Generating adaptive grid...")))}function tc(){const[e,t]=n.useState([]),[r,o]=n.useState(!0),[s,i]=n.useState(null),l=_e(),d=n.useCallback(async()=>{if(!l){i("Client not available"),o(!1);return}try{o(!0),i(null),console.log(" useGeoFields: Calling client.get_geo_fields()");const u=await l.get_geo_fields();if(console.log(" useGeoFields: Raw result =",u),console.log(" useGeoFields: result type =",typeof u),console.log(" useGeoFields: result keys =",u?Object.keys(u):"null/undefined"),u!=null&&u.result){const c=u.result;console.log(" useGeoFields: Extracted data =",c),t(c.geo_fields||[])}else u!=null&&u.geo_fields?(console.log(" useGeoFields: Direct geo_fields access =",u.geo_fields),t(u.geo_fields||[])):(console.log(" useGeoFields: No geo_fields found, setting empty array"),t([]))}catch(u){console.error(" useGeoFields: Error fetching geo fields:",u),i(u instanceof Error?u.message:"Failed to fetch geographic fields"),t([])}finally{o(!1)}},[l]);return n.useEffect(()=>{l&&d()},[d,l]),{geoFields:e,loading:r,error:s,refetch:d}}function nc(e){const[t,r]=n.useState([]),[o,s]=n.useState(!1),[i,l]=n.useState(null),d=_e(),u=async()=>{if(!d||!e){r([]),l(null);return}try{s(!0),l(null);const c=await d.get_sample_geo_points({geo_field:e});(c==null?void 0:c.status)==="success"&&c.geo_points?r(c.geo_points):(l((c==null?void 0:c.message)||"Failed to load geographic points"),r([]))}catch(c){l(c instanceof Error?c.message:"Unknown error"),r([])}finally{s(!1)}};return n.useEffect(()=>{u()},[e]),{geoPoints:t,loading:o,error:i,refetch:u}}const rc=e=>{const t=(e.minLat+e.maxLat)/2,r=111,o=111*Math.cos(t*Math.PI/180),s=(e.maxLon-e.minLon)*o,i=(e.maxLat-e.minLat)*r;return s*i},oc=e=>{const t=(e.minLat+e.maxLat)/2,r=111,o=111*Math.cos(t*Math.PI/180),s=(e.maxLon-e.minLon)*o,i=(e.maxLat-e.minLat)*r;return`${s.toFixed(1)} km  ${i.toFixed(1)} km`},ac=e=>{const t=(e.minLon+e.maxLon)/2;return`${((e.minLat+e.maxLat)/2).toFixed(4)}, ${t.toFixed(4)}`};function sc(){var h,y,m,x;const e=a.useTheme(),{state:t,actions:r}=Zn(),{state:o,actions:s}=ht(),{actions:i}=Rn(),{geoFields:l,loading:d}=tc();nc(o.geoField);const u=async()=>{if(!o.geoField)return;(await i.autoDetectBbox(o.geoField)).success},c=async()=>{(await i.calculateSampleDistribution()).success},p=async()=>{(await i.startIndexing()).success&&i.next()};return n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"h6",sx:{mb:3,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(ft,{color:"primary"}),"Step 1: Index Configuration"),n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:e.palette.text.secondary,lineHeight:1.6}},"Configure the prerequisites for indexing: select the geographic field, set bounding box boundaries, and calculate sample distribution. This step is required before you can start indexing."),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.primary.main,.02),border:`1px solid ${a.alpha(e.palette.primary.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(gn,{color:"primary"}),"Geographic Field Selection"),n.createElement(a.Typography,{variant:"body2",sx:{mb:2,color:e.palette.text.secondary}},"Select the geographic field that contains location data for your samples."),n.createElement(a.FormControl,{fullWidth:!0,sx:{mb:2}},n.createElement(a.InputLabel,null,"Geographic Field"),n.createElement(a.Select,{value:o.geoField,onChange:f=>s.setGeoField(f.target.value),disabled:d,label:"Geographic Field"},n.createElement(a.MenuItem,{value:""},n.createElement("em",null,"Choose a field containing geographic data...")),l.map(f=>n.createElement(a.MenuItem,{key:f,value:f},f)))),d&&n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(a.CircularProgress,{size:16}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Loading geographic fields...")),!d&&l.length===0&&n.createElement(a.Typography,{variant:"body2",color:"warning.main",sx:{mb:2}},"No geographic fields found in the dataset. Please ensure your dataset contains fields with geographic data."),!d&&l.length>0&&n.createElement(a.Typography,{variant:"body2",color:"success.main",sx:{mb:2}},"Found ",l.length," geographic field",l.length!==1?"s":"",": ",l.join(", "))),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.secondary.main,.02),border:`1px solid ${a.alpha(e.palette.secondary.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(Hn,{color:"secondary"}),"Geographic Boundaries"),n.createElement(a.Typography,{variant:"body2",sx:{mb:2,color:e.palette.text.secondary}},"Define the geographic area to index. You can auto-detect boundaries or set them manually."),n.createElement(a.Stack,{direction:"row",spacing:2,sx:{mb:3}},n.createElement(a.Button,{onClick:u,disabled:d||!o.geoField,startIcon:n.createElement(Hn,null),variant:"contained",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Auto-detect BBox")),o.geoField&&t.bbox&&n.createElement(a.Box,{sx:{p:2,mb:2,backgroundColor:a.alpha(e.palette.info.main,.05),border:`1px solid ${a.alpha(e.palette.info.main,.2)}`,borderRadius:1}},n.createElement(a.Typography,{variant:"subtitle2",sx:{fontWeight:600,mb:1,color:"info.main"}}," Geographic Coverage Area"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},n.createElement("strong",null,"Area Size:")," ",rc(t.bbox).toFixed(2)," km",n.createElement("br",null),n.createElement("strong",null,"Dimensions:")," ",oc(t.bbox),n.createElement("br",null),n.createElement("strong",null,"Center Point:")," ",ac(t.bbox)),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}}," This area will be divided into ",t.gridTiles," grid tiles for OSM data indexing. Larger areas may take longer to process and require more API requests.")),n.createElement(a.Grid,{container:!0,spacing:2,sx:{mb:3}},n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Min Longitude",type:"number",value:((h=t.bbox)==null?void 0:h.minLon)||"",onChange:f=>{const v=parseFloat(f.target.value);isNaN(v)||r.setBbox({...t.bbox,minLon:v})},disabled:!t.bbox,size:"small"})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Min Latitude",type:"number",value:((y=t.bbox)==null?void 0:y.minLat)||"",onChange:f=>{const v=parseFloat(f.target.value);isNaN(v)||r.setBbox({...t.bbox,minLat:v})},disabled:!t.bbox,size:"small"})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Max Longitude",type:"number",value:((m=t.bbox)==null?void 0:m.maxLon)||"",onChange:f=>{const v=parseFloat(f.target.value);isNaN(v)||r.setBbox({...t.bbox,maxLon:v})},disabled:!t.bbox,size:"small"})),n.createElement(a.Grid,{item:!0,xs:6,sm:3},n.createElement(a.TextField,{fullWidth:!0,label:"Max Latitude",type:"number",value:((x=t.bbox)==null?void 0:x.maxLat)||"",onChange:f=>{const v=parseFloat(f.target.value);isNaN(v)||r.setBbox({...t.bbox,maxLat:v})},disabled:!t.bbox,size:"small"}))),t.bbox&&n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1,p:2,bgcolor:a.alpha(e.palette.success.main,.05),borderRadius:1,border:`1px solid ${a.alpha(e.palette.success.main,.2)}`}},n.createElement(a.Typography,{variant:"body2",sx:{display:"flex",alignItems:"center"}},n.createElement("strong",null,"Bounding box configured:"),t.bbox.minLon.toFixed(6),","," ",t.bbox.minLat.toFixed(6)," to"," ",t.bbox.maxLon.toFixed(6),","," ",t.bbox.maxLat.toFixed(6),n.createElement(pn,{sx:{ml:1,color:e.palette.success.main,fontSize:20}})))),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.info.main,.02),border:`1px solid ${a.alpha(e.palette.info.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(dn,{color:"info"}),"Grid Configuration"),n.createElement(a.Typography,{variant:"body2",sx:{mb:2,color:e.palette.text.secondary}},"Set the grid resolution for geographic indexing. Higher values create more granular regions."),n.createElement(a.FormControl,{sx:{mb:3,minWidth:200}},n.createElement(a.InputLabel,null,"Grid Resolution"),n.createElement(a.Select,{value:t.gridTiles,onChange:f=>r.setGridTiles(f.target.value),label:"Grid Resolution"},n.createElement(a.MenuItem,{value:3},"3x3 (9 cells)"),n.createElement(a.MenuItem,{value:9},"9x9 (81 cells)"),n.createElement(a.MenuItem,{value:10},"10x10 (100 cells)"),n.createElement(a.MenuItem,{value:16},"16x16 (256 cells)"),n.createElement(a.MenuItem,{value:25},"25x25 (625 cells)"),n.createElement(a.MenuItem,{value:50},"50x50 (2,500 cells)"),n.createElement(a.MenuItem,{value:100},"100x100 (10,000 cells)"))),n.createElement(a.Stack,{direction:"row",spacing:2},n.createElement(a.Button,{onClick:c,disabled:!t.bbox||!o.geoField||!t.gridTiles,startIcon:n.createElement(dn,null),variant:"contained",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600,bgcolor:e.palette.success.main,"&:hover":{bgcolor:e.palette.success.dark}}},"Calculate Sample Distribution"),t.gridCells.length>0&&n.createElement(a.Button,{onClick:r.clearDistribution,startIcon:n.createElement(Io,null),variant:"outlined",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Clear Distribution")),t.gridCells.length>0&&n.createElement(a.Box,{sx:{mt:3,p:2,bgcolor:a.alpha(e.palette.success.main,.05),borderRadius:1}},n.createElement(a.Typography,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(pn,{sx:{color:e.palette.success.main,fontSize:20}}),n.createElement("strong",null,"Sample distribution calculated!")," The grid now shows sample counts for each geographic region."))),n.createElement(ec,{sampleDistribution:t.realSampleDistribution,bbox:t.bbox?[t.bbox.minLon,t.bbox.minLat,t.bbox.maxLon,t.bbox.maxLat]:null,onQuadtreeCellsChange:r.setQuadtreeCells}),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.warning.main,.02),border:`1px solid ${a.alpha(e.palette.warning.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(dn,{color:"warning"}),"Ready to Index"),n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:e.palette.text.secondary}},"Once you've configured the geographic boundaries and calculated the sample distribution, you can proceed to start the indexing process."),n.createElement(a.Button,{onClick:p,disabled:!t.bbox||!o.geoField||t.gridCells.length===0,variant:"contained",color:"success",size:"large",sx:{px:6,py:2,borderRadius:2,textTransform:"none",fontWeight:600,fontSize:"1.1rem"}},"Start Indexing")))}function ic({bbox:e,isLoading:t,realSampleCounts:r,onCellStatusChange:o,quadtreeCells:s,useQuadtree:i,indexingStatus:l,gridCells:d}){const u=a.useTheme(),c=n.useMemo(()=>{if(d.forEach(w=>{console.log(`  Cell ${w.id}: status=${w.status}, sample_count=${w.sample_count}`)}),d.length===0)return 0;const v=d.filter(w=>w.status!=="empty");if(v.length===0)return 1;const O=v.filter(w=>w.status==="completed"||w.status==="failed"||w.status==="rate_limited"||w.status==="retrying").length;console.log(" Progress calculation debug:"),console.log(`  Total cells: ${d.length}`),console.log(`  Active cells: ${v.length}`),console.log(`  Processed cells: ${O}`),console.log(`  Progress: ${(O/v.length*100).toFixed(1)}%`),console.log(`  Indexing status: ${l}`);const b=v.filter(w=>w.status==="idle");return b.length>0&&console.warn(` Found ${b.length} idle cells that should be processed:`,b.map(w=>w.id)),O/v.length},[d]),p=n.useMemo(()=>{const v={idle:0,running:0,completed:0,failed:0,rate_limited:0,retrying:0,cancelled:0,empty:0,unknown:0};return d.forEach(O=>{const b=O.status;v[b]=(v[b]||0)+1}),v},[d]);if(!e)return null;const[h,y,m,x]=e,f=Math.sqrt(i?s.length:d.length);return d.length===0&&s.length===0?n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(u.palette.warning.main,.02),border:`1px solid ${a.alpha(u.palette.warning.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"No Grid Data"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"No grid cells found. Please complete the Index Configuration step first.")):isNaN(f)||f<=0?n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(u.palette.error.main,.02),border:`1px solid ${a.alpha(u.palette.error.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"Invalid Grid Size"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Grid size is invalid: ",f,". Please check your configuration.")):n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(u.palette.background.paper,.8),border:`1px solid ${a.alpha(u.palette.divider,.2)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:1,fontWeight:600,color:u.palette.text.primary}},"Geo Index Status"),n.createElement(a.Typography,{variant:"body2",sx:{mb:2,color:u.palette.text.secondary,fontStyle:"italic"}}," Click on any cell to view detailed OSM data"),n.createElement(a.Box,{sx:{mb:3}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1}},n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Indexing Progress"),n.createElement(a.Typography,{variant:"body2",fontWeight:600},Math.round(c*100),"%")),n.createElement(a.LinearProgress,{variant:"determinate",value:c*100,sx:{height:8,borderRadius:4,backgroundColor:a.alpha(u.palette.primary.main,.1),"& .MuiLinearProgress-bar":{borderRadius:4}}})),n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:3}},n.createElement(a.Chip,{label:`Idle: ${p.idle}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.grey[600]}}),n.createElement(a.Chip,{label:`Running: ${p.running}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.info.main}}),n.createElement(a.Chip,{label:`Completed: ${p.completed}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.success.main}}),n.createElement(a.Chip,{label:`Failed: ${p.failed}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.error.main}}),n.createElement(a.Chip,{label:`Rate Limited: ${p.rate_limited}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.warning.main}}),n.createElement(a.Chip,{label:`Retrying: ${p.retrying}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.info.main}}),n.createElement(a.Chip,{label:`Cancelled: ${p.cancelled}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.grey[500]}}),n.createElement(a.Chip,{label:`Empty: ${p.empty}`,size:"small",variant:"outlined",sx:{borderColor:u.palette.grey[400]}})),n.createElement(a.Box,{sx:{display:"grid",gridTemplateColumns:`repeat(${f}, 1fr)`,gap:1,maxWidth:"100%",overflow:"auto"}},Array.from({length:f*f},(v,O)=>{const b=Math.floor(O/f),w=O%f,C=`${b}_${w}`,$=d.find(k=>k.id===C),A=r[C]||0,S=($==null?void 0:$.status)||"unknown",T=k=>{switch(k){case"completed":return u.palette.success.main;case"running":return u.palette.info.main;case"failed":return u.palette.error.main;case"rate_limited":return u.palette.warning.main;case"retrying":return u.palette.info.light;case"cancelled":return u.palette.grey[500];case"empty":return u.palette.grey[400];case"idle":return u.palette.grey[600];default:return u.palette.grey[300]}},P=k=>{switch(k){case"completed":return"";case"running":return"";case"failed":return"";case"rate_limited":return"";case"retrying":return"";case"cancelled":return"";case"empty":return"";case"idle":return A>0?"":"";default:return"?"}};return n.createElement(a.Box,{key:C,sx:{width:20,height:20,backgroundColor:T(S),borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.75rem",color:"white",fontWeight:600,cursor:"pointer",transition:"all 0.2s ease","&:hover":{transform:"scale(1.3)",zIndex:1,boxShadow:`0 0 10px ${a.alpha(u.palette.primary.main,.5)}`}},title:`Cell ${C}: ${S} (${A} samples)`,onClick:()=>o(C,S)},P(S))})),n.createElement(a.Box,{sx:{mt:2,display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"Grid: ",f,"x",f," (",f*f," cells)"),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},i?"Adaptive Quadtree":"Fixed Grid")))}function lc({open:e,onClose:t,cellId:r}){const o=a.useTheme(),s=_e(),[i,l]=n.useState(null),[d,u]=n.useState(!1),[c,p]=n.useState(null);n.useEffect(()=>{e&&r&&h()},[e,r]);const h=async()=>{var b,w;if(!s){p("Client not available");return}try{u(!0),p(null);const C=await s.get_cell_data({cell_id:r});((b=C==null?void 0:C.result)==null?void 0:b.status)==="success"?l(C.result):p(((w=C==null?void 0:C.result)==null?void 0:w.message)||"Failed to load cell data")}catch(C){p(C instanceof Error?C.message:"Failed to load cell data")}finally{u(!1)}},y=b=>{switch(b){case"completed":return n.createElement(pn,{color:"success"});case"failed":return n.createElement(Po,{color:"error"});case"rate_limited":return n.createElement(Kn,{color:"warning"});case"cancelled":return n.createElement(Po,{color:"disabled"});default:return n.createElement(gn,{color:"info"})}},m=b=>{switch(b){case"completed":return o.palette.success.main;case"failed":return o.palette.error.main;case"rate_limited":return o.palette.warning.main;case"cancelled":return o.palette.grey[500];case"running":return o.palette.info.main;default:return o.palette.grey[600]}},x=b=>{if(!b)return"N/A";const[w,C,$,A]=b;return`[${w.toFixed(6)}, ${C.toFixed(6)}, ${$.toFixed(6)}, ${A.toFixed(6)}]`},f=b=>{const w={};return b.forEach(C=>{const $=C.feature_type||"unknown";w[$]=(w[$]||0)+1}),w},v=b=>{const w={};return b.forEach(C=>{C.tags&&Object.keys(C.tags).forEach($=>{w[$]=(w[$]||0)+1})}),w},O=b=>{const w={};return b.forEach(C=>{C.tags&&Object.entries(C.tags).forEach(([$,A])=>{w[$]||(w[$]={count:0,examples:[]}),w[$].count+=1;const S=String(A);!w[$].examples.includes(S)&&w[$].examples.length<5&&w[$].examples.push(S)})}),w};return n.createElement(a.Dialog,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:2,maxHeight:"90vh"}}},n.createElement(a.DialogTitle,null,n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(gn,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",component:"span"},"Cell Data Preview: ",r))),n.createElement(a.DialogContent,{dividers:!0},d&&n.createElement(a.Box,{sx:{display:"flex",justifyContent:"center",p:3}},n.createElement(a.CircularProgress,null)),c&&n.createElement(a.Alert,{severity:"error",sx:{mb:2}},c),i&&n.createElement(a.Box,null,n.createElement(a.Paper,{elevation:1,sx:{p:2,mb:3,background:a.alpha(o.palette.primary.main,.02),border:`1px solid ${a.alpha(o.palette.primary.main,.1)}`}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"Cell Overview"),n.createElement(a.Stack,{direction:"row",spacing:2,sx:{mb:2}},n.createElement(a.Chip,{icon:y(i.cell_status),label:`Status: ${i.cell_status}`,sx:{backgroundColor:a.alpha(m(i.cell_status),.1),color:m(i.cell_status),border:`1px solid ${a.alpha(m(i.cell_status),.3)}`}}),n.createElement(a.Chip,{label:`Samples: ${i.sample_count}`,variant:"outlined"}),n.createElement(a.Chip,{label:`OSM Features: ${i.osm_features_count||0}`,variant:"outlined"})),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},n.createElement("strong",null,"Coordinates:")," ",x(i.coordinates)),i.error&&n.createElement(a.Alert,{severity:"error",sx:{mt:2}},n.createElement("strong",null,"Error:")," ",i.error)),i.osm_data&&i.osm_data.length>0&&n.createElement(a.Paper,{elevation:1,sx:{p:2,mb:3,background:a.alpha(o.palette.info.main,.02),border:`1px solid ${a.alpha(o.palette.info.main,.1)}`}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"OSM Data Statistics"),n.createElement(a.Accordion,null,n.createElement(a.AccordionSummary,{expandIcon:n.createElement(fn,null)},n.createElement(a.Typography,{variant:"subtitle1"},"Feature Types (",Object.keys(f(i.osm_data)).length,")")),n.createElement(a.AccordionDetails,null,n.createElement(a.Stack,{direction:"row",spacing:1,flexWrap:"wrap"},Object.entries(f(i.osm_data)).sort(([,b],[,w])=>w-b).map(([b,w])=>n.createElement(a.Chip,{key:b,label:`${b}: ${w}`,size:"small",variant:"outlined"}))))),n.createElement(a.Accordion,null,n.createElement(a.AccordionSummary,{expandIcon:n.createElement(fn,null)},n.createElement(a.Typography,{variant:"subtitle1"},"OSM Tags (",Object.keys(v(i.osm_data)).length,")")),n.createElement(a.AccordionDetails,null,n.createElement(a.Stack,{direction:"row",spacing:1,flexWrap:"wrap"},Object.entries(v(i.osm_data)).sort(([,b],[,w])=>w-b).slice(0,20).map(([b,w])=>n.createElement(a.Chip,{key:b,label:`${b}: ${w}`,size:"small",variant:"outlined",color:"primary"}))),Object.keys(v(i.osm_data)).length>20&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},"Showing top 20 tags out of ",Object.keys(v(i.osm_data)).length," total"))),n.createElement(a.Accordion,null,n.createElement(a.AccordionSummary,{expandIcon:n.createElement(fn,null)},n.createElement(a.Typography,{variant:"subtitle1"},"Tag Counts & Examples (",Object.keys(O(i.osm_data)).length,")")),n.createElement(a.AccordionDetails,null,n.createElement(a.TableContainer,{sx:{maxHeight:400}},n.createElement(a.Table,{size:"small",stickyHeader:!0},n.createElement(a.TableHead,null,n.createElement(a.TableRow,null,n.createElement(a.TableCell,null,n.createElement("strong",null,"Tag")),n.createElement(a.TableCell,{align:"right"},n.createElement("strong",null,"Count")),n.createElement(a.TableCell,null,n.createElement("strong",null,"Example Values")))),n.createElement(a.TableBody,null,Object.entries(O(i.osm_data)).sort(([,b],[,w])=>w.count-b.count).slice(0,50).map(([b,w])=>n.createElement(a.TableRow,{key:b},n.createElement(a.TableCell,null,n.createElement(a.Chip,{label:b,size:"small",variant:"outlined",color:"primary"})),n.createElement(a.TableCell,{align:"right"},n.createElement(a.Typography,{variant:"body2",fontWeight:"medium"},w.count)),n.createElement(a.TableCell,null,n.createElement(a.Stack,{direction:"row",spacing:.5,flexWrap:"wrap"},w.examples.map((C,$)=>n.createElement(a.Chip,{key:$,label:C,size:"small",variant:"filled",sx:{backgroundColor:a.alpha(o.palette.secondary.main,.1),color:o.palette.secondary.main,fontSize:"0.75rem",height:"20px"}})),w.examples.length===5&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center",ml:.5}},"+more")))))))),Object.keys(O(i.osm_data)).length>50&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},"Showing top 50 tags out of ",Object.keys(O(i.osm_data)).length," total")))),i.osm_data&&i.osm_data.length>0&&n.createElement(a.Paper,{elevation:1,sx:{p:2,background:a.alpha(o.palette.grey[100],.5),border:`1px solid ${a.alpha(o.palette.grey[300],.5)}`}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"Raw OSM Data (",i.osm_data.length," features)"),n.createElement(a.Accordion,null,n.createElement(a.AccordionSummary,{expandIcon:n.createElement(fn,null)},n.createElement(a.Typography,{variant:"subtitle1"},n.createElement(zl,{sx:{mr:1,verticalAlign:"middle"}}),"View Raw Data")),n.createElement(a.AccordionDetails,null,n.createElement(a.TableContainer,{sx:{maxHeight:400}},n.createElement(a.Table,{size:"small",stickyHeader:!0},n.createElement(a.TableHead,null,n.createElement(a.TableRow,null,n.createElement(a.TableCell,null,"Type"),n.createElement(a.TableCell,null,"ID"),n.createElement(a.TableCell,null,"Feature Type"),n.createElement(a.TableCell,null,"Tags"))),n.createElement(a.TableBody,null,i.osm_data.slice(0,50).map((b,w)=>n.createElement(a.TableRow,{key:w},n.createElement(a.TableCell,null,b.type),n.createElement(a.TableCell,null,b.id),n.createElement(a.TableCell,null,b.feature_type||"N/A"),n.createElement(a.TableCell,null,n.createElement(a.Box,{sx:{maxWidth:200,overflow:"hidden"}},b.tags?Object.entries(b.tags).slice(0,3).map(([C,$])=>n.createElement(a.Chip,{key:C,label:`${C}=${$}`,size:"small",sx:{mr:.5,mb:.5}})):n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"No tags"),b.tags&&Object.keys(b.tags).length>3&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"+",Object.keys(b.tags).length-3," more")))))))),i.osm_data.length>50&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"}},"Showing first 50 features out of ",i.osm_data.length," total")))),i.osm_data&&i.osm_data.length===0&&n.createElement(a.Paper,{elevation:1,sx:{p:3,textAlign:"center",background:a.alpha(o.palette.grey[100],.5),border:`1px solid ${a.alpha(o.palette.grey[300],.5)}`}},n.createElement(a.Typography,{variant:"body1",color:"text.secondary"},"No OSM data found in this cell")))),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:t,variant:"outlined"},"Close"),n.createElement(a.Button,{onClick:h,variant:"contained",disabled:d},"Refresh")))}function cc(){const e=a.useTheme(),{state:t,derived:r}=Zn(),{state:o,actions:s,derived:i}=Rn(),[l,d]=n.useState(null),[u,c]=n.useState(!1),[p,h]=n.useState(!1),y=async()=>{(await s.startIndexing()).success},m=async()=>{console.log("Pausing indexing...")},x=async()=>{(await s.startIndexing()).success},f=async()=>{const A=await s.cancelIndexing();A.success?console.log("Indexing cancelled successfully"):console.error("Failed to cancel indexing:",A.error)},v=async()=>{(await s.dropIndex()).success},O=()=>{h(!0)},b=async()=>{h(!1),(await s.resetMetageo()).success},w=()=>{h(!1)},C=(A,S)=>{d(A),c(!0)},$=()=>{c(!1),d(null)};return n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"h6",sx:{mb:3,fontWeight:600,color:e.palette.text.primary,display:"flex",alignItems:"center",gap:1}},n.createElement(gn,{color:"primary"}),"Step 2: Indexing"),!i.hasExistingIndex&&n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:e.palette.text.secondary,lineHeight:1.6}},"Run the indexing operation to download OpenStreetMap data for each geographic region. This step requires the configuration from Step 1."),i.hasExistingIndex&&n.createElement(a.Typography,{variant:"body2",sx:{mb:3,color:e.palette.text.secondary,lineHeight:1.6}},r.isCompleted?"Indexing completed successfully! You can view the results below or proceed to the next step.":r.isIndexing?"Indexing is currently in progress. Monitor the grid below to track progress.":"Resume or restart the indexing operation to download OpenStreetMap data for each geographic region."),t.bbox?n.createElement(n.Fragment,null,n.createElement(ic,{bbox:[t.bbox.minLon,t.bbox.minLat,t.bbox.maxLon,t.bbox.maxLat],isLoading:r.isIndexing,realSampleCounts:t.realSampleDistribution||{},onCellStatusChange:C,quadtreeCells:t.quadtreeCells||[],useQuadtree:(t.quadtreeCells||[]).length>0,indexingStatus:t.indexingStatus,gridCells:t.gridCells||[]}),r.isCompleted&&n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,background:a.alpha(e.palette.success.main,.05),border:`1px solid ${a.alpha(e.palette.success.main,.2)}`,borderRadius:2}},n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",mb:2}},n.createElement(pn,{sx:{fontSize:32,color:e.palette.success.main,mr:2}}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600,color:e.palette.success.main}},"Indexing Completed Successfully!")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"All grid cells have been processed. You can now proceed to the Mapping step to configure how OSM data should be mapped to your dataset fields.")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mt:3,background:a.alpha(e.palette.warning.main,.02),border:`1px solid ${a.alpha(e.palette.warning.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600,color:e.palette.text.primary}},"Indexing Controls"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3}},"Control the indexing process. Start indexing to begin downloading OSM data for each geographic region."),r.hasExistingIndex&&n.createElement(a.Box,{sx:{mb:3,p:2,bgcolor:a.alpha(e.palette.info.main,.05),borderRadius:1,border:`1px solid ${a.alpha(e.palette.info.main,.2)}`}},n.createElement(a.Typography,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:1,mb:2}},n.createElement("span",null,""),n.createElement("strong",null,"Existing index loaded!")," You can continue with this index or drop it to start fresh."),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{display:"block",mb:2}},"Grid cells: ",t.gridCells.length," | Status:"," ",t.indexingStatus," | Quadtree cells:"," ",t.quadtreeCells.length),n.createElement(a.Button,{onClick:v,startIcon:n.createElement(Io,null),variant:"outlined",size:"small",sx:{borderColor:e.palette.error.main,color:e.palette.error.main,"&:hover":{borderColor:e.palette.error.dark,color:e.palette.error.dark}}},"Drop Index")),n.createElement(a.Stack,{direction:"row",spacing:2,sx:{mb:3}},n.createElement(a.Button,{onClick:y,disabled:!t.bbox||r.isIndexing,startIcon:n.createElement("span",null,""),variant:"contained",color:"success",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},r.isIndexing?"Indexing...":r.hasExistingIndex?"Resume Indexing":"Start Indexing"),n.createElement(a.Button,{onClick:m,disabled:!r.isIndexing,startIcon:n.createElement("span",null,""),variant:"outlined",color:"warning",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Pause"),n.createElement(a.Button,{onClick:x,disabled:!r.isFailed,startIcon:n.createElement("span",null,""),variant:"outlined",color:"info",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Retry"),n.createElement(a.Button,{onClick:f,disabled:!r.isIndexing,startIcon:n.createElement("span",null,""),variant:"outlined",color:"error",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Cancel & Clear"),n.createElement(a.Button,{onClick:O,startIcon:n.createElement("span",null,""),variant:"outlined",color:"warning",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Start Over")))):n.createElement(a.Paper,{elevation:1,sx:{p:4,textAlign:"center",background:a.alpha(e.palette.grey[100],.5),border:`2px dashed ${e.palette.grey[300]}`}},n.createElement(Kn,{sx:{fontSize:48,color:e.palette.warning.main,mb:2}}),n.createElement(a.Typography,{variant:"h6",sx:{mb:2,fontWeight:600}},"Configuration Required"),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3}},"Please complete the Index Configuration step first to set geographic boundaries before you can start indexing."),n.createElement(a.Button,{variant:"outlined",color:"warning",onClick:v,startIcon:n.createElement(qe,null),sx:{textTransform:"none",fontWeight:600}},"Clear All Metageo State")),n.createElement(lc,{open:u,onClose:$,cellId:l||""}),n.createElement(a.Dialog,{open:p,onClose:w,"aria-labelledby":"reset-dialog-title","aria-describedby":"reset-dialog-description"},n.createElement(a.DialogTitle,{id:"reset-dialog-title"},"Start Over - Reset All Metageo Data"),n.createElement(a.DialogContent,null,n.createElement(a.DialogContentText,{id:"reset-dialog-description"},"This will completely reset all Metageo configuration and indexing data. You will lose:",n.createElement("br",null)," All indexing progress and OSM data",n.createElement("br",null)," Grid configuration and sample distribution",n.createElement("br",null)," Mapping configuration",n.createElement("br",null)," Any completed indexing results",n.createElement("br",null),n.createElement("br",null),"This action cannot be undone. Are you sure you want to start over?")),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:w,color:"primary"},"Cancel"),n.createElement(a.Button,{onClick:b,color:"error",variant:"contained"},"Yes, Start Over"))))}function uc(){const[e,t]=n.useState([]),[r,o]=n.useState(!1),[s,i]=n.useState(null),[l,d]=n.useState(!1),u=_e(),c=n.useCallback(async()=>{var p,h,y,m,x,f,v,O;if(console.log(" useOsmTags: loadOsmTags called"),!u){console.log(" useOsmTags: Client not available"),i("Client not available"),o(!1);return}try{console.log(" useOsmTags: Setting loading to true"),o(!0),i(null),console.log(" useOsmTags: Calling client.get_available_osm_tags()");const b=await u.get_available_osm_tags();console.log(" useOsmTags: Result received:",b),console.log(" useOsmTags: result.result:",b==null?void 0:b.result),console.log(" useOsmTags: result.result.status:",(p=b==null?void 0:b.result)==null?void 0:p.status),console.log(" useOsmTags: result.result.tags:",(h=b==null?void 0:b.result)==null?void 0:h.tags),((y=b==null?void 0:b.result)==null?void 0:y.status)==="success"&&b.result.tags?(console.log(" useOsmTags: Success - setting tags:",b.result.tags),t(b.result.tags),d(!0)):((m=b==null?void 0:b.result)==null?void 0:m.status)==="no_index"?(console.log(" useOsmTags: No index found"),i(((x=b==null?void 0:b.result)==null?void 0:x.message)||"No completed index found. Please complete the indexing step first."),t([]),d(!0)):((f=b==null?void 0:b.result)==null?void 0:f.status)==="error"?(console.log(" useOsmTags: Backend error"),i(((v=b==null?void 0:b.result)==null?void 0:v.message)||"Failed to load OSM tags"),t([]),d(!0)):(console.log(" useOsmTags: Unknown status - result:",b),console.log(" useOsmTags: Unknown status - result.result:",b==null?void 0:b.result),i(((O=b==null?void 0:b.result)==null?void 0:O.message)||"Failed to load OSM tags"),t([]),d(!0))}catch(b){console.error(" useOsmTags: Exception:",b),i(b instanceof Error?b.message:"Failed to load OSM tags"),t([]),d(!0)}finally{console.log(" useOsmTags: Setting loading to false"),o(!1)}},[u]);return n.useEffect(()=>{u&&!l&&!r&&(console.log(" useOsmTags: Auto-loading OSM tags on mount"),c())},[u,l,r,c]),{osmTags:e,loading:r,error:s,hasLoaded:l,refetch:c}}function dc(e){const[t,r]=n.useState(null),[o,s]=n.useState(!0),[i,l]=n.useState(null),d=_e(),u=async()=>{if(!d){l("Client not available"),s(!1);return}try{s(!0),l(null);const p=(await d.get_dataset_info()).result;if(console.log(" useDatasetInfo: Backend result =",p),(p==null?void 0:p.status)==="success"){const h={is_grouped:p.is_grouped,group_field:p.group_field,slices:p.slices||[],dataset_name:p.dataset_name,total_samples:p.total_samples};console.log(" useDatasetInfo: Setting dataset info =",h),r(h)}else l((p==null?void 0:p.message)||"Failed to load dataset info")}catch(c){l(c instanceof Error?c.message:"Unknown error")}finally{s(!1)}};return n.useEffect(()=>{console.log(" useDatasetInfo: useEffect triggered, calling loadDatasetInfo"),u()},[e]),{datasetInfo:t,loading:o,error:i,refetch:u}}const pc=[{value:"string",label:"String",description:"Text values"},{value:"int",label:"Integer",description:"Whole numbers"},{value:"float",label:"Float",description:"Decimal numbers"},{value:"bool",label:"Boolean",description:"True/False values"},{value:"enum",label:"Enum",description:"Categorical values"}];function fc({fieldMappings:e,osmTags:t,onAddMapping:r,onUpdateMapping:o,onRemoveMapping:s}){var A;const i=a.useTheme(),l=_e(),[d,u]=n.useState(!1),[c,p]=n.useState(null),[h,y]=n.useState([]);n.useEffect(()=>{(async()=>{var T;if(l)try{const P=await l.get_field_mappings();((T=P==null?void 0:P.result)==null?void 0:T.status)==="success"&&y(P.result.used_field_names||[])}catch(P){console.error("Error loading field mappings:",P)}})()},[l,e]);const[m,x]=n.useState({osmKey:"",fieldName:"",fieldType:"string",boolTrueValue:"yes",boolFalseValues:"false, no",enumMappings:{},defaultValue:"",description:""}),f=S=>{if(S!==void 0){const T=e[S];x({osmKey:T.osmKey,fieldName:T.fieldName,fieldType:T.fieldType,boolTrueValue:T.boolTrueValue||"yes",boolFalseValues:T.boolFalseValues||"false, no",enumMappings:T.enumMappings||{},defaultValue:T.defaultValue||"",description:T.description||""}),p(S)}else x({osmKey:"",fieldName:"",fieldType:"string",boolTrueValue:"yes",boolFalseValues:"false, no",enumMappings:{},defaultValue:"",description:""}),p(null);u(!0)},v=()=>{u(!1),p(null)},O=()=>{const S={id:c!==null?e[c].id:`mapping_${Date.now()}`,osmKey:m.osmKey,fieldName:m.fieldName,fieldType:m.fieldType,boolTrueValue:m.fieldType==="bool"?m.boolTrueValue:void 0,boolFalseValues:m.fieldType==="bool"?m.boolFalseValues:void 0,enumMappings:m.fieldType==="enum"?m.enumMappings:void 0,defaultValue:m.defaultValue||void 0,description:m.description||void 0};c!==null?o(c,S):r(S),v()},b=()=>{x(S=>({...S,enumMappings:{...S.enumMappings,"":""}}))},w=(S,T,P)=>{x(k=>{const F={...k.enumMappings};return delete F[S],F[T]=P,{...k,enumMappings:F}})},C=S=>{x(T=>{const P={...T.enumMappings};return delete P[S],{...T,enumMappings:P}})},$=S=>({building:["yes","house","apartments","commercial","industrial"],highway:["primary","secondary","residential","footway","cycleway"],amenity:["restaurant","school","hospital","bank","fuel"],landuse:["residential","commercial","industrial","forest","farmland"],natural:["water","wood","grassland","scrub","bare_rock"],leisure:["park","playground","sports_centre","swimming_pool","golf_course"],shop:["supermarket","bakery","clothes","electronics","books"],tourism:["hotel","museum","attraction","information","guest_house"]})[S]||[];return n.createElement(a.Box,null,n.createElement(a.Stack,{spacing:2},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Field Mappings (",e.length,")"),n.createElement(a.Button,{variant:"contained",startIcon:n.createElement(Vn,null),onClick:()=>f(),size:"small"},"Add Mapping")),e.length===0?n.createElement(a.Alert,{severity:"info",sx:{mb:2}},'No field mappings configured. Click "Add Mapping" to create your first mapping.'):n.createElement(a.Stack,{spacing:1},e.map((S,T)=>n.createElement(a.Paper,{key:S.id,elevation:1,sx:{p:2,border:`1px solid ${a.alpha(i.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Box,{sx:{flex:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Chip,{label:S.osmKey,size:"small",color:"primary",variant:"outlined"}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},""),n.createElement(a.Chip,{label:S.fieldName,size:"small",color:"secondary",variant:"outlined"}),n.createElement(a.Chip,{label:S.fieldType,size:"small",color:"default",variant:"filled"})),S.description&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"}},S.description)),n.createElement(a.Stack,{direction:"row",spacing:1},n.createElement(a.Tooltip,{title:"Edit mapping"},n.createElement(a.IconButton,{size:"small",onClick:()=>f(T)},n.createElement(ko,{fontSize:"small"}))),n.createElement(a.Tooltip,{title:"Delete mapping"},n.createElement(a.IconButton,{size:"small",onClick:()=>s(T),color:"error"},n.createElement(qe,{fontSize:"small"}))))))))),n.createElement(a.Dialog,{open:d,onClose:v,maxWidth:"md",fullWidth:!0},n.createElement(a.DialogTitle,null,c!==null?"Edit Field Mapping":"Add Field Mapping"),n.createElement(a.DialogContent,null,n.createElement(a.Stack,{spacing:3,sx:{mt:1}},n.createElement(a.Autocomplete,{freeSolo:!0,options:t.map(S=>S.key),value:m.osmKey,onChange:(S,T)=>{const P=T||"";x(k=>({...k,osmKey:P,fieldName:P}))},renderInput:S=>n.createElement(a.TextField,{...S,label:"OSM Tag Key",placeholder:"e.g., building, highway, amenity",helperText:`The OSM tag key to map from (${t.length} available tags)`,required:!0}),renderOption:(S,T)=>{const P=t.find(k=>k.key===T);return n.createElement(a.Box,{component:"li",...S},n.createElement(a.Box,{sx:{width:"100%"}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5}},n.createElement(a.Typography,{variant:"body2",sx:{fontWeight:500}},T),P&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},P.count," features")),P&&P.examples&&P.examples.length>0&&n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},P.examples.slice(0,3).map((k,F)=>n.createElement(a.Chip,{key:F,label:k,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20,"& .MuiChip-label":{px:.5}}})),P.examples.length>3&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"}},"+",P.examples.length-3," more"))))}}),n.createElement(a.TextField,{label:"Dataset Field Name",value:m.fieldName,onChange:S=>x(T=>({...T,fieldName:S.target.value})),placeholder:"e.g., building_type, road_type",helperText:"The field name in your FiftyOne dataset",required:!0,error:h.includes(m.fieldName)&&m.fieldName!=="",InputProps:{endAdornment:h.includes(m.fieldName)&&m.fieldName!==""?n.createElement(a.Tooltip,{title:"This field name is already used"},n.createElement(Ao,{color:"error",fontSize:"small"})):null}}),h.includes(m.fieldName)&&m.fieldName!==""&&n.createElement(a.Alert,{severity:"error",size:"small"},'Field name "',m.fieldName,'" is already used in another mapping.'),n.createElement(a.FormControl,{fullWidth:!0},n.createElement(a.InputLabel,null,"Field Type"),n.createElement(a.Select,{value:m.fieldType,onChange:S=>x(T=>({...T,fieldType:S.target.value})),label:"Field Type"},pc.map(S=>n.createElement(a.MenuItem,{key:S.value,value:S.value},n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"body2",sx:{fontWeight:500}},S.label),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},S.description)))))),m.fieldType==="bool"&&n.createElement(a.Stack,{spacing:2},n.createElement(a.Typography,{variant:"subtitle2"},"Boolean Mapping"),n.createElement(a.Stack,{direction:"row",spacing:2},n.createElement(a.TextField,{label:"True Value",value:m.boolTrueValue,onChange:S=>x(T=>({...T,boolTrueValue:S.target.value})),helperText:"OSM value that maps to true",size:"small"}),n.createElement(a.TextField,{label:"False Values",value:m.boolFalseValues,onChange:S=>x(T=>({...T,boolFalseValues:S.target.value})),helperText:"Comma-separated list of OSM values that map to false (case-insensitive)",placeholder:"false, no, off, 0",size:"small"}))),m.fieldType==="enum"&&n.createElement(a.Stack,{spacing:2},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Typography,{variant:"subtitle2"},"Enum Mappings"),n.createElement(a.Button,{size:"small",startIcon:n.createElement(Vn,null),onClick:b},"Add Mapping")),n.createElement(a.Stack,{spacing:1},Object.entries(m.enumMappings).map(([S,T])=>n.createElement(a.Stack,{key:S,direction:"row",spacing:1,alignItems:"center"},n.createElement(a.TextField,{label:"OSM Value",value:S,onChange:P=>w(S,P.target.value,T),size:"small",sx:{flex:1}}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},""),n.createElement(a.TextField,{label:"Dataset Value",value:T,onChange:P=>w(S,S,P.target.value),size:"small",sx:{flex:1}}),n.createElement(a.IconButton,{size:"small",onClick:()=>C(S),color:"error"},n.createElement(qe,{fontSize:"small"}))))),m.osmKey&&n.createElement(a.Alert,{severity:"info"},n.createElement(a.Typography,{variant:"body2"},"Common values for ",n.createElement("strong",null,m.osmKey),":"," ",$(m.osmKey).join(", ")))),n.createElement(a.TextField,{label:"Default Value",value:m.defaultValue,onChange:S=>x(T=>({...T,defaultValue:S.target.value})),helperText:"Value to use when OSM tag is not found",placeholder:"e.g., unknown, null, 0"}),n.createElement(a.TextField,{label:"Description",value:m.description,onChange:S=>x(T=>({...T,description:S.target.value})),helperText:"Optional description for documentation",multiline:!0,rows:2}))),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:v},"Cancel"),n.createElement(a.Button,{onClick:O,variant:"contained",disabled:!m.osmKey||!m.fieldName||h.includes(m.fieldName)&&(c===null||((A=e[c])==null?void 0:A.fieldName)!==m.fieldName)},c!==null?"Update":"Add"," Mapping"))))}function gc({tagMappings:e,osmTags:t,onAddMapping:r,onUpdateMapping:o,onRemoveMapping:s}){var w;const i=a.useTheme(),l=_e(),[d,u]=n.useState(!1),[c,p]=n.useState(null),[h,y]=n.useState([]);n.useEffect(()=>{(async()=>{var $;if(l)try{const A=await l.get_field_mappings();(($=A==null?void 0:A.result)==null?void 0:$.status)==="success"&&y(A.result.used_field_names||[])}catch(A){console.error("Error loading field mappings:",A)}})()},[l,e]);const[m,x]=n.useState({osmKey:"",fieldName:"",boolFalseValues:"false, no",distance:100}),f=C=>{if(C!==void 0){const $=e[C];x({osmKey:$.osmKey,fieldName:$.fieldName,boolFalseValues:$.boolFalseValues||"false, no",distance:$.distance||100}),p(C)}else x({osmKey:"",fieldName:"",boolFalseValues:"false, no",distance:100}),p(null);u(!0)},v=()=>{u(!1),p(null)},O=()=>{const C={osmKey:m.osmKey,fieldName:m.fieldName,fieldType:"bool",boolFalseValues:m.boolFalseValues,distance:m.distance};c!==null?o(c,C):r(C),v()},b=C=>{const $=t.find(A=>A.key===C);return($==null?void 0:$.examples)||[]};return n.createElement(a.Box,null,n.createElement(a.Stack,{spacing:2},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Tag Mappings (",e.length,")"),n.createElement(a.Button,{variant:"contained",startIcon:n.createElement(Vn,null),onClick:()=>f(),size:"small"},"Add Tag Mapping")),e.length===0?n.createElement(a.Alert,{severity:"info",sx:{mb:2}},'No tag mappings configured. Click "Add Tag Mapping" to create your first mapping.'):n.createElement(a.Stack,{spacing:1},e.map((C,$)=>n.createElement(a.Paper,{key:`${C.osmKey}-${C.fieldName}-${$}`,elevation:1,sx:{p:2,border:`1px solid ${a.alpha(i.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Box,{sx:{flex:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Chip,{label:C.osmKey,size:"small",color:"primary",variant:"outlined"}),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},""),n.createElement(a.Chip,{label:C.fieldName,size:"small",color:"secondary",variant:"outlined"}),n.createElement(a.Chip,{label:"Tag",size:"small",color:"success",variant:"filled"}),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"Skip tagging for: ",C.boolFalseValues),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},"Distance: ",C.distance||100,"m"))),n.createElement(a.Stack,{direction:"row",spacing:1},n.createElement(a.Tooltip,{title:"Edit mapping"},n.createElement(a.IconButton,{size:"small",onClick:()=>f($)},n.createElement(ko,{fontSize:"small"}))),n.createElement(a.Tooltip,{title:"Delete mapping"},n.createElement(a.IconButton,{size:"small",onClick:()=>s($),color:"error"},n.createElement(qe,{fontSize:"small"}))))))))),n.createElement(a.Dialog,{open:d,onClose:v,maxWidth:"md",fullWidth:!0},n.createElement(a.DialogTitle,null,c!==null?"Edit Tag Mapping":"Add Tag Mapping"),n.createElement(a.DialogContent,null,n.createElement(a.Stack,{spacing:3,sx:{mt:1}},n.createElement(a.Autocomplete,{freeSolo:!0,options:t.map(C=>C.key),value:m.osmKey,onChange:(C,$)=>{const A=$||"";x(S=>({...S,osmKey:A,fieldName:A}))},renderInput:C=>n.createElement(a.TextField,{...C,label:"OSM Tag Key",placeholder:"e.g., building, highway, amenity",helperText:"The OSM tag key to map from",required:!0}),renderOption:(C,$)=>{const A=t.find(S=>S.key===$);return n.createElement(a.Box,{component:"li",...C},n.createElement(a.Box,{sx:{width:"100%"}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5}},n.createElement(a.Typography,{variant:"body2",sx:{fontWeight:500}},$),A&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},A.count," features")),A&&A.examples&&A.examples.length>0&&n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},A.examples.slice(0,3).map((S,T)=>n.createElement(a.Chip,{key:T,label:S,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20,"& .MuiChip-label":{px:.5}}})),A.examples.length>3&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"}},"+",A.examples.length-3," more"))))}}),n.createElement(a.TextField,{label:"Sample Field Name",value:m.fieldName,onChange:C=>x($=>({...$,fieldName:C.target.value})),placeholder:"e.g., has_building, road_type, amenity_type",helperText:"The field name where the tag value will be stored on samples",required:!0,error:h.includes(m.fieldName)&&m.fieldName!=="",InputProps:{endAdornment:h.includes(m.fieldName)&&m.fieldName!==""?n.createElement(a.Tooltip,{title:"This field name is already used"},n.createElement(Ao,{color:"error",fontSize:"small"})):null}}),h.includes(m.fieldName)&&m.fieldName!==""&&n.createElement(a.Alert,{severity:"error",size:"small"},'Field name "',m.fieldName,'" is already used in another mapping.'),n.createElement(a.Stack,{spacing:2},n.createElement(a.Typography,{variant:"subtitle2"},"Tag Configuration"),n.createElement(a.Alert,{severity:"info"},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null,"How it works:")," If the OSM tag is present on a sample, the sample will be ",n.createElement("strong",null,"tagged"),'. If the OSM tag value matches any of the "False Values" below, the sample will ',n.createElement("strong",null,"NOT be tagged"),". All other OSM tag values will result in the sample being ",n.createElement("strong",null,"tagged"),".")),n.createElement(a.TextField,{label:"False Values",value:m.boolFalseValues,onChange:C=>x($=>({...$,boolFalseValues:C.target.value})),helperText:"Comma-separated list of OSM tag values that will prevent the sample from being tagged (case-insensitive)",placeholder:"false, no, off, 0",fullWidth:!0}),n.createElement(a.TextField,{label:"Distance Threshold (meters)",type:"number",value:m.distance,onChange:C=>x($=>({...$,distance:Number(C.target.value)})),helperText:"Only OSM nodes within this distance from the sample will be considered for tagging",inputProps:{min:1,max:1e4},fullWidth:!0}),m.osmKey&&n.createElement(a.Alert,{severity:"info"},n.createElement(a.Typography,{variant:"body2"},"Example values for ",n.createElement("strong",null,m.osmKey),":"," ",b(m.osmKey).join(", ")))))),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:v},"Cancel"),n.createElement(a.Button,{onClick:O,variant:"contained",disabled:!m.osmKey||!m.fieldName||h.includes(m.fieldName)&&(c===null||((w=e[c])==null?void 0:w.fieldName)!==m.fieldName)},c!==null?"Update":"Add"," Mapping"))))}function mc(){const e=a.useTheme(),{state:t,actions:r}=ht(),{osmTags:o,loading:s,error:i,hasLoaded:l}=uc(),{datasetInfo:d,refetch:u}=dc();return n.useEffect(()=>{console.log(" MappingStep: Component mounted, forcing dataset info refresh"),u()},[]),_e(),n.createElement(a.Box,{sx:{maxWidth:1200,mx:"auto",p:3}},n.createElement(a.Typography,{variant:"h4",sx:{mb:4,fontWeight:600}},"Step 3: Mapping Configuration"),n.createElement(a.Typography,{variant:"body1",sx:{mb:4,color:"text.secondary"}},"Configure how OpenStreetMap data should be mapped to your dataset. You can create 3D detections, tag samples, map OSM tags to fields, and include metadata."),n.createElement(a.Box,{sx:{mb:3,display:"flex",justifyContent:"flex-end"}},n.createElement(a.Button,{variant:"outlined",color:"warning",startIcon:n.createElement(qe,null),onClick:r.clearMappingConfig,sx:{minWidth:200}},"Clear Configuration")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(Hn,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Available OSM Tags"),s&&n.createElement(a.Typography,{variant:"caption",color:"primary"},"Loading...")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},"OSM tags from your indexed data are automatically loaded to help configure mappings."),i&&n.createElement(a.Alert,{severity:"error",sx:{mb:2}},"Error: ",i),o.length>0&&n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"body2",sx:{mb:1}},"Found ",o.length," OSM tags:"),n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1}},o.slice(0,20).map(c=>n.createElement(a.Chip,{key:c.key,label:`${c.key} (${c.count})`,size:"small",color:"primary",variant:"outlined"})),o.length>20&&n.createElement(a.Chip,{label:`+${o.length-20} more`,size:"small",color:"default",variant:"outlined"}))),o.length===0&&!s&&!i&&l&&n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"No OSM tags found. Please complete the indexing step first."),o.length===0&&!s&&!i&&!l&&n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Loading OSM tags...")),n.createElement(a.Paper,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a.alpha(e.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"3D Detections")),n.createElement(a.FormControlLabel,{control:n.createElement(a.Switch,{checked:t.enable3DDetections,onChange:c=>r.setEnable3DDetections(c.target.checked)}),label:"Enable 3D detections",sx:{mb:2}}),t.enable3DDetections&&n.createElement(a.Stack,{spacing:3},n.createElement(a.TextField,{label:"3D Slice",value:t.threeDSlice,onChange:c=>r.setThreeDSlice(c.target.value),placeholder:"e.g., default, lidar, pointcloud",helperText:"The slice of the group dataset containing 3D data",fullWidth:!0}),n.createElement(a.TextField,{label:"Detection Field Name",value:t.detectionFieldName,onChange:c=>r.setDetectionFieldName(c.target.value),placeholder:"e.g., my_detections, osm_detections",helperText:"The field name where 3D detections will be stored",fullWidth:!0}),n.createElement(a.Autocomplete,{freeSolo:!0,options:o.map(c=>c.key),value:t.detectionLabelTag,onChange:(c,p)=>r.setDetectionLabelTag(p||""),renderInput:c=>n.createElement(a.TextField,{...c,label:"Label Tag",placeholder:"e.g., type, amenity, building",helperText:"The OSM tag to use as the detection label"}),renderOption:(c,p)=>{const h=o.find(y=>y.key===p);return n.createElement(a.Box,{component:"li",...c},n.createElement(a.Box,{sx:{width:"100%"}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5}},n.createElement(a.Typography,{variant:"body2",sx:{fontWeight:500}},p),h&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},h.count," features")),h&&h.examples&&h.examples.length>0&&n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:.5}},h.examples.slice(0,3).map((y,m)=>n.createElement(a.Chip,{key:m,label:y,size:"small",variant:"outlined",sx:{fontSize:"0.7rem",height:20,"& .MuiChip-label":{px:.5}}})),h.examples.length>3&&n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{alignSelf:"center"}},"+",h.examples.length-3," more"))))}}),n.createElement(a.TextField,{label:"Detection Radius (meters)",type:"number",value:t.detectionRadius,onChange:c=>r.setDetectionRadius(Number(c.target.value)),helperText:"OSM nodes further than this distance will not be mapped",inputProps:{min:1,max:1e4},fullWidth:!0}))),n.createElement(a.Paper,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a.alpha(e.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Sample Tagging")),n.createElement(a.FormControlLabel,{control:n.createElement(a.Switch,{checked:t.enableSampleTagging,onChange:c=>r.setEnableSampleTagging(c.target.checked)}),label:"Enable sample tagging",sx:{mb:2}}),t.enableSampleTagging&&n.createElement(a.Stack,{spacing:3},d!=null&&d.is_grouped?n.createElement(a.FormControl,{fullWidth:!0},n.createElement(a.InputLabel,null,"Tag Slice"),n.createElement(a.Select,{value:t.tagSlice,onChange:c=>r.setTagSlice(c.target.value),label:"Tag Slice"},d.slices.map(c=>n.createElement(a.MenuItem,{key:c,value:c},c))),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:1}},"Select the slice where tags will be stored")):n.createElement(a.Alert,{severity:"info",sx:{mb:2}},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null,"Note:")," Tag slice selection is only available for grouped datasets. Your current dataset is not grouped, so tags will be stored at the sample level.")),n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"subtitle2",sx:{mb:2}},"OSM Tag Mappings"),n.createElement(a.Alert,{severity:"info",sx:{mb:2}},'Configure which OSM tags should be used for sample tagging. For example, map "building=yes" to a boolean field.'),n.createElement(gc,{tagMappings:t.tagMappings,osmTags:o,onAddMapping:r.addTagMapping,onUpdateMapping:r.updateTagMapping,onRemoveMapping:r.removeTagMapping})))),n.createElement(a.Paper,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a.alpha(e.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Field Mapping")),n.createElement(a.FormControlLabel,{control:n.createElement(a.Switch,{checked:t.enableFieldMapping,onChange:c=>r.setEnableFieldMapping(c.target.checked)}),label:"Enable field mapping",sx:{mb:2}}),t.enableFieldMapping&&n.createElement(fc,{fieldMappings:t.fieldMappings,osmTags:o,onAddMapping:r.addFieldMapping,onUpdateMapping:r.updateFieldMapping,onRemoveMapping:r.removeFieldMapping})),n.createElement(a.Paper,{elevation:0,sx:{p:3,mb:3,border:`1px solid ${a.alpha(e.palette.divider,.5)}`,borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Metadata")),n.createElement(a.FormControlLabel,{control:n.createElement(a.Switch,{checked:t.includeAllTagsAsMetadata,onChange:c=>r.setIncludeAllTagsAsMetadata(c.target.checked)}),label:"Include all OSM tags as metadata",sx:{mb:2}}),t.includeAllTagsAsMetadata&&n.createElement(a.TextField,{label:"Metadata Field Name",value:t.metadataFieldName,onChange:c=>r.setMetadataFieldName(c.target.value),placeholder:"e.g., osm_metadata, tags, properties",helperText:"The field name where all OSM tags will be stored as metadata",fullWidth:!0})),n.createElement(a.Box,{sx:{display:"flex",justifyContent:"flex-end",mt:3}},n.createElement(a.Button,{variant:"outlined",color:"error",onClick:()=>r.resetMapping()},"Reset Configuration")))}const Ft=pe.atom({key:"enrichmentState",default:{enrichmentId:null,status:"idle",totalSamples:0,processedSamples:0,failedSamples:0,progress:0,startedAt:null,completedAt:null,error:null}});function hc(){console.log(" useEnrichmentState: Hook starting...");let e,t;try{[e,t]=pe.useRecoilState(Ft)}catch(s){return console.error(" useEnrichmentState: Error accessing atom:",s),{state:{enrichmentId:null,status:"idle",totalSamples:0,processedSamples:0,failedSamples:0,progress:0,startedAt:null,completedAt:null,error:null},actions:{startEnrichment:()=>{},cancelEnrichment:()=>{},resetEnrichment:()=>{},loadCurrentEnrichmentState:()=>{}}}}console.log(" useEnrichmentState: enrichmentState =",e);const r=_e();console.log(" useEnrichmentState: client =",r);const o=n.useMemo(()=>({startEnrichment:async(s,i)=>{if(console.log(" useEnrichmentState: Starting enrichment",s,i),!r){console.error(" useEnrichmentState: No client available");return}try{await r.watch_enrichment({enrichment_id:s,total_samples:i}),console.log(" useEnrichmentState: Enrichment started successfully")}catch(l){console.error(" useEnrichmentState: Error starting enrichment:",l),t(d=>({...d,status:"failed",error:l instanceof Error?l.message:String(l)}))}},cancelEnrichment:async()=>{if(console.log(" useEnrichmentState: Cancelling enrichment"),!r){console.error(" useEnrichmentState: No client available");return}try{await r.cancel_enrichment(),t(s=>({...s,status:"cancelled",completedAt:new Date().toISOString()})),console.log(" useEnrichmentState: Enrichment cancelled successfully")}catch(s){console.error(" useEnrichmentState: Error cancelling enrichment:",s)}},resetEnrichment:()=>{console.log(" useEnrichmentState: Resetting enrichment state"),t({enrichmentId:null,status:"idle",totalSamples:0,processedSamples:0,failedSamples:0,progress:0,startedAt:null,completedAt:null,error:null})},loadCurrentEnrichmentState:async()=>{var s;if(console.log(" useEnrichmentState: Loading current enrichment state"),!r){console.error(" useEnrichmentState: No client available");return}try{const i=await r.get_enrichment_status();if(console.log(" useEnrichmentState: Backend enrichment status:",i),((s=i==null?void 0:i.result)==null?void 0:s.status)==="success"&&i.result.enrichment_job){const l=i.result.enrichment_job;t(d=>({...d,enrichmentId:l.get("enrichment_id")||null,status:l.get("status")||"idle",totalSamples:l.get("total_samples")||0,processedSamples:l.get("processed_samples")||0,failedSamples:l.get("failed_samples")||0,progress:l.get("progress_percent")||0,startedAt:l.get("started_at")||null,completedAt:l.get("completed_at")||null,error:l.get("error")||null}))}}catch(i){console.error(" useEnrichmentState: Error loading enrichment state:",i)}},updateEnrichmentProgress:s=>{console.log(" useEnrichmentState: Updating enrichment progress:",s),t(i=>({...i,...s}))}}),[r,t]);return n.useEffect(()=>{console.log(" useEnrichmentState: useEffect triggered, loading current state"),o.loadCurrentEnrichmentState()},[o.loadCurrentEnrichmentState]),{state:e,actions:o}}function yc(){const{state:e}=ht(),t=_e(),{state:r,actions:o}=hc(),[s,i]=n.useState(!1),[l,d]=n.useState(!1),u=()=>{const y=new Set;return e.enableSampleTagging&&e.tagMappings.forEach(m=>{m.fieldName&&y.add(m.fieldName)}),e.enableFieldMapping&&e.fieldMappings.forEach(m=>{m.fieldName&&y.add(m.fieldName)}),e.includeAllTagsAsMetadata&&y.add(e.metadataFieldName||"osm_metadata"),e.enable3DDetections&&y.add(e.detectionFieldName||"detections"),Array.from(y)},c=()=>{const y=[];return e.enableSampleTagging&&e.tagMappings.forEach(m=>{m.fieldName&&y.push({name:m.fieldName,type:m.fieldType||"string",category:"Sample Tagging",description:`OSM tag "${m.osmKey}"  ${m.fieldType||"string"} field`,enabled:!0})}),e.enableFieldMapping&&e.fieldMappings.forEach(m=>{m.fieldName&&y.push({name:m.fieldName,type:m.fieldType||"string",category:"Field Mapping",description:`OSM tag "${m.osmKey}"  ${m.fieldType||"string"} field`,enabled:!0})}),e.includeAllTagsAsMetadata&&y.push({name:e.metadataFieldName||"osm_metadata",type:"list",category:"Metadata",description:"All OSM features from the grid cell",enabled:!0}),e.enable3DDetections&&y.push({name:e.detectionFieldName||"detections",type:"list",category:"3D Detections",description:`3D detections using "${e.detectionLabelTag||"type"}" tag`,enabled:!0}),y},p=async()=>{var y,m;if(!(!t||s)){i(!0);try{const x=await t.clear_enrichment_data();((y=x==null?void 0:x.result)==null?void 0:y.status)==="success"?console.log("Enrichment data cleared successfully:",x.result.message):console.error("Failed to clear enrichment data:",(m=x==null?void 0:x.result)==null?void 0:m.message)}catch(x){console.error("Error clearing enrichment data:",x)}finally{i(!1),d(!1)}}},h=async()=>{var y,m;if(t)try{await t.save_mapping_config({mapping_config:e});const x=await t.enrich_dataset_async();if(((y=x==null?void 0:x.result)==null?void 0:y.status)==="success"){const f=x.result.enrichment_id||`enrichment_${Date.now()}`,v=x.result.total_samples||0;await o.startEnrichment(f,v),console.log("Enrichment started successfully")}else console.error("Failed to start enrichment:",(m=x==null?void 0:x.result)==null?void 0:m.message)}catch(x){console.error("Error starting enrichment:",x)}};return n.createElement(a.Box,{sx:{p:3}},n.createElement(a.Typography,{variant:"h5",sx:{mb:3,fontWeight:600}},"Step 4: Dataset Enrichment"),n.createElement(a.Typography,{variant:"body1",sx:{mb:3,color:"text.secondary"}},"Apply your mapping configuration to enrich the dataset with OpenStreetMap data. This process runs asynchronously and supports multi-dashboard environments."),n.createElement(a.Box,{sx:{mb:3,display:"flex",justifyContent:"flex-end"}},n.createElement(a.Button,{variant:"outlined",color:"info",startIcon:s?n.createElement(a.CircularProgress,{size:20}):n.createElement(qe,null),onClick:()=>d(!0),disabled:s,sx:{minWidth:200}},s?"Clearing...":"Clear Enrichment Data")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(ft,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Dataset Enrichment")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3}},"Start the enrichment process to apply your mapping configuration to the dataset. This process runs asynchronously and supports multi-dashboard environments."),c().length>0&&n.createElement(a.Alert,{severity:"info",sx:{mb:3}},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null,"Ready to enrich ",c().length," field",c().length!==1?"s":"")," ","across your dataset. Each sample will be enriched with OpenStreetMap data based on its geographic location and your configured mappings.")),n.createElement(a.Paper,{elevation:0,sx:{p:2,mb:3,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.02)"}},n.createElement(a.Typography,{variant:"subtitle2",sx:{mb:2,fontWeight:600}}," Enrichment Preview"),c().length>0?n.createElement(a.Box,null,n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},"The following fields will be populated in your dataset:"),Object.entries(c().reduce((y,m)=>(y[m.category]||(y[m.category]=[]),y[m.category].push(m),y),{})).map(([y,m])=>n.createElement(a.Box,{key:y,sx:{mb:2}},n.createElement(a.Typography,{variant:"caption",sx:{fontWeight:600,color:"primary.main",display:"block",mb:1}},y),n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1,ml:1}},m.map((x,f)=>n.createElement(a.Chip,{key:f,label:`${x.name} (${x.type})`,color:"primary",variant:"filled",size:"small",title:x.description}))))),n.createElement(a.Typography,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"}}," Hover over field chips to see detailed mapping information")):n.createElement(a.Alert,{severity:"info",sx:{mb:0}},"No enrichment fields are configured. Please go back to the Mapping step to configure field mappings.")),n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center"},n.createElement(a.Button,{variant:"contained",onClick:h,disabled:r.status==="running"||c().length===0,sx:{minWidth:200}},r.status==="running"?"Enrichment Running...":c().length===0?"No Fields Configured":"Start Enrichment"),r.status==="running"&&n.createElement(a.Box,{sx:{flex:1}},n.createElement(a.Typography,{variant:"body2",color:"primary",sx:{mb:1}},"Enrichment in progress... ",r.processedSamples,"/",r.totalSamples," samples processed (",r.progress.toFixed(1),"%)"),n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(a.CircularProgress,{size:20}),n.createElement(a.Typography,{variant:"caption",color:"text.secondary"},r.failedSamples>0&&`${r.failedSamples} failed`))),r.status==="completed"&&n.createElement(a.Alert,{severity:"success",sx:{flex:1}},"Dataset enrichment completed successfully!"," ",r.processedSamples," samples processed.",r.failedSamples>0&&` ${r.failedSamples} samples failed.`),r.status==="failed"&&n.createElement(a.Alert,{severity:"error",sx:{flex:1}},"Dataset enrichment failed:"," ",r.error||"Unknown error"),r.status==="cancelled"&&n.createElement(a.Alert,{severity:"warning",sx:{flex:1}},"Dataset enrichment was cancelled."))),n.createElement(a.Dialog,{open:l,onClose:()=>!s&&d(!1),maxWidth:"sm",fullWidth:!0},n.createElement(a.DialogTitle,null,n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(qe,{color:"warning"}),"Confirm Clear Enrichment Data")),n.createElement(a.DialogContent,null,n.createElement(a.Typography,{variant:"body1",sx:{mb:2}},"This action will permanently delete all enrichment data from the following fields:"),u().length>0?n.createElement(a.Box,{sx:{mb:2}},u().map((y,m)=>n.createElement(a.Chip,{key:m,label:y,color:"primary",variant:"outlined",size:"small",sx:{mr:1,mb:1}}))):n.createElement(a.Alert,{severity:"info",sx:{mb:2}},"No enrichment fields are currently configured. Nothing will be cleared."),n.createElement(a.Alert,{severity:"warning",sx:{mt:2}},n.createElement("strong",null,"Warning:")," This action cannot be undone. All data in these fields will be permanently removed from your dataset.")),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:()=>d(!1),disabled:s},"Cancel"),n.createElement(a.Button,{onClick:p,color:"error",variant:"contained",disabled:s||u().length===0,startIcon:s?n.createElement(a.CircularProgress,{size:20}):n.createElement(qe,null)},s?"Clearing...":"Clear Data"))))}function bc(){const{state:e}=ht(),t=_e(),[r,o]=n.useState(!1),[s,i]=n.useState(!1),l=()=>{const p=[];if(e.enableSampleTagging&&e.tagMappings.forEach(h=>{if(h.fieldName){const y=h.fieldName,m=h.fieldType||"string";m==="bool"?(p.push({title:`Find samples with ${y} = true`,description:`Samples where the ${h.osmKey} OSM tag was found and converted to true`,query:`${y} == True`,category:"Sample Tagging"}),p.push({title:`Find samples with ${y} = false`,description:`Samples where the ${h.osmKey} OSM tag was found and converted to false`,query:`${y} == False`,category:"Sample Tagging"})):m==="string"?(p.push({title:`Find samples with specific ${y} value`,description:`Samples where ${h.osmKey} has a specific value`,query:`${y} == "residential"`,category:"Sample Tagging"}),p.push({title:`Find samples with any ${y} value`,description:`Samples where ${h.osmKey} has any value (not null)`,query:`${y} != None`,category:"Sample Tagging"})):(m==="int"||m==="float")&&p.push({title:`Find samples with ${y} > threshold`,description:`Samples where ${h.osmKey} has a numeric value above threshold`,query:`${y} > 5`,category:"Sample Tagging"})}}),e.enableFieldMapping&&e.fieldMappings.forEach(h=>{if(h.fieldName){const y=h.fieldName,m=h.fieldType||"string";p.push({title:`Find samples with ${y} data`,description:`Samples where ${h.osmKey} was mapped to ${y}`,query:`${y} != None`,category:"Field Mapping"}),m==="string"&&p.push({title:`Find samples with ${y} containing text`,description:`Samples where ${y} contains specific text`,query:`${y}.contains("school")`,category:"Field Mapping"})}}),e.includeAllTagsAsMetadata){const h=e.metadataFieldName||"osm_metadata";p.push({title:"Find samples with OSM metadata",description:"Samples that have OSM metadata from the enrichment process",query:`${h} != None`,category:"Metadata"}),p.push({title:"Find samples with specific OSM tag in metadata",description:"Samples where the metadata contains a specific OSM tag",query:`${h}.apply(lambda x: any(tag.get("amenity") == "school" for tag in x if isinstance(tag, dict)))`,category:"Metadata"})}if(e.enable3DDetections){const h=e.detectionFieldName||"detections";p.push({title:"Find samples with 3D detections",description:"Samples that have 3D detections from OSM data",query:`${h} != None`,category:"3D Detections"}),p.push({title:"Find samples with specific detection types",description:"Samples with detections of a specific type",query:`${h}.apply(lambda x: any(d.get("label") == "building" for d in x) if x else False)`,category:"3D Detections"})}return p},d=async()=>{if(!(!t||s)){i(!0);try{const p=await t.reset_metageo();(p==null?void 0:p.status)==="success"?console.log("Successfully started over:",p.message):console.error("Failed to start over:",p==null?void 0:p.message)}catch(p){console.error("Error starting over:",p)}finally{i(!1),o(!1)}}},u=p=>{navigator.clipboard.writeText(p)},c=l();return n.createElement(a.Box,{sx:{p:3}},n.createElement(a.Typography,{variant:"h5",sx:{mb:3,fontWeight:600}},"Step 5: Search & Cleanup"),n.createElement(a.Typography,{variant:"body1",sx:{mb:3,color:"text.secondary"}},"Use the enriched OSM data to search for specific samples in your dataset. Copy the example queries below and use them in the FiftyOne sidebar to find samples that match your criteria."),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,border:"1px solid rgba(255, 152, 0, 0.3)",borderRadius:1,backgroundColor:"rgba(255, 152, 0, 0.05)"}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(qn,{color:"warning"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Start Over")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},"Clear all metageo data and return to the beginning. This will remove the index, configuration, and all enriched data from your dataset."),n.createElement(a.Button,{variant:"outlined",color:"warning",startIcon:n.createElement(qn,null),onClick:()=>o(!0),sx:{minWidth:200}},"Start Over")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:3,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:1}},n.createElement(a.Stack,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2}},n.createElement(Gl,{color:"primary"}),n.createElement(a.Typography,{variant:"h6",sx:{fontWeight:600}},"Search Examples")),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:3}},"Use these example queries in the FiftyOne sidebar to search for samples based on your enriched OSM data."),c.length>0?n.createElement(a.Box,null,Object.entries(c.reduce((p,h)=>(p[h.category]||(p[h.category]=[]),p[h.category].push(h),p),{})).map(([p,h],y)=>n.createElement(a.Box,{key:p,sx:{mb:3}},n.createElement(a.Typography,{variant:"subtitle1",sx:{fontWeight:600,mb:2,color:"primary.main"}},p),h.map((m,x)=>n.createElement(a.Paper,{key:x,elevation:0,sx:{p:2,mb:2,border:"1px solid rgba(0, 0, 0, 0.12)",borderRadius:1,backgroundColor:"rgba(0, 0, 0, 0.02)"}},n.createElement(a.Stack,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:1}},n.createElement(a.Typography,{variant:"subtitle2",sx:{fontWeight:600}},m.title),n.createElement(a.Tooltip,{title:"Copy query to clipboard"},n.createElement(a.IconButton,{size:"small",onClick:()=>u(m.query),sx:{ml:1}},n.createElement(jl,{fontSize:"small"})))),n.createElement(a.Typography,{variant:"body2",color:"text.secondary",sx:{mb:2}},m.description),n.createElement(a.Paper,{elevation:0,sx:{p:1.5,backgroundColor:"rgba(0, 0, 0, 0.05)",border:"1px solid rgba(0, 0, 0, 0.1)",borderRadius:1,fontFamily:"monospace",fontSize:"0.875rem"}},n.createElement("code",null,m.query)))))),n.createElement(a.Alert,{severity:"info",sx:{mt:3}},n.createElement(a.Typography,{variant:"body2"},n.createElement("strong",null," Tip:")," Copy any query above and paste it into the FiftyOne sidebar filter box. You can also combine multiple conditions using ",n.createElement("code",null,"&")," (and) or ",n.createElement("code",null,"|")," (or) operators."))):n.createElement(a.Alert,{severity:"info"},n.createElement(a.Typography,{variant:"body2"},"No search examples available. Please complete the mapping configuration in previous steps to see search examples."))),n.createElement(a.Dialog,{open:r,onClose:()=>!s&&o(!1),maxWidth:"sm",fullWidth:!0},n.createElement(a.DialogTitle,null,n.createElement(a.Box,{sx:{display:"flex",alignItems:"center",gap:1}},n.createElement(Kn,{color:"warning"}),"Confirm Start Over")),n.createElement(a.DialogContent,null,n.createElement(a.Typography,{variant:"body1",sx:{mb:2}},"This action will permanently delete all metageo data and return you to the beginning:"),n.createElement(a.Box,{sx:{mb:2}},n.createElement(a.Typography,{variant:"body2",sx:{mb:1,fontWeight:600}},"The following will be cleared:"),n.createElement(a.Box,{sx:{display:"flex",flexWrap:"wrap",gap:1,ml:2}},n.createElement(a.Chip,{label:"Index Configuration",color:"error",variant:"outlined",size:"small"}),n.createElement(a.Chip,{label:"Grid Index",color:"error",variant:"outlined",size:"small"}),n.createElement(a.Chip,{label:"Mapping Configuration",color:"error",variant:"outlined",size:"small"}),n.createElement(a.Chip,{label:"Enriched Data",color:"error",variant:"outlined",size:"small"}),n.createElement(a.Chip,{label:"All Persisted State",color:"error",variant:"outlined",size:"small"}))),n.createElement(a.Alert,{severity:"warning",sx:{mt:2}},n.createElement("strong",null,"Warning:")," This action cannot be undone. All metageo work will be lost and you will need to start from the beginning.")),n.createElement(a.DialogActions,null,n.createElement(a.Button,{onClick:()=>o(!1),disabled:s},"Cancel"),n.createElement(a.Button,{onClick:d,color:"error",variant:"contained",disabled:s,startIcon:s?n.createElement(a.CircularProgress,{size:20}):n.createElement(qn,null)},s?"Starting Over...":"Start Over"))))}const xc=["Index Configuration","Indexing","Mapping","Enrich","Search & Cleanup"];function vc(){const e=a.useTheme(),{state:t,actions:r,derived:o}=Rn(),s=n.useRef(!1);return console.log(" MetageoView render: state =",t,"derived =",o),n.useEffect(()=>{s.current||(console.log(" MetageoView: useEffect triggered, calling loadCurrentIndexingState"),s.current=!0,r.loadCurrentIndexingState().then(i=>{console.log(" MetageoView: loadCurrentIndexingState result:",i),i!=null&&i.success&&(i!=null&&i.hasExistingIndex)?console.log(" MetageoView: Found existing index, should show indexing step"):console.log(" MetageoView: No existing index found")}).catch(i=>{console.error(" MetageoView: Error loading current indexing state:",i)}))},[]),n.useEffect(()=>{t.activeStep===0&&!t.hasStarted&&(s.current=!1,console.log(" MetageoView: Reset detected, reloading state..."),r.loadCurrentIndexingState().then(i=>{console.log(" MetageoView: State reloaded after reset:",i)}).catch(i=>{console.error(" MetageoView: Error reloading state after reset:",i)}))},[t.activeStep,t.hasStarted,r]),t.isLoadingState?n.createElement(a.Box,null,n.createElement(a.Paper,{elevation:1,sx:{p:6,textAlign:"center",borderRadius:2,backgroundColor:e.palette.background.paper}},n.createElement(a.Typography,{variant:"h6",gutterBottom:!0},"Loading Metageo Configuration..."),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Please wait while we check for existing indexing data."))):!t.hasStarted&&!o.hasExistingIndex?(console.log(" MetageoView: Showing Configuration Required - hasStarted =",t.hasStarted,"hasExistingIndex =",o.hasExistingIndex),n.createElement(a.Box,null,n.createElement(a.Paper,{elevation:1,sx:{p:6,textAlign:"center",background:`linear-gradient(135deg, ${a.alpha(e.palette.primary.main,.05)} 0%, ${a.alpha(e.palette.secondary.main,.05)} 100%)`,border:`1px solid ${a.alpha(e.palette.primary.main,.1)}`,borderRadius:3}},n.createElement(a.Typography,{variant:"h3",sx:{mb:3,fontWeight:700,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},"Welcome to Metageo"),n.createElement(a.Typography,{variant:"h6",sx:{mb:4,color:e.palette.text.secondary,fontWeight:400,lineHeight:1.6}},"Enrich your datasets with OpenStreetMap data using intelligent geographic indexing"),n.createElement(a.Button,{onClick:r.start,variant:"contained",size:"large",startIcon:n.createElement(Wl,null),sx:{px:6,py:2,borderRadius:3,fontSize:"1.2rem",fontWeight:600,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.primary.dark})`,"&:hover":{background:`linear-gradient(135deg, ${e.palette.primary.dark}, ${e.palette.primary.main})`}}},"Get Started"),n.createElement(a.Box,{sx:{mt:4,display:"flex",justifyContent:"center",gap:3}},n.createElement(a.Box,{sx:{textAlign:"center"}},n.createElement(a.Typography,{variant:"h4",sx:{color:e.palette.primary.main,fontWeight:600}},""),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Geographic Indexing")),n.createElement(a.Box,{sx:{textAlign:"center"}},n.createElement(a.Typography,{variant:"h4",sx:{color:e.palette.secondary.main,fontWeight:600}},""),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"OSM Integration")),n.createElement(a.Box,{sx:{textAlign:"center"}},n.createElement(a.Typography,{variant:"h4",sx:{color:e.palette.success.main,fontWeight:600}},""),n.createElement(a.Typography,{variant:"body2",color:"text.secondary"},"Real-time Updates")))))):n.createElement(a.Box,null,n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:4,background:`linear-gradient(135deg, ${a.alpha(e.palette.primary.main,.05)} 0%, ${a.alpha(e.palette.secondary.main,.05)} 100%)`,border:`1px solid ${a.alpha(e.palette.primary.main,.1)}`,borderRadius:2}},n.createElement(a.Typography,{variant:"h4",sx:{mb:1,fontWeight:700,background:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},"Metageo Plugin"),n.createElement(a.Typography,{variant:"body1",color:"text.secondary"},"OpenStreetMap Data Enrichment for FiftyOne")),n.createElement(a.Paper,{elevation:1,sx:{p:3,mb:4,background:a.alpha(e.palette.background.paper,.8),border:`1px solid ${a.alpha(e.palette.divider,.2)}`,borderRadius:2}},n.createElement(a.Stepper,{activeStep:o.effectiveStep,alternativeLabel:!0},xc.map((i,l)=>n.createElement(a.Step,{key:i},n.createElement(a.StepLabel,{sx:{"& .MuiStepLabel-label":{fontSize:"0.875rem",fontWeight:500}}},i))))),n.createElement(a.Box,{sx:{mb:4}},o.effectiveStep===ae.INDEX_CONFIGURATION&&n.createElement(sc,null),o.effectiveStep===ae.INDEXING&&n.createElement(cc,null),o.effectiveStep===ae.MAPPING&&n.createElement(mc,null),o.effectiveStep===ae.ENRICH&&n.createElement(yc,null),o.effectiveStep===ae.SEARCH_CLEANUP&&n.createElement(bc,null)),n.createElement(a.Paper,{elevation:1,sx:{p:3,background:a.alpha(e.palette.background.paper,.9),border:`1px solid ${a.alpha(e.palette.divider,.2)}`,borderRadius:2}},n.createElement(a.Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"}},n.createElement(a.Button,{onClick:r.back,disabled:!o.canGoBack,startIcon:n.createElement(Ll,null),variant:"outlined",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Back"),n.createElement(a.Box,{sx:{display:"flex",gap:2}},n.createElement(a.Button,{onClick:r.next,disabled:!o.canGoNext,endIcon:n.createElement(Nl,null),variant:"contained",size:"large",sx:{px:4,py:1.5,borderRadius:2,textTransform:"none",fontWeight:600}},"Next")))))}class Ec extends Q.Operator{get config(){return new Q.OperatorConfig({name:"indexing_started",label:"Indexing Started",unlisted:!0})}useHooks(){return{setIndexingState:pe.useSetRecoilState(mt)}}async execute({hooks:t,params:r}){const{indexing_id:o,total_cells:s,active_cells:i,status:l}=r;console.log("IndexingStartedOperator: Indexing started",{indexing_id:o,total_cells:s,active_cells:i}),t.setIndexingState(d=>({...d,indexingStatus:"running"}))}}class Sc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"cell_status_update",label:"Cell Status Update",unlisted:!0})}useHooks(){const[t,r]=pe.useRecoilState(mt);return{indexingState:t,setIndexingState:r}}async execute({hooks:t,params:r}){const{cell_id:o,status:s,progress:i,osm_features:l,error:d}=r;console.log(`CellStatusUpdateOperator: Updating cell ${o} to status ${s} with ${l} features`),t.setIndexingState(u=>{const c=u.gridCells.map(p=>p.id===o?{...p,status:s,progress:i||0,error:d||void 0,osm_features:l?[l]:void 0}:p);return{...u,gridCells:c}})}}class Cc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"indexing_progress",label:"Indexing Progress",unlisted:!0})}useHooks(){return{setIndexingState:pe.useSetRecoilState(mt)}}async execute({hooks:t,params:r}){const{indexing_id:o,completed_cells:s,failed_cells:i,total_cells:l,total_features:d,progress:u}=r;console.log("IndexingProgressOperator: Progress update",{indexing_id:o,completed_cells:s,failed_cells:i,total_cells:l,total_features:d,progress:u})}}class Tc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"indexing_completed",label:"Indexing Completed",unlisted:!0})}useHooks(){return{setIndexingState:pe.useSetRecoilState(mt)}}async execute({hooks:t,params:r}){const{indexing_id:o,completed_cells:s,failed_cells:i,total_cells:l,total_features:d,status:u}=r;console.log("IndexingCompletedOperator: Indexing completed",{indexing_id:o,completed_cells:s,failed_cells:i,total_cells:l,total_features:d,status:u}),t.setIndexingState(c=>({...c,indexingStatus:"completed"}))}}class _c extends Q.Operator{get config(){return new Q.OperatorConfig({name:"grid_indexing_completed",label:"Grid Indexing Completed",unlisted:!0})}useHooks(){return{setIndexingState:pe.useSetRecoilState(mt)}}async execute({hooks:t,params:r}){const{indexing_id:o,completed_cells:s,failed_cells:i,rate_limited_cells:l,total_features:d,status:u}=r;console.log("GridIndexingCompletedOperator: Grid indexing completed!"),console.log("Completed cells:",s),console.log("Failed cells:",i),console.log("Rate limited cells:",l),console.log("Total features:",d),t.setIndexingState(c=>({...c,indexingStatus:"completed"}))}}class wc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"update_enrichment_state",label:"Update Enrichment State",unlisted:!0})}useHooks(){return{setEnrichmentState:pe.useSetRecoilState(Ft)}}async execute({hooks:t,params:r}){const{enrichment_id:o,status:s,total_samples:i,processed_samples:l,failed_samples:d,progress:u,error:c}=r;console.log(" UpdateEnrichmentStateOperator: Updating enrichment state",{enrichment_id:o,status:s,total_samples:i,processed_samples:l,failed_samples:d,progress:u,error:c}),t.setEnrichmentState(p=>({...p,enrichmentId:o||p.enrichmentId,status:s||p.status,totalSamples:i!==void 0?i:p.totalSamples,processedSamples:l!==void 0?l:p.processedSamples,failedSamples:d!==void 0?d:p.failedSamples,progress:u!==void 0?u:p.progress,startedAt:s==="running"&&!p.startedAt?new Date().toISOString():p.startedAt,completedAt:s==="completed"||s==="failed"||s==="cancelled"?new Date().toISOString():p.completedAt,error:c||null}))}}class Oc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"enrichment_started",label:"Enrichment Started",unlisted:!0})}useHooks(){return{setEnrichmentState:pe.useSetRecoilState(Ft)}}async execute({hooks:t,params:r}){const{enrichment_id:o,total_samples:s,status:i}=r;console.log(" EnrichmentStartedOperator: Enrichment started",{enrichment_id:o,total_samples:s}),t.setEnrichmentState(l=>({...l,enrichmentId:o,status:"running",totalSamples:s,processedSamples:0,failedSamples:0,progress:0,startedAt:new Date().toISOString(),completedAt:null,error:null}))}}class Mc extends Q.Operator{get config(){return new Q.OperatorConfig({name:"enrichment_progress",label:"Enrichment Progress",unlisted:!0})}useHooks(){return{setEnrichmentState:pe.useSetRecoilState(Ft)}}async execute({hooks:t,params:r}){const{enrichment_id:o,processed_samples:s,failed_samples:i,total_samples:l,progress:d}=r;console.log(" EnrichmentProgressOperator: Progress update",{enrichment_id:o,processed_samples:s,failed_samples:i,total_samples:l,progress:d}),t.setEnrichmentState(u=>({...u,processedSamples:s!==void 0?s:u.processedSamples,failedSamples:i!==void 0?i:u.failedSamples,totalSamples:l!==void 0?l:u.totalSamples,progress:d!==void 0?d:u.progress}))}}class Ic extends Q.Operator{get config(){return new Q.OperatorConfig({name:"enrichment_completed",label:"Enrichment Completed",unlisted:!0})}useHooks(){return{setEnrichmentState:pe.useSetRecoilState(Ft)}}async execute({hooks:t,params:r}){const{enrichment_id:o,processed_samples:s,failed_samples:i,total_samples:l,status:d,error:u}=r;console.log(" EnrichmentCompletedOperator: Enrichment completed",{enrichment_id:o,processed_samples:s,failed_samples:i,total_samples:l,status:d,error:u}),t.setEnrichmentState(c=>({...c,status:d,processedSamples:s!==void 0?s:c.processedSamples,failedSamples:i!==void 0?i:c.failedSamples,totalSamples:l!==void 0?l:c.totalSamples,progress:d==="completed"?100:c.progress,completedAt:new Date().toISOString(),error:u||null}))}}function kc(){try{Q.registerOperator(Ec,"@voxel51/metageo"),Q.registerOperator(Sc,"@voxel51/metageo"),Q.registerOperator(Cc,"@voxel51/metageo"),Q.registerOperator(Tc,"@voxel51/metageo"),Q.registerOperator(_c,"@voxel51/metageo"),Q.registerOperator(wc,"@voxel51/metageo"),Q.registerOperator(Oc,"@voxel51/metageo"),Q.registerOperator(Mc,"@voxel51/metageo"),Q.registerOperator(Ic,"@voxel51/metageo"),console.log("Metageo operators registered successfully")}catch(e){console.error("Error registering Metageo operators:",e)}}kc(),De.registerComponent({name:"MetageoView",label:"Metageo",component:vc,type:De.PluginComponentType.Component,activator:()=>!0})});
//# sourceMappingURL=index.umd.js.map
